/*
 * Copyright (C) 2011 Klokan Technologies GmbH (info@klokantech.com)
 *
 * THE COMPLETE SOURCE CODE OF THIS APPLICATION IS AVAILABLE AT:
 *
 *                 http://www.webglearth.org/
 *
 * The JavaScript code in this page is free software: you can
 * redistribute it and/or modify it under the terms of the GNU
 * General Public License (GNU GPL) as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option)
 * any later version.  The code is distributed WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE. See the GNU GPL for more details.
 *
 * USE OF THIS CODE OR ANY PART OF IT IN A NONFREE SOFTWARE IS NOT ALLOWED
 * WITHOUT PRIOR WRITTEN PERMISSION FROM KLOKAN TECHNOLOGIES GMBH.
 *
 * As additional permission under GNU GPL version 3 section 7, you
 * may distribute non-source (e.g., minimized or compacted) forms of
 * that code without the copy of the GNU GPL normally required by
 * section 4, provided you include this license notice and a URL
 * through which recipients can access the Corresponding Source.
 */
function e(a){throw a;}var i=void 0,n=null;function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function p(a){return function(){return this[a]}}function q(a){return function(){return a}}var s,u=this;function v(){}function ca(a){a.Ca=function(){return a.Yi||(a.Yi=new a)}}
function da(a){var b=typeof a;if(b=="object")if(a){if(a instanceof Array)return"array";else if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if(c=="[object Window]")return"object";if(c=="[object Array]"||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice"))return"array";if(c=="[object Function]"||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if(b=="function"&&typeof a.call=="undefined")return"object";return b}function x(a){return a!==i}function y(a){return a===n}function z(a){return a!=n}function A(a){return da(a)=="array"}function ea(a){var b=da(a);return b=="array"||b=="object"&&typeof a.length=="number"}function B(a){return typeof a=="string"}function fa(a){return typeof a=="number"}function ga(a){return da(a)=="function"}function ha(a){a=da(a);return a=="object"||a=="array"||a=="function"}
function ia(a){return a[ja]||(a[ja]=++ka)}var ja="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36),ka=0;function la(a,b,c){return a.call.apply(a.bind,arguments)}function ma(a,b,c){a||e(Error());if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}else return function(){return a.apply(b,arguments)}}
function C(a,b,c){C=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?la:ma;return C.apply(n,arguments)}function na(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var D=Date.now||function(){return+new Date};function E(a,b){function c(){}c.prototype=b.prototype;a.b=b.prototype;a.prototype=new c;a.prototype.constructor=a};function oa(a){var b=arguments,c=b.length;return function(){for(var a,f=0;f<c;f++)a=b[f].apply(this,arguments);return a}};function pa(a){return a.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")}function qa(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}var ra=/^[a-zA-Z0-9\-_.!~*'()]*$/;function sa(a){a=String(a);return!ra.test(a)?encodeURIComponent(a):a}function ta(a){if(!ua.test(a))return a;a.indexOf("&")!=-1&&(a=a.replace(va,"&amp;"));a.indexOf("<")!=-1&&(a=a.replace(wa,"&lt;"));a.indexOf(">")!=-1&&(a=a.replace(xa,"&gt;"));a.indexOf('"')!=-1&&(a=a.replace(ya,"&quot;"));return a}
var va=/&/g,wa=/</g,xa=/>/g,ya=/\"/g,ua=/[&<>\"]/;function za(a){return String(a).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}
function Aa(a,b){for(var c=0,d=qa(String(a)).split("."),f=qa(String(b)).split("."),g=Math.max(d.length,f.length),h=0;c==0&&h<g;h++){var j=d[h]||"",k=f[h]||"",l=RegExp("(\\d*)(\\D*)","g"),o=RegExp("(\\d*)(\\D*)","g");do{var m=l.exec(j)||["","",""],t=o.exec(k)||["","",""];if(m[0].length==0&&t[0].length==0)break;c=Ba(m[1].length==0?0:parseInt(m[1],10),t[1].length==0?0:parseInt(t[1],10))||Ba(m[2].length==0,t[2].length==0)||Ba(m[2],t[2])}while(c==0)}return c}
function Ba(a,b){if(a<b)return-1;else if(a>b)return 1;return 0};function F(){}F.prototype.pe=!1;F.prototype.j=function(){if(!this.pe)this.pe=!0,this.i()};F.prototype.i=function(){this.Ai&&Ca.apply(n,this.Ai)};function Da(a){a&&typeof a.j=="function"&&a.j()}function Ca(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ea(d)?Ca.apply(n,d):Da(d)}};function Ea(a,b,c,d){this.zoom=a||0;this.x=b||0;this.y=c||0;this.Pg=0;this.hc=d||0;this.Ed=this.Yb=n;this.state=Fa}E(Ea,F);Ea.prototype.vi=v;Ea.prototype.i=function(){this.Yb=n;if(this.Ed)this.vi(this.Ed),this.Ed=n};var Fa=0;function G(a,b){this.x=x(a)?a:0;this.y=x(b)?b:0}G.prototype.ma=function(){return new G(this.x,this.y)};function Ga(a,b){return new G(a.x-b.x,a.y-b.y)};function Ha(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}Ha.prototype.ma=function(){return new Ha(this.top,this.right,this.bottom,this.left)};Ha.prototype.contains=function(a){return!this||!a?!1:a instanceof Ha?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};var Ia,Ja,Ka,La,Ma,Na,Oa;function Pa(){return u.navigator?u.navigator.userAgent:n}function Qa(){return u.navigator}Ma=La=Ka=Ja=Ia=!1;var Ra;if(Ra=Pa()){var Sa=Qa();Ia=Ra.indexOf("Opera")==0;Ja=!Ia&&Ra.indexOf("MSIE")!=-1;La=(Ka=!Ia&&Ra.indexOf("WebKit")!=-1)&&Ra.indexOf("Mobile")!=-1;Ma=!Ia&&!Ka&&Sa.product=="Gecko"}var Ta=Ia,H=Ja,I=Ma,J=Ka,Ua=La,Va,Wa=Qa();Va=Wa&&Wa.platform||"";Na=Va.indexOf("Mac")!=-1;Oa=Va.indexOf("Win")!=-1;var Xa=!!Qa()&&(Qa().appVersion||"").indexOf("X11")!=-1,Ya;
a:{var Za="",$a;if(Ta&&u.opera)var ab=u.opera.version,Za=typeof ab=="function"?ab():ab;else if(I?$a=/rv\:([^\);]+)(\)|;)/:H?$a=/MSIE\s+([^\);]+)(\)|;)/:J&&($a=/WebKit\/(\S+)/),$a)var bb=$a.exec(Pa()),Za=bb?bb[1]:"";if(H){var cb,db=u.document;cb=db?db.documentMode:i;if(cb>parseFloat(Za)){Ya=String(cb);break a}}Ya=Za}var eb={};function K(a){return eb[a]||(eb[a]=Aa(Ya,a)>=0)}var fb={};function gb(){return fb[9]||(fb[9]=H&&document.documentMode&&document.documentMode>=9)};function hb(a,b){for(var c in a)b.call(i,a[c],c,a)}function ib(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function jb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function kb(){var a=lb,b;for(b in a)return!1;return!0}function mb(a,b,c){b in a&&e(Error('The object already contains the key "'+b+'"'));a[b]=c}var nb="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");
function ob(a,b){for(var c,d,f=1;f<arguments.length;f++){d=arguments[f];for(c in d)a[c]=d[c];for(var g=0;g<nb.length;g++)c=nb[g],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var L=Array.prototype,pb=L.indexOf?function(a,b,c){return L.indexOf.call(a,b,c)}:function(a,b,c){c=c==n?0:c<0?Math.max(0,a.length+c):c;if(B(a))return!B(b)||b.length!=1?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},M=L.forEach?function(a,b,c){L.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=B(a)?a.split(""):a,g=0;g<d;g++)g in f&&b.call(c,f[g],g,a)},qb=L.filter?function(a,b,c){return L.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=[],g=0,h=B(a)?a.split(""):
a,j=0;j<d;j++)if(j in h){var k=h[j];b.call(c,k,j,a)&&(f[g++]=k)}return f},rb=L.map?function(a,b,c){return L.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=Array(d),g=B(a)?a.split(""):a,h=0;h<d;h++)h in g&&(f[h]=b.call(c,g[h],h,a));return f},sb=L.every?function(a,b,c){return L.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=B(a)?a.split(""):a,g=0;g<d;g++)if(g in f&&!b.call(c,f[g],g,a))return!1;return!0};
function tb(a,b){var c;a:{c=a.length;for(var d=B(a)?a.split(""):a,f=0;f<c;f++)if(f in d&&b.call(i,d[f],f,a)){c=f;break a}c=-1}return c<0?n:B(a)?a.charAt(c):a[c]}function ub(a,b){return pb(a,b)>=0}function vb(a,b){var c=pb(a,b),d;(d=c>=0)&&L.splice.call(a,c,1);return d}function wb(a){return L.concat.apply(L,arguments)}function xb(a){if(A(a))return wb(a);else{for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}}
function yb(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],f;if(A(d)||(f=ea(d))&&d.hasOwnProperty("callee"))a.push.apply(a,d);else if(f)for(var g=a.length,h=d.length,j=0;j<h;j++)a[g+j]=d[j];else a.push(d)}}function zb(a,b,c,d){L.splice.apply(a,Ab(arguments,1))}function Ab(a,b,c){return arguments.length<=2?L.slice.call(a,b):L.slice.call(a,b,c)}function Bb(a,b){L.sort.call(a,b||Cb)}function Cb(a,b){return a>b?1:a<b?-1:0}
function Db(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];A(d)?b.push.apply(b,Db.apply(n,d)):b.push(d)}return b};function Eb(a){if(typeof a.Xb=="function")return a.Xb();if(B(a))return a.split("");if(ea(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return ib(a)}function Fb(a,b,c){if(typeof a.forEach=="function")a.forEach(b,c);else if(ea(a)||B(a))M(a,b,c);else{var d;if(typeof a.Cc=="function")d=a.Cc();else if(typeof a.Xb!="function")if(ea(a)||B(a)){d=[];for(var f=a.length,g=0;g<f;g++)d.push(g)}else d=jb(a);else d=i;for(var f=Eb(a),g=f.length,h=0;h<g;h++)b.call(c,f[h],d&&d[h],a)}};var Gb="StopIteration"in u?u.StopIteration:Error("StopIteration");function Hb(){}Hb.prototype.next=function(){e(Gb)};Hb.prototype.Ze=function(){return this};function Ib(a){if(a instanceof Hb)return a;if(typeof a.Ze=="function")return a.Ze(!1);if(ea(a)){var b=0,c=new Hb;c.next=function(){for(;;)if(b>=a.length&&e(Gb),b in a)return a[b++];else b++};return c}e(Error("Not implemented"))}
function Jb(a,b,c){if(ea(a))try{M(a,b,c)}catch(d){d!==Gb&&e(d)}else{a=Ib(a);try{for(;;)b.call(c,a.next(),i,a)}catch(f){f!==Gb&&e(f)}}};function Kb(a,b){this.fb={};this.O=[];var c=arguments.length;if(c>1){c%2&&e(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof Kb?(c=a.Cc(),d=a.Xb()):(c=jb(a),d=ib(a));for(var f=0;f<c.length;f++)this.set(c[f],d[f])}}s=Kb.prototype;s.w=0;s.ge=0;s.tf=p("w");s.Xb=function(){Lb(this);for(var a=[],b=0;b<this.O.length;b++)a.push(this.fb[this.O[b]]);return a};s.Cc=function(){Lb(this);return this.O.concat()};
s.Vb=function(a){return Mb(this.fb,a)};s.equals=function(a,b){if(this===a)return!0;if(this.w!=a.tf())return!1;var c=b||Nb;Lb(this);for(var d,f=0;d=this.O[f];f++)if(!c(this.get(d),a.get(d)))return!1;return!0};function Nb(a,b){return a===b}s.clear=function(){this.fb={};this.ge=this.w=this.O.length=0};s.remove=function(a){return Mb(this.fb,a)?(delete this.fb[a],this.w--,this.ge++,this.O.length>2*this.w&&Lb(this),!0):!1};
function Lb(a){if(a.w!=a.O.length){for(var b=0,c=0;b<a.O.length;){var d=a.O[b];Mb(a.fb,d)&&(a.O[c++]=d);b++}a.O.length=c}if(a.w!=a.O.length){for(var f={},c=b=0;b<a.O.length;)d=a.O[b],Mb(f,d)||(a.O[c++]=d,f[d]=1),b++;a.O.length=c}}s.get=function(a,b){return Mb(this.fb,a)?this.fb[a]:b};s.set=function(a,b){Mb(this.fb,a)||(this.w++,this.O.push(a),this.ge++);this.fb[a]=b};s.ma=function(){return new Kb(this)};
s.Ze=function(a){Lb(this);var b=0,c=this.O,d=this.fb,f=this.ge,g=this,h=new Hb;h.next=function(){for(;;){f!=g.ge&&e(Error("The map has changed since the iterator was created"));b>=c.length&&e(Gb);var h=c[b++];return a?h:d[h]}};return h};function Mb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Ob(a){this.name=a;this.dc=0;this.nf=[];this.qj=-1.4844222297453324;this.fj=1.4844222297453324;this.rj=-Math.PI;this.gj=Math.PI;this.gf=[];this.opacity=1}function Pb(a,b){if(!z(a.gf[b])){var c=1<<b,d=Math.floor((a.rj/(2*Math.PI)+0.5)*c),f=Math.floor((a.gj/(2*Math.PI)+0.5)*c),g=Math.floor((0.5-Qb(a.fj)/(Math.PI*2))*c),c=Math.floor((0.5-Qb(a.qj)/(Math.PI*2))*c);a.gf[b]=new Ha(g,f,c,d)}return a.gf[b]}s=Ob.prototype;s.gd=q(0);s.hf=q(!1);s.jg=q(!1);s.lh=q(!0);
function Rb(a){M(a.nf,function(a){this.dc--;this.Ee(a.ck,a.onload,a.Mj)},a);a.nf=[]}function Sb(a,b,c,d){a.lh()?a.Ee(b,c,d):(a.nf.push(new Tb(b,c,d)),a.dc++)}s.Yc=aa();s.vf=q(n);s.Tj=v;s.Jg=v;function Ub(a,b,c,d,f){this.pk=a;this.qk=b;this.xk=c;this.yk=d;this.Ak=f}function Tb(a,b,c){this.ck=a;this.onload=b;this.Mj=c};function Vb(a){Ob.call(this,a);this.cg=""}E(Vb,Ob);Vb.prototype.hf=q(!0);Vb.prototype.jg=function(a){var b=this.cg!=a;this.cg=a;return b};Vb.prototype.Ee=function(a,b,c){var d=new Image;d.onload=C(function(){a.state=20;this.dc--;b(a)},this);d.onerror=C(function(){a.Pg++;a.state=-10;this.dc--;c&&c(a)},this);a.state=10;a.Yb=d;d.crossOrigin="";var f=this.Tg(a.zoom,a.x,a.y);d.src=this.cg+f;this.dc++};function N(a,b,c){return Math.min(Math.max(a,b),c)}function Wb(a,b){var c=a%b;return c*b<0?c+b:c}function O(a){return a*Math.PI/180}function Xb(a){return a*180/Math.PI};function Yb(a){var b=x(i),c=new XMLHttpRequest;if(b)c.onreadystatechange=function(){c.readyState==4&&i(c.responseText)};c.open("GET",a,b);c.send(n);return b?"":c.responseText}function Zb(a){a=Wb(a,2*Math.PI);return a>Math.PI?a-2*Math.PI:a}function $b(a){var b=document.createElement("style");b.type="text/css";b.styleSheet?b.styleSheet.cssText=a:b.appendChild(document.createTextNode(a));ac(document,"head",i,i)[0].appendChild(b)};function bc(a,b,c,d,f,g,h,j){Vb.call(this,a);this.url=b;this.minZoom=c;this.maxZoom=d;this.tileSize=f;this.Ei=g===!0;this.pg=h||[];this.copyright=j||""}E(bc,Vb);s=bc.prototype;s.gd=p("minZoom");s.Db=p("maxZoom");s.jd=p("tileSize");s.Tg=function(a,b,c){var d=this.url.replace("{z}",a.toFixed(0)),d=d.replace("{x}",b.toFixed(0)),d=d.replace("{y}",(this.Ei?(1<<a)-c-1:c).toFixed(0));this.pg.length>0&&(d=d.replace("{sub}",this.pg[Wb(b+c+a,this.pg.length)]));return d};
s.Yc=function(a){this.copyright.length>0&&cc(a,this.copyright)};var dc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function ec(a,b){var c;a instanceof ec?(this.wd(b==n?a.sb:b),fc(this,a.ic),gc(this,a.fe),hc(this,a.yc),ic(this,a.sd),this.setPath(a.getPath()),jc(this,a.ub.ma()),kc(this,a.Hd)):a&&(c=String(a).match(dc))?(this.wd(!!b),fc(this,c[1]||"",!0),gc(this,c[2]||"",!0),hc(this,c[3]||"",!0),ic(this,c[4]),this.setPath(c[5]||"",!0),jc(this,c[6]||"",!0),kc(this,c[7]||"",!0)):(this.wd(!!b),this.ub=new lc(n,this,this.sb))}s=ec.prototype;s.ic="";s.fe="";s.yc="";s.sd=n;s.Mc="";s.Hd="";s.Zi=!1;s.sb=!1;
s.toString=function(){if(this.Xa)return this.Xa;var a=[];this.ic&&a.push(mc(this.ic,nc),":");this.yc&&(a.push("//"),this.fe&&a.push(mc(this.fe,nc),"@"),a.push(B(this.yc)?encodeURIComponent(this.yc):n),this.sd!=n&&a.push(":",String(this.sd)));this.Mc&&(this.yc&&this.Mc.charAt(0)!="/"&&a.push("/"),a.push(mc(this.Mc,this.Mc.charAt(0)=="/"?oc:pc)));var b=String(this.ub);b&&a.push("?",b);this.Hd&&a.push("#",mc(this.Hd,qc));return this.Xa=a.join("")};
s.ma=function(){var a=this.ic,b=this.fe,c=this.yc,d=this.sd,f=this.Mc,g=this.ub.ma(),h=this.Hd,j=new ec(n,this.sb);a&&fc(j,a);b&&gc(j,b);c&&hc(j,c);d&&ic(j,d);f&&j.setPath(f);g&&jc(j,g);h&&kc(j,h);return j};function fc(a,b,c){rc(a);delete a.Xa;a.ic=c?b?decodeURIComponent(b):"":b;if(a.ic)a.ic=a.ic.replace(/:$/,"")}function gc(a,b,c){rc(a);delete a.Xa;a.fe=c?b?decodeURIComponent(b):"":b}function hc(a,b,c){rc(a);delete a.Xa;a.yc=c?b?decodeURIComponent(b):"":b}
function ic(a,b){rc(a);delete a.Xa;b?(b=Number(b),(isNaN(b)||b<0)&&e(Error("Bad port number "+b)),a.sd=b):a.sd=n}s.getPath=p("Mc");s.setPath=function(a,b){rc(this);delete this.Xa;this.Mc=b?a?decodeURIComponent(a):"":a;return this};function jc(a,b,c){rc(a);delete a.Xa;b instanceof lc?(a.ub=b,a.ub.ee=a,a.ub.wd(a.sb)):(c||(b=mc(b,sc)),a.ub=new lc(b,a,a.sb))}function tc(a,b,c){rc(a);delete a.Xa;A(c)||(c=[String(c)]);a.ub.setValues(b,c)}
function kc(a,b,c){rc(a);delete a.Xa;a.Hd=c?b?decodeURIComponent(b):"":b}function rc(a){a.Zi&&e(Error("Tried to modify a read-only Uri"))}s.wd=function(a){this.sb=a;this.ub&&this.ub.wd(a);return this};var uc=/^[a-zA-Z0-9\-_.!~*'():\/;?]*$/;function mc(a,b){var c=n;B(a)&&(c=a,uc.test(c)||(c=encodeURI(a)),c.search(b)>=0&&(c=c.replace(b,vc)));return c}function vc(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var nc=/[#\/\?@]/g,pc=/[\#\?:]/g,oc=/[\#\?]/g,sc=/[\#\?@]/g,qc=/#/g;
function lc(a,b,c){this.Bb=a||n;this.ee=b||n;this.sb=!!c}function wc(a){if(!a.G&&(a.G=new Kb,a.w=0,a.Bb))for(var b=a.Bb.split("&"),c=0;c<b.length;c++){var d=b[c].indexOf("="),f=n,g=n;d>=0?(f=b[c].substring(0,d),g=b[c].substring(d+1)):f=b[c];f=decodeURIComponent(f.replace(/\+/g," "));f=xc(a,f);a.add(f,g?decodeURIComponent(g.replace(/\+/g," ")):"")}}s=lc.prototype;s.G=n;s.w=n;s.tf=function(){wc(this);return this.w};
s.add=function(a,b){wc(this);yc(this);a=xc(this,a);if(this.Vb(a)){var c=this.G.get(a);A(c)?c.push(b):this.G.set(a,[c,b])}else this.G.set(a,b);this.w++;return this};s.remove=function(a){wc(this);a=xc(this,a);if(this.G.Vb(a)){yc(this);var b=this.G.get(a);A(b)?this.w-=b.length:this.w--;return this.G.remove(a)}return!1};s.clear=function(){yc(this);this.G&&this.G.clear();this.w=0};s.Vb=function(a){wc(this);a=xc(this,a);return this.G.Vb(a)};
s.Cc=function(){wc(this);for(var a=this.G.Xb(),b=this.G.Cc(),c=[],d=0;d<b.length;d++){var f=a[d];if(A(f))for(var g=0;g<f.length;g++)c.push(b[d]);else c.push(b[d])}return c};s.Xb=function(a){wc(this);if(a)if(a=xc(this,a),this.Vb(a)){var b=this.G.get(a);if(A(b))return b;else a=[],a.push(b)}else a=[];else for(var b=this.G.Xb(),a=[],c=0;c<b.length;c++){var d=b[c];A(d)?yb(a,d):a.push(d)}return a};
s.set=function(a,b){wc(this);yc(this);a=xc(this,a);if(this.Vb(a)){var c=this.G.get(a);A(c)?this.w-=c.length:this.w--}this.G.set(a,b);this.w++;return this};s.get=function(a,b){wc(this);a=xc(this,a);if(this.Vb(a)){var c=this.G.get(a);return A(c)?c[0]:c}else return b};s.setValues=function(a,b){wc(this);yc(this);a=xc(this,a);if(this.Vb(a)){var c=this.G.get(a);A(c)?this.w-=c.length:this.w--}b.length>0&&(this.G.set(a,b),this.w+=b.length)};
s.toString=function(){if(this.Bb)return this.Bb;if(!this.G)return"";for(var a=[],b=0,c=this.G.Cc(),d=0;d<c.length;d++){var f=c[d],g=sa(f),f=this.G.get(f);if(A(f))for(var h=0;h<f.length;h++)b>0&&a.push("&"),a.push(g),f[h]!==""&&a.push("=",sa(f[h])),b++;else b>0&&a.push("&"),a.push(g),f!==""&&a.push("=",sa(f)),b++}return this.Bb=a.join("")};function yc(a){delete a.lf;delete a.Bb;a.ee&&delete a.ee.Xa}
s.ma=function(){var a=new lc;if(this.lf)a.lf=this.lf;if(this.Bb)a.Bb=this.Bb;if(this.G)a.G=this.G.ma();return a};function xc(a,b){var c=String(b);a.sb&&(c=c.toLowerCase());return c}s.wd=function(a){a&&!this.sb&&(wc(this),yc(this),Fb(this.G,function(a,c){var d=c.toLowerCase();c!=d&&(this.remove(c),this.add(d,a))},this));this.sb=a};var zc;function Ac(a){return(a=a.className)&&typeof a.split=="function"?a.split(/\s+/):[]}function P(a,b){var c=Ac(a),d=Ab(arguments,1),f;f=c;for(var g=0,h=0;h<d.length;h++)ub(f,d[h])||(f.push(d[h]),g++);f=g==d.length;a.className=c.join(" ");return f}function Bc(a,b){var c=Ac(a),d=Ab(arguments,1),f;f=c;for(var g=0,h=0;h<f.length;h++)ub(d,f[h])&&(zb(f,h--,1),g++);f=g==d.length;a.className=c.join(" ");return f};function Cc(a,b){this.width=a;this.height=b}function Dc(a,b){return a==b?!0:!a||!b?!1:a.width==b.width&&a.height==b.height}s=Cc.prototype;s.ma=function(){return new Cc(this.width,this.height)};s.Cd=function(){return this.width/this.height};s.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};s.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
s.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};s.scale=function(a){this.width*=a;this.height*=a;return this};var Ec=!H||gb();!I&&!H||H&&gb()||I&&K("1.9.1");var Fc=H&&!K("9");function Q(a){return a?new Gc(R(a)):zc||(zc=new Gc)}function Hc(a){return B(a)?document.getElementById(a):a}
function ac(a,b,c,d){a=d||a;b=b&&b!="*"?b.toUpperCase():"";if(a.querySelectorAll&&a.querySelector&&(!J||Ic(document)||K("528"))&&(b||c))return a.querySelectorAll(b+(c?"."+c:""));if(c&&a.getElementsByClassName)if(a=a.getElementsByClassName(c),b){for(var d={},f=0,g=0,h;h=a[g];g++)b==h.nodeName&&(d[f++]=h);d.length=f;return d}else return a;a=a.getElementsByTagName(b||"*");if(c){d={};for(g=f=0;h=a[g];g++)b=h.className,typeof b.split=="function"&&ub(b.split(/\s+/),c)&&(d[f++]=h);d.length=f;return d}else return a}
function Jc(a,b){hb(b,function(b,d){d=="style"?a.style.cssText=b:d=="class"?a.className=b:d=="for"?a.htmlFor=b:d in Kc?a.setAttribute(Kc[d],b):d.lastIndexOf("aria-",0)==0?a.setAttribute(d,b):a[d]=b})}var Kc={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};function S(a,b,c){return Lc(document,arguments)}
function Lc(a,b){var c=b[0],d=b[1];if(!Ec&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',ta(d.name),'"');if(d.type){c.push(' type="',ta(d.type),'"');var f={};ob(f,d);d=f;delete d.type}c.push(">");c=c.join("")}c=a.createElement(c);if(d)B(d)?c.className=d:A(d)?P.apply(n,[c].concat(d)):Jc(c,d);b.length>2&&Mc(a,c,b,2);return c}
function Mc(a,b,c,d){function f(c){c&&b.appendChild(B(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var g=c[d];ea(g)&&!(ha(g)&&g.nodeType>0)?M(Nc(g)?xb(g):g,f):f(g)}}function Ic(a){return a.compatMode=="CSS1Compat"}function cc(a,b){Mc(R(a),a,arguments,1)}function Oc(a){for(var b;b=a.firstChild;)a.removeChild(b)}function Pc(a){return a&&a.parentNode?a.parentNode.removeChild(a):n}
function Qc(a){if(a.firstElementChild!=i)a=a.firstElementChild;else for(a=a.firstChild;a&&a.nodeType!=1;)a=a.nextSibling;return a}function Rc(a,b){if(a.contains&&b.nodeType==1)return a==b||a.contains(b);if(typeof a.compareDocumentPosition!="undefined")return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function R(a){return a.nodeType==9?a:a.ownerDocument||a.document}
function Sc(a,b){if("textContent"in a)a.textContent=b;else if(a.firstChild&&a.firstChild.nodeType==3){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else Oc(a),a.appendChild(R(a).createTextNode(b))}var Tc={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},Uc={IMG:" ",BR:"\n"};function Vc(a){var b=a.getAttributeNode("tabindex");return b&&b.specified?(a=a.tabIndex,fa(a)&&a>=0&&a<32768):!1}function Wc(a){var b=[];Xc(a,b,!1);return b.join("")}
function Xc(a,b,c){if(!(a.nodeName in Tc))if(a.nodeType==3)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in Uc)b.push(Uc[a.nodeName]);else for(a=a.firstChild;a;)Xc(a,b,c),a=a.nextSibling}function Nc(a){if(a&&typeof a.length=="number")if(ha(a))return typeof a.item=="function"||typeof a.item=="string";else if(ga(a))return typeof a.item=="function";return!1}function Gc(a){this.A=a||u.document||document}s=Gc.prototype;s.Y=Q;
function Yc(a){return a.A}s.c=function(a){return B(a)?this.A.getElementById(a):a};s.t=function(a,b,c){return Lc(this.A,arguments)};s.createElement=function(a){return this.A.createElement(a)};s.createTextNode=function(a){return this.A.createTextNode(a)};function Zc(a){return Ic(a.A)}function $c(a){var b=a.A,a=!J&&Ic(b)?b.documentElement:b.body,b=b.parentWindow||b.defaultView;return new G(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}s.appendChild=function(a,b){a.appendChild(b)};s.Gh=Oc;
s.removeNode=Pc;s.Rg=Qc;s.contains=Rc;function ad(a,b){this.ee=new ec(a);this.ti=b?b:"callback";this.ae=5E3}var bd=0;
ad.prototype.send=function(a,b,c,d){a=a||n;if(!document.documentElement.firstChild)return c&&c(a),n;d=d||"_"+(bd++).toString(36)+D().toString(36);u._callbacks_||(u._callbacks_={});var f=document.createElement("script"),g=n;this.ae>0&&(g=u.setTimeout(cd(d,f,a,c),this.ae));c=this.ee.ma();if(a)for(var h in a)(!a.hasOwnProperty||a.hasOwnProperty(h))&&tc(c,h,a[h]);b&&(u._callbacks_[d]=dd(d,f,b,g),tc(c,this.ti,"_callbacks_."+d));Jc(f,{type:"text/javascript",id:d,charset:"UTF-8",src:c.toString()});document.getElementsByTagName("head")[0].appendChild(f);
return{eb:d,ae:g}};ad.prototype.cancel=function(a){if(a&&a.eb){var b=Hc(a.eb);b&&b.tagName=="SCRIPT"&&typeof u._callbacks_[a.eb]=="function"&&(a.ae&&u.clearTimeout(a.ae),ed(a.eb,b,!1))}};function cd(a,b,c,d){return function(){ed(a,b,!1);d&&d(c)}}function dd(a,b,c,d){return function(f){u.clearTimeout(d);ed(a,b,!0);c.apply(i,arguments)}}function ed(a,b,c){u.setTimeout(function(){Pc(b)},0);u._callbacks_[a]&&(c?delete u._callbacks_[a]:u._callbacks_[a]=v)};function fd(a,b){this.ik=a||"http://open.mapquestapi.com/nominatim/v1/search";this.Rd=b||{};this.mh=new ad(this.ik,"json_callback")}
function gd(a,b,c,d){a.Rd.q=b;a.Rd.format="json";a.Rd.addressdetails=1;a.Rd.limit=c;if(!b||b.length==1)d(b,[]);else{if(c==1)a.Ej=b;if(!(c>1&&b===a.Ej))a.Ih!==n&&a.mh.cancel(a.Ih),a.Ih=a.mh.send(a.Rd,function(a){var c=qb(a,function(a){return a["class"]=="place"});c.length>0?(M(c,function(a){var b=a.address.country_code=="us"?a.address.state:a.address.country;a.type=="suburb"&&(b=a.address.city+", "+b);a.display_name=a.address[a.type]?a.address[a.type]+", "+b:a.display_name}),d(b,c)):d(b,a)})}};var hd;var id=!H||gb(),jd=H&&!K("8");function kd(a,b){this.type=a;this.currentTarget=this.target=b}E(kd,F);s=kd.prototype;s.i=function(){delete this.type;delete this.target;delete this.currentTarget};s.Oc=!1;s.Ud=!0;s.stopPropagation=function(){this.Oc=!0};s.preventDefault=function(){this.Ud=!1};function ld(a){a.preventDefault()};function md(a){md[" "](a);return a}md[" "]=v;function nd(a,b){a&&this.$b(a,b)}E(nd,kd);var od=[1,4,2];s=nd.prototype;s.target=n;s.relatedTarget=n;s.offsetX=0;s.offsetY=0;s.clientX=0;s.clientY=0;s.screenX=0;s.screenY=0;s.button=0;s.keyCode=0;s.charCode=0;s.ctrlKey=!1;s.altKey=!1;s.shiftKey=!1;s.metaKey=!1;s.Oj=!1;s.ra=n;
s.$b=function(a,b){var c=this.type=a.type;kd.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(I){var f;a:{try{md(d.nodeName);f=!0;break a}catch(g){}f=!1}f||(d=n)}}else if(c=="mouseover")d=a.fromElement;else if(c=="mouseout")d=a.toElement;this.relatedTarget=d;this.offsetX=a.offsetX!==i?a.offsetX:a.layerX;this.offsetY=a.offsetY!==i?a.offsetY:a.layerY;this.clientX=a.clientX!==i?a.clientX:a.pageX;this.clientY=a.clientY!==i?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||(c=="keypress"?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Oj=Na?a.metaKey:a.ctrlKey;this.state=a.state;this.ra=a;delete this.Ud;delete this.Oc};function pd(a,b){return id?a.ra.button==b:a.type=="click"?b==0:!!(a.ra.button&od[b])}function qd(a){return pd(a,0)&&!(J&&Na&&a.ctrlKey)}
s.stopPropagation=function(){nd.b.stopPropagation.call(this);this.ra.stopPropagation?this.ra.stopPropagation():this.ra.cancelBubble=!0};s.preventDefault=function(){nd.b.preventDefault.call(this);var a=this.ra;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,jd)try{if(a.ctrlKey||a.keyCode>=112&&a.keyCode<=123)a.keyCode=-1}catch(b){}};s.Gi=p("ra");s.i=function(){nd.b.i.call(this);this.relatedTarget=this.currentTarget=this.target=this.ra=n};function rd(){}var sd=0;s=rd.prototype;s.key=0;s.Pc=!1;s.Fg=!1;s.$b=function(a,b,c,d,f,g){ga(a)?this.kh=!0:a&&a.handleEvent&&ga(a.handleEvent)?this.kh=!1:e(Error("Invalid listener argument"));this.od=a;this.Eh=b;this.src=c;this.type=d;this.capture=!!f;this.xe=g;this.Fg=!1;this.key=++sd;this.Pc=!1};s.handleEvent=function(a){return this.kh?this.od.call(this.xe||this.src,a):this.od.handleEvent.call(this.od,a)};var td,ud=(td="ScriptEngine"in u&&u.ScriptEngine()=="JScript")?u.ScriptEngineMajorVersion()+"."+u.ScriptEngineMinorVersion()+"."+u.ScriptEngineBuildVersion():"0";function vd(a,b){this.sh=b;this.Bc=[];a>this.sh&&e(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.Bc.push(this.zb?this.zb():{})}E(vd,F);vd.prototype.zb=n;vd.prototype.Mg=n;vd.prototype.getObject=function(){return this.Bc.length?this.Bc.pop():this.zb?this.zb():{}};function wd(a,b){a.Bc.length<a.sh?a.Bc.push(b):yd(a,b)}function yd(a,b){if(a.Mg)a.Mg(b);else if(ha(b))if(ga(b.j))b.j();else for(var c in b)delete b[c]}
vd.prototype.i=function(){vd.b.i.call(this);for(var a=this.Bc;a.length;)yd(this,a.pop());delete this.Bc};var zd,Ad,Bd,Cd,Dd,Ed,Gd,Hd,Id,Jd,Kd;
(function(){function a(){return{w:0,hb:0}}function b(){return[]}function c(){function a(b){b=h.call(a.src,a.key,b);if(!b)return b}return a}function d(){return new rd}function f(){return new nd}var g=td&&!(Aa(ud,"5.7")>=0),h;Ed=function(a){h=a};if(g){zd=function(){return j.getObject()};Ad=function(a){wd(j,a)};Bd=function(){return k.getObject()};Cd=function(a){wd(k,a)};Dd=function(){return l.getObject()};Gd=function(){wd(l,c())};Hd=function(){return o.getObject()};Id=function(a){wd(o,a)};Jd=function(){return m.getObject()};
Kd=function(a){wd(m,a)};var j=new vd(0,600);j.zb=a;var k=new vd(0,600);k.zb=b;var l=new vd(0,600);l.zb=c;var o=new vd(0,600);o.zb=d;var m=new vd(0,600);m.zb=f}else zd=a,Ad=v,Bd=b,Cd=v,Dd=c,Gd=v,Hd=d,Id=v,Jd=f,Kd=v})();var Ld={},Md={},Nd={},Od={};
function T(a,b,c,d,f){if(b)if(A(b)){for(var g=0;g<b.length;g++)T(a,b[g],c,d,f);return n}else{var d=!!d,h=Md;b in h||(h[b]=zd());h=h[b];d in h||(h[d]=zd(),h.w++);var h=h[d],j=ia(a),k;h.hb++;if(h[j]){k=h[j];for(g=0;g<k.length;g++)if(h=k[g],h.od==c&&h.xe==f){if(h.Pc)break;return k[g].key}}else k=h[j]=Bd(),h.w++;g=Dd();g.src=a;h=Hd();h.$b(c,g,a,b,d,f);c=h.key;g.key=c;k.push(h);Ld[c]=h;Nd[j]||(Nd[j]=Bd());Nd[j].push(h);a.addEventListener?(a==u||!a.Kg)&&a.addEventListener(b,g,d):a.attachEvent(b in Od?Od[b]:
Od[b]="on"+b,g);return c}else e(Error("Invalid event type"))}function Pd(a,b,c,d,f){if(A(b))for(var g=0;g<b.length;g++)Pd(a,b[g],c,d,f);else if(d=!!d,a=Qd(a,b,d))for(g=0;g<a.length;g++)if(a[g].od==c&&a[g].capture==d&&a[g].xe==f){U(a[g].key);break}}
function U(a){if(!Ld[a])return!1;var b=Ld[a];if(b.Pc)return!1;var c=b.src,d=b.type,f=b.Eh,g=b.capture;c.removeEventListener?(c==u||!c.Kg)&&c.removeEventListener(d,f,g):c.detachEvent&&c.detachEvent(d in Od?Od[d]:Od[d]="on"+d,f);c=ia(c);f=Md[d][g][c];if(Nd[c]){var h=Nd[c];vb(h,b);h.length==0&&delete Nd[c]}b.Pc=!0;f.vh=!0;Rd(d,g,c,f);delete Ld[a];return!0}
function Rd(a,b,c,d){if(!d.Fe&&d.vh){for(var f=0,g=0;f<d.length;f++)if(d[f].Pc){var h=d[f].Eh;h.src=n;Gd(h);Id(d[f])}else f!=g&&(d[g]=d[f]),g++;d.length=g;d.vh=!1;g==0&&(Cd(d),delete Md[a][b][c],Md[a][b].w--,Md[a][b].w==0&&(Ad(Md[a][b]),delete Md[a][b],Md[a].w--),Md[a].w==0&&(Ad(Md[a]),delete Md[a]))}}
function Sd(a){var b,c=0,d=b==n;b=!!b;if(a==n)hb(Nd,function(a){for(var f=a.length-1;f>=0;f--){var g=a[f];if(d||b==g.capture)U(g.key),c++}});else if(a=ia(a),Nd[a])for(var a=Nd[a],f=a.length-1;f>=0;f--){var g=a[f];if(d||b==g.capture)U(g.key),c++}}function Qd(a,b,c){var d=Md;return b in d&&(d=d[b],c in d&&(d=d[c],a=ia(a),d[a]))?d[a]:n}
function Td(a,b,c,d,f){var g=1,b=ia(b);if(a[b]){a.hb--;a=a[b];a.Fe?a.Fe++:a.Fe=1;try{for(var h=a.length,j=0;j<h;j++){var k=a[j];k&&!k.Pc&&(g&=Ud(k,f)!==!1)}}finally{a.Fe--,Rd(c,d,b,a)}}return Boolean(g)}function Ud(a,b){var c=a.handleEvent(b);a.Fg&&U(a.key);return c}
Ed(function(a,b){if(!Ld[a])return!0;var c=Ld[a],d=c.type,f=Md;if(!(d in f))return!0;var f=f[d],g,h;hd===i&&(hd=H&&!u.addEventListener);if(hd){var j;if(!(j=b))a:{j="window.event".split(".");for(var k=u;g=j.shift();)if(z(k[g]))k=k[g];else{j=n;break a}j=k}g=j;j=!0 in f;k=!1 in f;if(j){if(g.keyCode<0||g.returnValue!=i)return!0;a:{var l=!1;if(g.keyCode==0)try{g.keyCode=-1;break a}catch(o){l=!0}if(l||g.returnValue==i)g.returnValue=!0}}l=Jd();l.$b(g,this);g=!0;try{if(j){for(var m=Bd(),t=l.currentTarget;t;t=
t.parentNode)m.push(t);h=f[!0];h.hb=h.w;for(var r=m.length-1;!l.Oc&&r>=0&&h.hb;r--)l.currentTarget=m[r],g&=Td(h,m[r],d,!0,l);if(k){h=f[!1];h.hb=h.w;for(r=0;!l.Oc&&r<m.length&&h.hb;r++)l.currentTarget=m[r],g&=Td(h,m[r],d,!1,l)}}else g=Ud(c,l)}finally{if(m)m.length=0,Cd(m);l.j();Kd(l)}return g}d=new nd(b,this);try{g=Ud(c,d)}finally{d.j()}return g});function Vd(){}E(Vd,F);s=Vd.prototype;s.Kg=!0;s.Ne=n;s.ig=ba("Ne");s.addEventListener=function(a,b,c,d){T(this,a,b,c,d)};s.removeEventListener=function(a,b,c,d){Pd(this,a,b,c,d)};
s.dispatchEvent=function(a){var b=a.type||a,c=Md;if(b in c){if(B(a))a=new kd(a,this);else if(a instanceof kd)a.target=a.target||this;else{var d=a,a=new kd(b,this);ob(a,d)}var d=1,f,c=c[b],b=!0 in c,g;if(b){f=[];for(g=this;g;g=g.Ne)f.push(g);g=c[!0];g.hb=g.w;for(var h=f.length-1;!a.Oc&&h>=0&&g.hb;h--)a.currentTarget=f[h],d&=Td(g,f[h],a.type,!0,a)&&a.Ud!=!1}if(!1 in c)if(g=c[!1],g.hb=g.w,b)for(h=0;!a.Oc&&h<f.length&&g.hb;h++)a.currentTarget=f[h],d&=Td(g,f[h],a.type,!1,a)&&a.Ud!=!1;else for(f=this;!a.Oc&&
f&&g.hb;f=f.Ne)a.currentTarget=f,d&=Td(g,f,a.type,!1,a)&&a.Ud!=!1;a=Boolean(d)}else a=!0;return a};s.i=function(){Vd.b.i.call(this);Sd(this);this.Ne=n};function Wd(a,b,c){this.Nd=a;this.kc=c;this.k=b;T(b,[Xd,Yd,Zd,$d],this);this.jb=n;this.pa=[];this.ta=-1;this.Ba=0;this.xc=this.ba=n}E(Wd,Vd);s=Wd.prototype;s.hj=10;s.ii=!0;s.Dg=!1;s.bi=!1;s.Vh=!1;var Xd="hilite",Yd="select",$d="dismiss",Zd="canceldismiss";s=Wd.prototype;s.handleEvent=function(a){if(a.target==this.k)switch(a.type){case Xd:this.cb(a.row);break;case Yd:ae(this);break;case Zd:be(this);break;case $d:ce(this)}};s.hd=p("ba");s.Qa=function(){return this.k.$()};
function de(a){var b=a.Ba+a.pa.length-1;a.ta>=a.Ba&&a.ta<b?a.cb(a.ta+1):a.ta==-1?a.cb(a.Ba):a.ta==b&&(a.Dg?a.cb(-1):a.bi&&a.cb(a.Ba))}function ee(a){a.ta>a.Ba?a.cb(a.ta-1):a.Dg&&a.ta==a.Ba?a.cb(-1):a.bi&&(a.ta==-1||a.ta==a.Ba)&&a.cb(a.Ba+a.pa.length-1)}s.cb=function(a){this.ta=a;this.k.cb(a);return fe(this,a)!=-1};
function ae(a){var b=fe(a,a.ta);if(b!=-1){var b=a.pa[b],c=a.kc,d=b.toString();if(x(i)?0:c.pd){var f=ge(c,c.p(),he(c.P)),g=ie(c,c.p());c.Yj.test(d)||(d=d.replace(/[\s\xa0]+$/,"")+c.yi);c.kk&&(f!=0&&!/^[\s\xa0]*$/.test(g[f-1])&&(d=" "+d),f==g.length-1&&(d+=" "));if(d!=g[f]){g[f]=d;d=c.P;I&&d.blur();d.value=g.join("");for(var h=0,j=0;j<=f;j++)h+=g[j].length;d.focus();f=h;g=c.P;d=f;je(g)?g.selectionStart=d:H&&(h=ke(g),j=h[0],j.inRange(h[1])&&(d=le(g,d),j.collapse(!0),j.move("character",d),j.select()));
g=c.P;je(g)?g.selectionEnd=f:H&&(h=ke(g),d=h[1],h[0].inRange(d)&&(f=le(g,f),g=le(g,he(g)),d.collapse(!0),d.moveEnd("character",f-g),d.select()))}}else c.W(d);c.fg=!0;a.Vh?(a.jb=n,ce(a)):a.Ab();a.dispatchEvent({type:"update",row:b});a.Vh&&a.kc.update(!0);return!0}else return a.Ab(),a.dispatchEvent({type:"update",row:n}),!1}s.Ab=function(){this.ta=-1;this.jb=n;this.Ba+=this.pa.length;this.pa=[];window.clearTimeout(this.xc);this.xc=n;this.k.Ab();this.dispatchEvent("suggestionsupdate")};
function ce(a){if(!a.xc)a.xc=window.setTimeout(C(a.Ab,a),100)}function be(a){window.setTimeout(C(function(){if(this.xc)window.clearTimeout(this.xc),this.xc=n},a),10)}s.i=function(){Wd.b.i.call(this);this.k.j();this.kc.j();this.Nd=n};s.ej=function(a,b,c){this.jb==a&&this.dg(b,c)};
s.dg=function(a,b){var c=b?fe(this,this.ta):n;this.Ba+=this.pa.length;this.pa=a;for(var d=[],f=0;f<a.length;++f)d.push({id:this.Ba+f,data:a[f]});this.k.dg(d,this.jb,this.ba);this.ii&&d.length!=0&&this.jb?this.cb(c!=n?this.Ba+c:this.Ba):this.ta=-1;this.dispatchEvent("suggestionsupdate")};function fe(a,b){var c=b-a.Ba;return c<0||c>=a.pa.length?-1:c}s.df=function(a){var b=this.kc;b.df.apply(b,arguments)};s.update=function(a){this.kc.update(a)};function me(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}me.prototype.ma=function(){return new me(this.left,this.top,this.width,this.height)};me.prototype.contains=function(a){return a instanceof me?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};me.prototype.Eb=function(){return new Cc(this.width,this.height)};function ne(a,b){var c=R(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,n))?c[b]||c.getPropertyValue(b):""}function oe(a,b){return a.currentStyle?a.currentStyle[b]:n}function pe(a,b){return ne(a,b)||oe(a,b)||a.style[b]}function qe(a,b,c){var d,f=I&&(Na||Xa)&&K("1.9");b instanceof G?(d=b.x,b=b.y):(d=b,b=c);a.style.left=re(d,f);a.style.top=re(b,f)}function se(a){a=a?a.nodeType==9?a:R(a):document;return H&&!gb()&&!Zc(Q(a))?a.body:a.documentElement}
function te(a){var b=a.getBoundingClientRect();if(H)a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop;return b}
function ue(a){if(H)return a.offsetParent;for(var b=R(a),c=pe(a,"position"),d=c=="fixed"||c=="absolute",a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=pe(a,"position"),d=d&&c=="static"&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||c=="fixed"||c=="absolute"||c=="relative"))return a;return n}
function ve(a){for(var b=new Ha(0,Infinity,Infinity,0),c=Q(a),d=c.A.body,f=c.A.documentElement,g=!J&&Ic(c.A)?c.A.documentElement:c.A.body;a=ue(a);)if((!H||a.clientWidth!=0)&&(!J||a.clientHeight!=0||a!=d)&&a!=d&&a!=f&&pe(a,"overflow")!="visible"){var h=we(a),j;j=a;if(I&&!K("1.9")){var k=parseFloat(ne(j,"borderLeftWidth"));if(xe(j)){var l=j.offsetWidth-j.clientWidth-k-parseFloat(ne(j,"borderRightWidth"));k+=l}j=new G(k,parseFloat(ne(j,"borderTopWidth")))}else j=new G(j.clientLeft,j.clientTop);h.x+=
j.x;h.y+=j.y;b.top=Math.max(b.top,h.y);b.right=Math.min(b.right,h.x+a.clientWidth);b.bottom=Math.min(b.bottom,h.y+a.clientHeight);b.left=Math.max(b.left,h.x)}d=g.scrollLeft;g=g.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,g);c=c.A.parentWindow||c.A.defaultView||window;f=c.document;J&&!K("500")&&!Ua?(typeof c.innerHeight=="undefined"&&(c=window),f=c.innerHeight,a=c.document.documentElement.scrollHeight,c==c.top&&a<f&&(f-=15),c=new Cc(c.innerWidth,f)):(c=Ic(f)?f.documentElement:f.body,c=
new Cc(c.clientWidth,c.clientHeight));b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,g+c.height);return b.top>=0&&b.left>=0&&b.bottom>b.top&&b.right>b.left?b:n}
function we(a){var b,c=R(a),d=pe(a,"position"),f=I&&c.getBoxObjectFor&&!a.getBoundingClientRect&&d=="absolute"&&(b=c.getBoxObjectFor(a))&&(b.screenX<0||b.screenY<0),g=new G(0,0),h=se(c);if(a==h)return g;if(a.getBoundingClientRect)b=te(a),a=$c(Q(c)),g.x=b.left+a.x,g.y=b.top+a.y;else if(c.getBoxObjectFor&&!f)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(h),g.x=b.screenX-a.screenX,g.y=b.screenY-a.screenY;else{b=a;do{g.x+=b.offsetLeft;g.y+=b.offsetTop;b!=a&&(g.x+=b.clientLeft||0,g.y+=b.clientTop||0);if(J&&
pe(b,"position")=="fixed"){g.x+=c.body.scrollLeft;g.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(Ta||J&&d=="absolute")g.y-=c.body.offsetTop;for(b=a;(b=ue(b))&&b!=c.body&&b!=h;)if(g.x-=b.scrollLeft,!Ta||b.tagName!="TR")g.y-=b.scrollTop}return g}
function ye(a){var b=new G;if(a.nodeType==1)if(a.getBoundingClientRect)a=te(a),b.x=a.left,b.y=a.top;else{var c=$c(Q(a)),a=we(a);b.x=a.x-c.x;b.y=a.y-c.y}else{var c=ga(a.Gi),d=a;a.targetTouches?d=a.targetTouches[0]:c&&a.ra.targetTouches&&(d=a.ra.targetTouches[0]);b.x=d.clientX;b.y=d.clientY}return b}function ze(a,b,c){var d=we(a);if(b instanceof G)c=b.y,b=b.x;qe(a,a.offsetLeft+(b-d.x),a.offsetTop+(c-d.y))}function re(a,b){typeof a=="number"&&(a=(b?Math.round(a):a)+"px");return a}
function Ae(a){if(pe(a,"display")!="none")return Be(a);var b=a.style,c=b.display,d=b.visibility,f=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=Be(a);b.display=c;b.position=f;b.visibility=d;return a}function Be(a){var b=a.offsetWidth,c=a.offsetHeight,d=J&&!b&&!c;return(!x(b)||d)&&a.getBoundingClientRect?(a=te(a),new Cc(a.right-a.left,a.bottom-a.top)):new Cc(b,c)}function Ce(a){var b=we(a),a=Ae(a);return new me(b.x,b.y,a.width,a.height)}
function De(a,b){a.style.display=b?"":"none"}function xe(a){return"rtl"==pe(a,"direction")}var Ee=I?"MozUserSelect":J?"WebkitUserSelect":n;function Fe(a,b,c){c=!c?a.getElementsByTagName("*"):n;if(Ee){if(b=b?"none":"",a.style[Ee]=b,c)for(var a=0,d;d=c[a];a++)d.style[Ee]=b}else if(H||Ta)if(b=b?"on":"",a.setAttribute("unselectable",b),c)for(a=0;d=c[a];a++)d.setAttribute("unselectable",b)}
function Ge(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);else{var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var f=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return f}}var He={thin:2,medium:4,thick:6};function Ie(a,b){if(oe(a,b+"Style")=="none")return 0;var c=oe(a,b+"Width");return c in He?He[c]:Ge(a,c)}
function Je(a){if(H){var b=Ie(a,"borderLeft"),c=Ie(a,"borderRight"),d=Ie(a,"borderTop"),a=Ie(a,"borderBottom");return new Ha(d,c,a,b)}else return b=ne(a,"borderLeftWidth"),c=ne(a,"borderRightWidth"),d=ne(a,"borderTopWidth"),a=ne(a,"borderBottomWidth"),new Ha(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))};function Ke(a,b){this.Ld=a||1;this.be=b||Le;this.ff=C(this.sg,this);this.Pf=D()}E(Ke,Vd);Ke.prototype.enabled=!1;var Le=u.window;s=Ke.prototype;s.v=n;s.setInterval=function(a){this.Ld=a;this.v&&this.enabled?(this.stop(),this.start()):this.v&&this.stop()};s.sg=function(){if(this.enabled){var a=D()-this.Pf;if(a>0&&a<this.Ld*0.8)this.v=this.be.setTimeout(this.ff,this.Ld-a);else if(this.dispatchEvent(Me),this.enabled)this.v=this.be.setTimeout(this.ff,this.Ld),this.Pf=D()}};
s.start=function(){this.enabled=!0;if(!this.v)this.v=this.be.setTimeout(this.ff,this.Ld),this.Pf=D()};s.stop=function(){this.enabled=!1;if(this.v)this.be.clearTimeout(this.v),this.v=n};s.i=function(){Ke.b.i.call(this);this.stop();delete this.be};var Me="tick";function Ne(a,b,c,d){(!A(a)||!A(b))&&e(Error("Start and end parameters must be arrays"));a.length!=b.length&&e(Error("Start and end points must be the same length"));this.yd=a;this.Ci=b;this.duration=c;this.Ag=d;this.coords=[]}E(Ne,Vd);var lb={},Oe=n;function Pe(){Qe();var a=D(),b;for(b in lb)Re(lb[b],a);Oe=kb()?n:Le.setTimeout(Pe,20)}function Qe(){Oe&&(Le.clearTimeout(Oe),Oe=n)}function Se(a){a=ia(a);delete lb[a];kb()&&Qe()}s=Ne.prototype;s.o=0;s.Qg=0;s.wa=0;s.startTime=n;s.Og=n;s.Nf=n;
s.play=function(a){if(a||this.o==0)this.wa=0,this.coords=this.yd;else if(this.o==1)return!1;Se(this);this.startTime=a=D();this.o==-1&&(this.startTime-=this.duration*this.wa);this.Og=this.startTime+this.duration;this.Nf=this.startTime;this.wa||this.Ka();Te(this,"play");this.o==-1&&this.$f();this.o=1;var b=ia(this);b in lb||(lb[b]=this);Oe||(Oe=Le.setTimeout(Pe,20));Re(this,a);return!0};s.stop=function(a){Se(this);this.o=0;if(a)this.wa=1;Ue(this,this.wa);this.ag();this.gc()};
s.i=function(){this.o!=0&&this.stop(!1);this.Wf();Ne.b.i.call(this)};function Re(a,b){a.wa=(b-a.startTime)/(a.Og-a.startTime);if(a.wa>=1)a.wa=1;a.Qg=1E3/(b-a.Nf);a.Nf=b;Ue(a,a.wa);a.wa==1?(a.o=0,Se(a),Te(a,"finish"),a.gc()):a.o==1&&a.Uf()}function Ue(a,b){ga(a.Ag)&&(b=a.Ag(b));a.coords=Array(a.yd.length);for(var c=0;c<a.yd.length;c++)a.coords[c]=(a.Ci[c]-a.yd[c])*b+a.yd[c]}s.Uf=function(){Te(this,"animate")};s.Ka=function(){Te(this,"begin")};s.Wf=function(){Te(this,"destroy")};
s.gc=function(){Te(this,"end")};s.$f=function(){Te(this,"resume")};s.ag=function(){Te(this,"stop")};function Te(a,b){a.dispatchEvent(new Ve(b,a))}function Ve(a,b){kd.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.H=b.coords[2];this.duration=b.duration;this.wa=b.wa;this.qf=b.Qg;this.state=b.o;this.nk=b}E(Ve,kd);function V(a,b,c,d,f){Ne.call(this,b,c,d,f);this.element=a}E(V,Ne);V.prototype.Vc=v;V.prototype.Uf=function(){this.Vc();V.b.Uf.call(this)};V.prototype.gc=function(){this.Vc();V.b.gc.call(this)};V.prototype.Ka=function(){this.Vc();V.b.Ka.call(this)};function We(a,b,c,d,f){(b.length!=2||c.length!=2)&&e(Error("Start and end points must be 2D"));V.apply(this,arguments)}E(We,V);
We.prototype.Vc=function(){this.element.style.left=Math.round(this.coords[0])+"px";this.element.style.top=Math.round(this.coords[1])+"px"};function Xe(a,b,c,d){We.call(this,a,[a.offsetLeft,a.offsetTop],b,c,d)}E(Xe,We);Xe.prototype.Ka=function(){this.yd=[this.element.offsetLeft,this.element.offsetTop];Xe.b.Ka.call(this)};function Ye(a,b,c,d,f){V.call(this,a,[b],[c],d,f)}E(Ye,V);Ye.prototype.Vc=function(){this.element.style.width=Math.round(this.coords[0])+"px"};
function Ze(a,b,c,d,f){V.call(this,a,[b],[c],d,f)}E(Ze,V);Ze.prototype.Vc=function(){this.element.style.height=Math.round(this.coords[0])+"px"};function $e(a,b,c,d,f){fa(b)&&(b=[b]);fa(c)&&(c=[c]);V.call(this,a,b,c,d,f);(b.length!=1||c.length!=1)&&e(Error("Start and end points must be 1D"))}E($e,V);
$e.prototype.Vc=function(){var a=this.coords[0],b=this.element.style;if("opacity"in b)b.opacity=a;else if("MozOpacity"in b)b.MozOpacity=a;else if("filter"in b)b.filter=a===""?"":"alpha(opacity="+a*100+")"};$e.prototype.show=function(){this.element.style.display=""};function af(a,b,c){$e.call(this,a,1,0,b,c)}E(af,$e);af.prototype.Ka=function(){this.show();af.b.Ka.call(this)};af.prototype.gc=function(){this.element.style.display="none";af.b.gc.call(this)};
function bf(a,b,c){$e.call(this,a,0,1,b,c)}E(bf,$e);bf.prototype.Ka=function(){this.show();bf.b.Ka.call(this)};function cf(){}ca(cf);cf.prototype.Aj=0;function df(a){return":"+(a.Aj++).toString(36)}cf.Ca();function ef(a,b){a.setAttribute("role",b);a.vk=b}function X(a,b,c){a.setAttribute("aria-"+b,c)};function ff(a,b,c,d){this.fa=a||document.body;this.V=Q(this.fa);this.Sj=!a;this.f=n;this.jb="";this.pa=[];this.Qc=[];this.Ph=this.ye=-1;this.U=!1;this.className="ac-renderer";this.eg="ac-row";this.oh="active";this.Bg="ac-active";this.Ui="ac-highlighted";this.bd=b||n;this.jk=d!=n?d:!0;this.Gf=!1;this.Vj=c!=n?c:!1;this.Jf=n;this.Xe=!1;this.He=0}E(ff,Vd);s=ff.prototype;s.c=p("f");s.dg=function(a,b,c){this.jb=b;this.pa=a;this.ye=-1;this.Ph=D();this.ba=c;this.Qc=[];gf(this)};
s.Ab=function(){this.ba&&X(this.ba,"activedescendant","");if(this.U)this.U=!1,this.ba&&X(this.ba,"haspopup",!1),this.He>0?(Da(this.D),this.D=new af(this.f,this.He),this.D.play()):De(this.f,!1)};s.show=function(){if(!this.U)this.U=!0,this.ba&&(ef(this.ba,"combobox"),X(this.ba,"autocomplete","list"),X(this.ba,"haspopup",!0)),this.He>0?(Da(this.D),this.D=new bf(this.f,this.He),this.D.play()):De(this.f,!0)};s.$=p("U");
function hf(a,b){var c=b>=0&&b<a.Qc.length?a.Qc[b]:i;if(a.dispatchEvent({type:"rowhilite",wk:c})&&(jf(a),a.ye=b,c)){P(c,a.Bg,a.oh);a.ba&&X(a.ba,"activedescendant",c?c.id:"");var d=a.f,f=we(c),g=we(d),h=Je(d),j=f.x-g.x-h.left,f=f.y-g.y-h.top,g=d.clientHeight-c.offsetHeight;d.scrollLeft+=Math.min(j,Math.max(j-(d.clientWidth-c.offsetWidth),0));d.scrollTop+=Math.min(f,Math.max(f-g,0))}}function jf(a){a.ye>=0&&Bc(a.Qc[a.ye],a.Bg,a.oh)}
s.cb=function(a){if(a==-1)hf(this,-1);else for(var b=0;b<this.pa.length;b++)if(this.pa[b].id==a){hf(this,b);break}};function kf(a){if(!a.f){var b=a.V.t("div",{style:"display:none"});a.f=b;P(b,a.className);ef(b,"listbox");b.id=df(cf.Ca());a.V.appendChild(a.fa,b);T(b,"click",a.Xg,!1,a);T(b,"mousedown",a.we,!1,a);T(a.V.A,"mousedown",a.Zg,!1,a);T(b,"mouseover",a.$g,!1,a)}}
function gf(a){kf(a);if(a.Xe)a.f.style.visibility="hidden";if(a.lk)a.f.style.minWidth=a.lk.clientWidth+"px";a.Qc.length=0;a.V.Gh(a.f);if(a.bd&&a.bd.Kb)a.bd.Kb(a);else{var b=n;Jb(a.pa,function(a){var d=this.jb,f=this.V.t("div",{className:this.eg,id:df(cf.Ca())});ef(f,"option");this.bd&&this.bd.Hh?this.bd.Hh(a,d,f):f.innerHTML=ta(a.data.toString());d&&this.jk&&lf(this,f,d);P(f,this.eg);this.Qc.push(f);a=f;this.Xe?this.f.insertBefore(a,b):this.V.appendChild(this.f,a);b=a},a)}a.pa.length==0?a.Ab():(a.show(),
a.Td(),Fe(a.f,!0))}s.Td=function(){if(this.ba&&this.Sj){var a=we(this.ba),b=Ae(this.ba),c=Ae(se(this.ba)),d=Ae(this.f);a.y=this.Xe?a.y-d.height:a.y+b.height;(this.Vj||a.x+d.width>c.width)&&this.Jf!="LEFT"?(a.x=a.x+b.width-d.width,this.Jf="RIGHT"):this.Jf="LEFT";ze(this.f,a);if(this.Xe)this.f.style.visibility="visible"}};
s.i=function(){if(this.f)Pd(this.f,"click",this.Xg,!1,this),Pd(this.f,"mousedown",this.we,!1,this),Pd(this.V.A,"mousedown",this.Zg,!1,this),Pd(this.f,"mouseover",this.$g,!1,this),this.V.removeNode(this.f),this.f=n,this.U=!1;Da(this.D);delete this.fa;ff.b.i.call(this)};
function lf(a,b,c){if(b.nodeType==3){var d=n;A(c)&&c.length>1&&!a.Gf&&(d=Ab(c,1));c=mf(a,c);if(c.length!=0){for(var f=b.nodeValue,g=RegExp("(.*?)(^|\\W+)("+c+")","gi"),c=[],h=0,j=g.exec(f),k=0;j;)k++,c.push(j[1]),c.push(j[2]),c.push(j[3]),h=g.lastIndex,j=g.exec(f);c.push(f.substring(h));if(c.length>1){d=!a.Gf?1:k;for(f=0;f<d;f++)g=3*f,b.nodeValue=c[g]+c[g+1],h=a.V.createElement("b"),h.className=a.Ui,a.V.appendChild(h,a.V.createTextNode(c[g+2])),h=b.parentNode.insertBefore(h,b.nextSibling),b.parentNode.insertBefore(a.V.createTextNode(""),
h.nextSibling),b=h.nextSibling;a=Ab(c,d*3);b.nodeValue=a.join("")}else d&&lf(a,b,d)}}else for(b=b.firstChild;b;)d=b.nextSibling,lf(a,b,c),b=d}function mf(a,b){var c="";if(!b)return c;a.Gf?A(b)?(c=qb(b,function(a){return!/^[\s\xa0]*$/.test(a==n?"":String(a))}),c=rb(c,za),c=c.join("|")):(c=b.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,""),c=za(c),c=c.replace(/ /g,"|")):c=A(b)?b.length>0?za(b[0]):"":za(b);return c}
function nf(a,b){for(;b&&b!=a.f&&!ub(Ac(b),a.eg);)b=b.parentNode;return b?pb(a.Qc,b):-1}s.Xg=function(a){var b=nf(this,a.target);b>=0&&this.dispatchEvent({type:Yd,row:this.pa[b].id});a.stopPropagation()};s.we=function(a){this.dispatchEvent(Zd);a.stopPropagation();a.preventDefault()};s.Zg=function(a){this.ba==a.target?(jf(this),a.stopPropagation()):this.dispatchEvent($d)};s.$g=function(a){a=nf(this,a.target);a>=0&&!(D()-this.Ph<300)&&this.dispatchEvent({type:Xd,row:this.pa[a].id})};function of(a){this.eh=a;this.O=[]}E(of,F);var pf=[];of.prototype.h=function(a,b,c,d,f){A(b)||(pf[0]=b,b=pf);for(var g=0;g<b.length;g++)this.O.push(T(a,b[g],c||this,d||!1,f||this.eh||this));return this};of.prototype.ca=function(a,b,c,d,f){if(A(b))for(var g=0;g<b.length;g++)this.ca(a,b[g],c,d,f);else{a:{c=c||this;f=f||this.eh||this;d=!!d;if(a=Qd(a,b,d))for(b=0;b<a.length;b++)if(!a[b].Pc&&a[b].od==c&&a[b].capture==d&&a[b].xe==f){a=a[b];break a}a=n}if(a)a=a.key,U(a),vb(this.O,a)}return this};
function qf(a){M(a.O,U);a.O.length=0}of.prototype.i=function(){of.b.i.call(this);qf(this)};of.prototype.handleEvent=function(){e(Error("EventHandler.handleEvent not implemented"))};function he(a){var b;a:{var c=0,d=0;if(je(a))c=a.selectionStart,d=-1;else if(H){var f=ke(a);b=f[0];f=f[1];if(b.inRange(f)){b.setEndPoint("EndToStart",f);if(a.type=="textarea"){f.duplicate();c=a=b.text;for(d=!1;!d;)b.compareEndPoints("StartToEnd",b)==0?d=!0:(b.moveEnd("character",-1),b.text==a?c+="\r\n":d=!0);b=[c.length,-1];break a}c=b.text.length;d=-1}}b=[c,d]}return b[0]}
function ke(a){var b=a.ownerDocument||a.document,c=b.selection.createRange();a.type=="textarea"?(b=b.body.createTextRange(),b.moveToElementText(a)):b=a.createTextRange();return[b,c]}function le(a,b){if(a.type=="textarea")b=a.value.substring(0,b).replace(/(\r\n|\r|\n)/g,"\n").length;return b}function je(a){try{return typeof a.selectionStart=="number"}catch(b){return!1}};var rf,sf;sf=rf=!1;var tf=Pa();tf&&(tf.indexOf("Firefox")!=-1||tf.indexOf("Camino")!=-1||(tf.indexOf("iPhone")!=-1||tf.indexOf("iPod")!=-1?rf=!0:tf.indexOf("iPad")!=-1&&(sf=!0)));var uf=rf,vf=sf;function wf(a,b,c,d,f){if(!H&&(!J||!K("525")))return!0;if(Na&&f)return xf(a);if(f&&!d)return!1;if(!c&&(b==17||b==18))return!1;if(H&&d&&b==a)return!1;switch(a){case 13:return!(H&&gb());case 27:return!J}return xf(a)}
function xf(a){if(a>=48&&a<=57)return!0;if(a>=96&&a<=106)return!0;if(a>=65&&a<=90)return!0;if(J&&a==0)return!0;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return!0;default:return!1}};function yf(a,b){a&&this.Dd(a,b)}E(yf,Vd);s=yf.prototype;s.f=n;s.Be=n;s.Kf=n;s.Ce=n;s.cc=-1;s.bc=-1;
var zf={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},Af={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},Bf={61:187,59:186},Cf=H||J&&K("525");s=yf.prototype;
s.Af=function(a){if(J&&(this.cc==17&&!a.ctrlKey||this.cc==18&&!a.altKey))this.bc=this.cc=-1;Cf&&!wf(a.keyCode,this.cc,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):this.bc=I&&a.keyCode in Bf?Bf[a.keyCode]:a.keyCode};s.Ni=function(){this.bc=this.cc=-1};
s.handleEvent=function(a){var b=a.ra,c,d;H&&a.type=="keypress"?(c=this.bc,d=c!=13&&c!=27?b.keyCode:0):J&&a.type=="keypress"?(c=this.bc,d=b.charCode>=0&&b.charCode<63232&&xf(c)?b.charCode:0):Ta?(c=this.bc,d=xf(c)?b.keyCode:0):(c=b.keyCode||this.bc,d=b.charCode||0,Na&&d==63&&!c&&(c=191));var f=c,g=b.keyIdentifier;c?c>=63232&&c in zf?f=zf[c]:c==25&&a.shiftKey&&(f=9):g&&g in Af&&(f=Af[g]);a=f==this.cc;this.cc=f;b=new Df(f,d,a,b);try{this.dispatchEvent(b)}finally{b.j()}};s.c=p("f");
s.Dd=function(a,b){this.Ce&&this.detach();this.f=a;this.Be=T(this.f,"keypress",this,b);this.Kf=T(this.f,"keydown",this.Af,b,this);this.Ce=T(this.f,"keyup",this.Ni,b,this)};s.detach=function(){if(this.Be)U(this.Be),U(this.Kf),U(this.Ce),this.Ce=this.Kf=this.Be=n;this.f=n;this.bc=this.cc=-1};s.i=function(){yf.b.i.call(this);this.detach()};function Df(a,b,c,d){d&&this.$b(d,i);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}E(Df,nd);function Ef(a,b,c,d){d=d||150;this.Wd=z(a)?a:Ff;this.yi=this.Wd.substring(0,1);a=this.pd?"[\\s"+this.Wd+"]+":"[\\s]+";this.Wh=RegExp("^"+a+"|"+a+"$","g");this.Yj=RegExp("\\s*["+this.Wd+"]$");this.qh=b||"";this.Qj=this.pd=c!=n?c:!0;this.v=d>0?new Ke(d):n;this.qa=new of(this);this.$e=new of(this);this.L=new yf;this.nh=-1}E(Ef,F);var Gf=(uf||vf)&&!K("533.17.9"),Ff=",;";s=Ef.prototype;s.kk=!0;s.Fi=!0;s.Yh=!1;s.$j=!0;s.Zj=!0;s.af=n;s.P=n;s.Of="";s.rc=!1;s.fg=!1;s.Xh=!0;s.p=function(){return this.P.value};
s.W=function(a){this.P.value=a};s.df=function(a){for(var b=0;b<arguments.length;b++){var c=arguments[b];ha(c)&&c.nodeType==1&&X(c,"haspopup",!0);this.qa.h(c,"focus",this.Dc);this.qa.h(c,"blur",this.Gb);if(!this.P&&(this.$e.h(c,"keydown",this.Jj),ha(c)&&c.nodeType==1)){var d=R(c);(d&&d.activeElement)==c&&Hf(this,c)}}};s.i=function(){Ef.b.i.call(this);this.af!=n&&window.clearTimeout(this.af);this.qa.j();delete this.qa;this.$e.j();this.L.j()};function If(a){a.v?a.v.setInterval(300):a.v=new Ke(300)}
s.bb=function(a){switch(a.keyCode){case 40:if(this.N.Qa())return this.Yh?ee(this.N):de(this.N),a.preventDefault(),!0;else if(!this.pd)return this.update(!0),a.preventDefault(),!0;break;case 38:if(this.N.Qa())return this.Yh?de(this.N):ee(this.N),a.preventDefault(),!0;break;case 9:if(this.N.Qa()&&!a.shiftKey){if(this.update(),ae(this.N)&&this.Qj)return a.preventDefault(),!0}else this.N.Ab();break;case 13:if(this.N.Qa()){if(this.update(),ae(this.N))return a.preventDefault(),a.stopPropagation(),!0}else this.N.Ab();
break;case 27:if(this.N.Qa())return this.N.Ab(),a.preventDefault(),a.stopPropagation(),!0;break;case 229:if(!this.rc){if(!this.rc)this.qa.h(this.P,"keyup",this.Ah),this.qa.h(this.P,"keypress",this.zh),this.rc=!0;return!0}break;default:this.v&&!this.Xh&&(this.v.stop(),this.v.start())}return Jf(this,a)};function Jf(a,b){var c=a.pd&&b.charCode&&a.Wd.indexOf(String.fromCharCode(b.charCode))!=-1;a.$j&&c&&a.update();return a.Zj&&c&&ae(a.N)?(b.preventDefault(),!0):!1}s.Mi=q(!1);
s.Dc=function(a){Hf(this,a.target||n)};function Hf(a,b){qf(a.$e);a.N&&be(a.N);if(b!=a.P)a.P=b,a.v&&(a.v.start(),a.qa.h(a.v,Me,a.qd)),a.Of=a.p(),a.L.Dd(a.P),a.qa.h(a.L,"key",a.Bh),H&&a.qa.h(a.P,"keypress",a.yh)}s.Gb=function(){Gf?this.af=window.setTimeout(C(this.Dh,this),0):this.Dh()};
s.Dh=function(){if(this.P)this.qa.ca(this.L,"key",this.Bh),this.L.detach(),this.qa.ca(this.P,"keyup",this.Mi),H&&this.qa.ca(this.P,"keypress",this.yh),this.rc&&Kf(this),this.P=n,this.v&&(this.v.stop(),this.qa.ca(this.v,Me,this.qd)),this.N&&ce(this.N)};s.qd=function(){this.update()};s.Jj=function(a){this.Dc(a)};s.Bh=function(a){this.nh=a.keyCode;this.N&&this.bb(a)};s.zh=function(){this.rc&&this.nh!=229&&Kf(this)};s.Ah=function(a){this.rc&&(a.keyCode==13||a.keyCode==77&&a.ctrlKey)&&Kf(this)};
function Kf(a){if(a.rc)a.rc=!1,a.qa.ca(a.P,"keypress",a.zh),a.qa.ca(a.P,"keyup",a.Ah)}s.yh=function(a){Jf(this,a)};s.update=function(a){if(this.P&&(a||this.p()!=this.Of)){if(a||!this.fg){var a=he(this.P),b=this.p(),a=ie(this,b)[ge(this,b,a)],a=this.Wh?String(a).replace(this.Wh,""):a;if(this.N&&(this.N.ba=this.P,b=this.N,this.p(),b.jb!=a))b.jb=a,gd(b.Nd,b.jb,b.hj,C(b.ej,b)),be(b)}this.Of=this.p()}this.fg=!1};
function ge(a,b,c){a=ie(a,b);if(c==b.length)return a.length-1;for(var d=b=0,f=0;d<a.length&&f<=c;d++)f+=a[d].length,b=d;return b}function ie(a,b){if(!a.pd)return[b];for(var c=String(b).split(""),d=[],f=[],g=0,h=!1;g<c.length;g++)if(a.qh&&a.qh.indexOf(c[g])!=-1){if(a.Fi&&!h)d.push(f.join("")),f.length=0;f.push(c[g]);h=!h}else!h&&a.Wd.indexOf(c[g])!=-1?(f.push(c[g]),d.push(f.join("")),f.length=0):f.push(c[g]);d.push(f.join(""));return d};function Lf(a,b,c){var d=new ff(n,{Hh:function(a,b,c){c.innerHTML=a.data.display_name+" ("+a.data.type+")"}});this.Nd=new fd(b,c);b=new Ef(n,n,!1);If(b);b.Xh=!1;b.N=this;b.df(a);Wd.call(this,this.Nd,d,b);this.addEventListener("update",function(b){a.value=b.row.display_name})}E(Lf,Wd);Lf.prototype.search=function(a,b,c){gd(this.Nd,a,b,c)};function Mf(){this.Fh=D()}new Mf;Mf.prototype.set=ba("Fh");Mf.prototype.get=p("Fh");function Nf(a){bc.call(this,a||"MapQuest OSM","http://otile{sub}.mqcdn.com/tiles/1.0.0/osm/{z}/{x}/{y}.png",0,18,256,!1,["1","2","3","4"])}E(Nf,bc);Nf.prototype.Yc=function(a){cc(a,"Map data \u00a9 ",S("a",{href:"http://www.openstreetmap.org/"},"OpenStreetMap")," contributors, CC-BY-SA",S("br"));cc(a,"Tiles Courtesy of ",S("a",{href:"http://open.mapquest.co.uk/"},"MapQuest")," ",S("img",{src:"http://developer.mapquest.com/content/osm/mq_logo.png",border:0}))};function Of(a){this.V=a||Q();this.Vd=Pf}E(Of,Vd);Of.prototype.Vi=cf.Ca();var Pf=n;function Qf(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}e(Error("Invalid component state"))}s=Of.prototype;s.eb=n;s.I=!1;s.f=n;s.Vd=n;s.Tf=n;s.fa=n;s.ka=n;s.Na=n;s.$h=!1;
function Rf(a){return a.eb||(a.eb=df(a.Vi))}function Sf(a,b){if(a.fa&&a.fa.Na){var c=a.fa.Na,d=a.eb;d in c&&delete c[d];mb(a.fa.Na,b,a)}a.eb=b}s.c=p("f");s.sa=function(){return this.kd||(this.kd=new of(this))};function Tf(a,b){a==b&&e(Error("Unable to set parent component"));b&&a.fa&&a.eb&&Uf(a.fa,a.eb)&&a.fa!=b&&e(Error("Unable to set parent component"));a.fa=b;Of.b.ig.call(a,b)}s.getParent=p("fa");s.ig=function(a){this.fa&&this.fa!=a&&e(Error("Method not supported"));Of.b.ig.call(this,a)};s.Y=p("V");
s.t=function(){this.f=this.V.createElement("div")};s.Kb=function(a){Vf(this,a)};function Vf(a,b,c){a.I&&e(Error("Component already rendered"));a.f||a.t();b?b.insertBefore(a.f,c||n):a.V.A.body.appendChild(a.f);(!a.fa||a.fa.I)&&a.da()}s.ha=function(a){if(this.I)e(Error("Component already rendered"));else if(a&&this.Ya(a)){this.$h=!0;if(!this.V||this.V.A!=R(a))this.V=Q(a);this.pb(a);this.da()}else e(Error("Invalid element to decorate"))};s.Ya=q(!0);s.pb=ba("f");
s.da=function(){this.I=!0;Wf(this,function(a){!a.I&&a.c()&&a.da()})};s.Pa=function(){Wf(this,function(a){a.I&&a.Pa()});this.kd&&qf(this.kd);this.I=!1};s.i=function(){Of.b.i.call(this);this.I&&this.Pa();this.kd&&(this.kd.j(),delete this.kd);Wf(this,function(a){a.j()});!this.$h&&this.f&&Pc(this.f);this.fa=this.Tf=this.f=this.Na=this.ka=n};s.Ad=function(a,b){this.Bd(a,Xf(this),b)};
s.Bd=function(a,b,c){a.I&&(c||!this.I)&&e(Error("Component already rendered"));(b<0||b>Xf(this))&&e(Error("Child component index out of bounds"));if(!this.Na||!this.ka)this.Na={},this.ka=[];a.getParent()==this?(this.Na[Rf(a)]=a,vb(this.ka,a)):mb(this.Na,Rf(a),a);Tf(a,this);zb(this.ka,b,0,a);a.I&&this.I&&a.getParent()==this?(c=this.X(),c.insertBefore(a.c(),c.childNodes[b]||n)):c?(this.f||this.t(),b=Yf(this,b+1),Vf(a,this.X(),b?b.f:n)):this.I&&!a.I&&a.f&&a.da()};s.X=p("f");
function Zf(a){if(a.Vd==n)a.Vd=xe(a.I?a.f:a.V.A.body);return a.Vd}s.xd=function(a){this.I&&e(Error("Component already rendered"));this.Vd=a};function Xf(a){return a.ka?a.ka.length:0}function Uf(a,b){return a.Na&&b?(b in a.Na?a.Na[b]:i)||n:n}function Yf(a,b){return a.ka?a.ka[b]||n:n}function Wf(a,b,c){a.ka&&M(a.ka,b,c)}function $f(a,b){return a.ka&&b?pb(a.ka,b):-1}
s.removeChild=function(a,b){if(a){var c=B(a)?a:Rf(a),a=Uf(this,c);if(c&&a){var d=this.Na;c in d&&delete d[c];vb(this.ka,a);b&&(a.Pa(),a.f&&Pc(a.f));Tf(a,n)}}a||e(Error("Child is not in parent component"));return a};s.Gh=function(a){for(;this.ka&&this.ka.length!=0;)this.removeChild(Yf(this,0),a)};function ag(){}var bg;ca(ag);s=ag.prototype;s.rb=aa();s.t=function(a){var b=a.Y().t("div",this.fd(a).join(" "),a.getContent());this.Qe(a,b);return b};s.X=function(a){return a};s.Gd=function(a,b,c){if(a=a.c?a.c():a)if(H&&!K("7")){var d=cg(Ac(a),b);d.push(b);na(c?P:Bc,a).apply(n,d)}else c?P(a,b):Bc(a,b)};s.Ya=q(!0);
s.ha=function(a,b){b.id&&Sf(a,b.id);var c=this.X(b);c&&c.firstChild?dg(a,c.firstChild.nextSibling?xb(c.childNodes):c.firstChild):a.Zc=n;var d=0,f=this.r(),g=this.r(),h=!1,j=!1,c=!1,k=Ac(b);M(k,function(a){!h&&a==f?(h=!0,g==f&&(j=!0)):!j&&a==g?j=!0:d|=this.xf(a)},this);a.o=d;h||(k.push(f),g==f&&(j=!0));j||k.push(g);var l=a.ab;l&&k.push.apply(k,l);if(H&&!K("7")){var o=cg(k);o.length>0&&(k.push.apply(k,o),c=!0)}if(!h||!j||l||c)b.className=k.join(" ");this.Qe(a,b);return b};
s.nd=function(a){Zf(a)&&this.xd(a.c(),!0);a.isEnabled()&&this.mc(a,a.$())};s.Qe=function(a,b){a.isEnabled()||this.Ga(b,1,!0);a.o&8&&this.Ga(b,8,!0);a.T&16&&this.Ga(b,16,!!(a.o&16));a.T&64&&this.Ga(b,64,a.Qa())};s.Xd=function(a,b){Fe(a,!b,!H&&!Ta)};s.xd=function(a,b){this.Gd(a,this.r()+"-rtl",b)};s.ac=function(a){var b;return a.T&32&&(b=a.Z())?Vc(b):!1};s.mc=function(a,b){var c;if(a.T&32&&(c=a.Z())){if(!b&&a.o&32){try{c.blur()}catch(d){}a.o&32&&a.Gb(n)}if(Vc(c)!=b)b?c.tabIndex=0:(c.tabIndex=-1,c.removeAttribute("tabIndex"))}};
s.setVisible=function(a,b){De(a,b)};s.Fa=function(a,b,c){var d=a.c();if(d){var f=this.Id(b);f&&this.Gd(a,f,c);this.Ga(d,b,c)}};s.Ga=function(a,b,c){bg||(bg={1:"disabled",8:"selected",16:"checked",64:"expanded"});(b=bg[b])&&X(a,b,c)};s.setContent=function(a,b){var c=this.X(a);if(c&&(Oc(c),b))if(B(b))Sc(c,b);else{var d=function(a){if(a){var b=R(c);c.appendChild(B(a)?b.createTextNode(a):a)}};A(b)?M(b,d):ea(b)&&!("nodeType"in b)?M(xb(b),d):d(b)}};s.Z=function(a){return a.c()};s.r=q("goog-control");
s.fd=function(a){var b=this.r(),c=[b],d=this.r();d!=b&&c.push(d);b=a.o;for(d=[];b;){var f=b&-b;d.push(this.Id(f));b&=~f}c.push.apply(c,d);(a=a.ab)&&c.push.apply(c,a);H&&!K("7")&&c.push.apply(c,cg(c));return c};function cg(a,b){var c=[];b&&(a=a.concat([b]));M([],function(d){sb(d,na(ub,a))&&(!b||ub(d,b))&&c.push(d.join("_"))});return c}s.Id=function(a){this.le||eg(this);return this.le[a]};
s.xf=function(a){if(!this.Sh){this.le||eg(this);var b=this.le,c={},d;for(d in b)c[b[d]]=d;this.Sh=c}a=parseInt(this.Sh[a],10);return isNaN(a)?0:a};function eg(a){var b=a.r();a.le={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};function fg(a,b){a||e(Error("Invalid class name "+a));ga(b)||e(Error("Invalid decorator function "+b));gg[a]=b}var hg={},gg={};function Y(a,b,c){Of.call(this,c);if(!b){for(var b=this.constructor,d;b;){d=ia(b);if(d=hg[d])break;b=b.b?b.b.constructor:n}b=d?ga(d.Ca)?d.Ca():new d:n}this.k=b;this.Zc=a}E(Y,Of);s=Y.prototype;s.Zc=n;s.o=0;s.T=39;s.ef=255;s.Ue=0;s.U=!0;s.ab=n;s.Cf=!0;s.ke=!1;s.Oe=n;function ig(a,b){a.I&&b!=a.Cf&&jg(a,b);a.Cf=b}s.Z=function(){return this.k.Z(this)};s.ue=function(){return this.L||(this.L=new yf)};function kg(a,b){if(b)a.ab?ub(a.ab,b)||a.ab.push(b):a.ab=[b],a.k.Gd(a,b,!0)}
s.Gd=function(a,b){if(b)kg(this,a);else if(a&&this.ab){vb(this.ab,a);if(this.ab.length==0)this.ab=n;this.k.Gd(this,a,!1)}};s.t=function(){var a=this.k.t(this);this.f=a;var b=this.Oe||this.k.rb();b&&ef(a,b);this.ke||this.k.Xd(a,!1);this.$()||this.k.setVisible(a,!1)};s.X=function(){return this.k.X(this.c())};s.Ya=function(a){return this.k.Ya(a)};s.pb=function(a){this.f=a=this.k.ha(this,a);var b=this.Oe||this.k.rb();b&&ef(a,b);this.ke||this.k.Xd(a,!1);this.U=a.style.display!="none"};
s.da=function(){Y.b.da.call(this);this.k.nd(this);if(this.T&-2&&(this.Cf&&jg(this,!0),this.T&32)){var a=this.Z();if(a){var b=this.ue();b.Dd(a);this.sa().h(b,"key",this.bb).h(a,"focus",this.Dc).h(a,"blur",this.Gb)}}};function jg(a,b){var c=a.sa(),d=a.c();b?(c.h(d,"mouseover",a.Ef).h(d,"mousedown",a.Ec).h(d,"mouseup",a.Fc).h(d,"mouseout",a.Df),H&&c.h(d,"dblclick",a.Yg)):(c.ca(d,"mouseover",a.Ef).ca(d,"mousedown",a.Ec).ca(d,"mouseup",a.Fc).ca(d,"mouseout",a.Df),H&&c.ca(d,"dblclick",a.Yg))}
s.Pa=function(){Y.b.Pa.call(this);this.L&&this.L.detach();this.$()&&this.isEnabled()&&this.k.mc(this,!1)};s.i=function(){Y.b.i.call(this);this.L&&(this.L.j(),delete this.L);delete this.k;this.ab=this.Zc=n};s.getContent=p("Zc");s.setContent=function(a){this.k.setContent(this.c(),a);this.Zc=a};function dg(a,b){a.Zc=b}
s.ed=function(){var a=this.getContent();if(!a)return"";if(!B(a))if(A(a))a=rb(a,Wc).join("");else{if(Fc&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];Xc(a,b,!0);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");Fc||(a=a.replace(/ +/g," "));a!=" "&&(a=a.replace(/^\s*/,""))}return pa(a)};s.xd=function(a){Y.b.xd.call(this,a);var b=this.c();b&&this.k.xd(b,a)};s.Xd=function(a){this.ke=a;var b=this.c();b&&this.k.Xd(b,a)};s.$=p("U");
s.setVisible=function(a,b){if(b||this.U!=a&&this.dispatchEvent(a?"show":"hide")){var c=this.c();c&&this.k.setVisible(c,a);this.isEnabled()&&this.k.mc(this,a);this.U=a;return!0}return!1};s.isEnabled=function(){return!(this.o&1)};s.lc=function(a){var b=this.getParent();if((!b||typeof b.isEnabled!="function"||b.isEnabled())&&lg(this,1,!a))a||(this.setActive(!1),this.vb(!1)),this.$()&&this.k.mc(this,a),this.Fa(1,!a)};s.vb=function(a){lg(this,2,a)&&this.Fa(2,a)};
s.setActive=function(a){lg(this,4,a)&&this.Fa(4,a)};s.kg=function(a){lg(this,8,a)&&this.Fa(8,a)};s.Qa=function(){return!!(this.o&64)};s.S=function(a){lg(this,64,a)&&this.Fa(64,a)};s.Fa=function(a,b){if(this.T&a&&b!=!!(this.o&a))this.k.Fa(this,a,b),this.o=b?this.o|a:this.o&~a};function mg(a,b,c){a.I&&a.o&b&&!c&&e(Error("Component already rendered"));!c&&a.o&b&&a.Fa(b,!1);a.T=c?a.T|b:a.T&~b}function ng(a,b){return!!(a.ef&b)&&!!(a.T&b)}
function lg(a,b,c){return!!(a.T&b)&&!!(a.o&b)!=c&&(!(a.Ue&b)||a.dispatchEvent(Qf(b,c)))&&!a.pe}s.Ef=function(a){(!a.relatedTarget||!Rc(this.c(),a.relatedTarget))&&this.dispatchEvent("enter")&&this.isEnabled()&&ng(this,2)&&this.vb(!0)};s.Df=function(a){if((!a.relatedTarget||!Rc(this.c(),a.relatedTarget))&&this.dispatchEvent("leave"))ng(this,4)&&this.setActive(!1),ng(this,2)&&this.vb(!1)};
s.Ec=function(a){this.isEnabled()&&(ng(this,2)&&this.vb(!0),qd(a)&&(ng(this,4)&&this.setActive(!0),this.k.ac(this)&&this.Z().focus()));!this.ke&&qd(a)&&a.preventDefault()};s.Fc=function(a){this.isEnabled()&&(ng(this,2)&&this.vb(!0),this.o&4&&this.rd(a)&&ng(this,4)&&this.setActive(!1))};s.Yg=function(a){this.isEnabled()&&this.rd(a)};
s.rd=function(a){if(ng(this,16)){var b=!(this.o&16);lg(this,16,b)&&this.Fa(16,b)}ng(this,8)&&this.kg(!0);ng(this,64)&&this.S(!this.Qa());b=new kd("action",this);if(a)for(var c=["altKey","ctrlKey","metaKey","shiftKey","platformModifierKey"],d,f=0;d=c[f];f++)b[d]=a[d];return this.dispatchEvent(b)};s.Dc=function(){ng(this,32)&&lg(this,32,!0)&&this.Fa(32,!0)};s.Gb=function(){ng(this,4)&&this.setActive(!1);ng(this,32)&&lg(this,32,!1)&&this.Fa(32,!1)};
s.bb=function(a){return this.$()&&this.isEnabled()&&this.ld(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};s.ld=function(a){return a.keyCode==13&&this.rd(a)};ga(Y)||e(Error("Invalid component class "+Y));ga(ag)||e(Error("Invalid renderer class "+ag));var og=ia(Y);hg[og]=ag;fg("goog-control",function(){return new Y(n)});function pg(){}E(pg,ag);ca(pg);s=pg.prototype;s.rb=q("button");s.Ga=function(a,b,c){b==16?X(a,"pressed",c):pg.b.Ga.call(this,a,b,c)};s.t=function(a){var b=pg.b.t.call(this,a),c=a.Kd();c&&this.mg(b,c);(c=a.p())&&this.W(b,c);a.T&16&&this.Ga(b,16,!!(a.o&16));return b};s.ha=function(a,b){var b=pg.b.ha.call(this,a,b),c=this.p(b);a.kb=c;a.ug=this.Kd(b);a.T&16&&this.Ga(b,16,!!(a.o&16));return b};s.p=v;s.W=v;s.Kd=function(a){return a.title};s.mg=function(a,b){if(a)a.title=b||""};s.r=q("goog-button");function qg(){}E(qg,pg);ca(qg);s=qg.prototype;s.rb=aa();s.t=function(a){ig(a,!1);a.ef&=-256;mg(a,32,!1);return a.Y().t("button",{"class":this.fd(a).join(" "),disabled:!a.isEnabled(),title:a.Kd()||"",value:a.p()||""},a.ed()||"")};s.Ya=function(a){return a.tagName=="BUTTON"||a.tagName=="INPUT"&&(a.type=="button"||a.type=="submit"||a.type=="reset")};s.ha=function(a,b){ig(a,!1);a.ef&=-256;mg(a,32,!1);b.disabled&&P(b,this.Id(1));return qg.b.ha.call(this,a,b)};s.nd=function(a){a.sa().h(a.c(),"click",a.rd)};
s.Xd=v;s.xd=v;s.ac=function(a){return a.isEnabled()};s.mc=v;s.Fa=function(a,b,c){qg.b.Fa.call(this,a,b,c);if((a=a.c())&&b==1)a.disabled=c};s.p=function(a){return a.value};s.W=function(a,b){if(a)a.value=b};s.Ga=v;function rg(a,b,c){Y.call(this,a,b||qg.Ca(),c)}E(rg,Y);s=rg.prototype;s.p=p("kb");s.W=function(a){this.kb=a;this.k.W(this.c(),a)};s.Kd=p("ug");s.mg=function(a){this.ug=a;this.k.mg(this.c(),a)};s.i=function(){rg.b.i.call(this);delete this.kb;delete this.ug};s.da=function(){rg.b.da.call(this);if(this.T&32){var a=this.Z();a&&this.sa().h(a,"keyup",this.ld)}};s.ld=function(a){return a.keyCode==13&&a.type=="key"||a.keyCode==32&&a.type=="keyup"?this.rd(a):a.keyCode==32};fg("goog-button",function(){return new rg(n)});function sg(){}E(sg,pg);ca(sg);s=sg.prototype;s.t=function(a){var b={"class":"goog-inline-block "+this.fd(a).join(" "),title:a.Kd()||""},b=a.Y().t("div",b,this.me(a.getContent(),a.Y()));this.Qe(a,b);return b};s.rb=q("button");s.Qe=function(a,b){a.isEnabled()||this.Ga(b,1,!0);a.o&8&&this.Ga(b,8,!0);a.T&16&&this.Ga(b,16,!0);a.Qa()&&this.Ga(b,64,!0)};s.X=function(a){return a&&a.firstChild.firstChild};
s.me=function(a,b){return b.t("div","goog-inline-block "+(this.r()+"-outer-box"),b.t("div","goog-inline-block "+(this.r()+"-inner-box"),a))};s.Ya=function(a){return a.tagName=="DIV"};s.ha=function(a,b){tg(b,!0);tg(b,!1);var c;a:{if((c=a.Y().Rg(b))&&c.className.indexOf(this.r()+"-outer-box")!=-1)if((c=a.Y().Rg(c))&&c.className.indexOf(this.r()+"-inner-box")!=-1){c=!0;break a}c=!1}c||b.appendChild(this.me(b.childNodes,a.Y()));P(b,"goog-inline-block",this.r());return sg.b.ha.call(this,a,b)};s.r=q("goog-custom-button");
function tg(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(c.nodeType==3){var f=c.nodeValue;if(qa(f)=="")a.removeChild(c);else{c.nodeValue=b?f.replace(/^[\s\xa0]+/,""):f.replace(/[\s\xa0]+$/,"");break}}else break;c=d}};function ug(a,b,c){rg.call(this,a,b||sg.Ca(),c)}E(ug,rg);fg("goog-custom-button",function(){return new ug(n)});function Z(a,b){if(a instanceof Z)this.B=a.ce();else{var c;if(c=ea(a))a:{for(var d=c=0;d<a.length;d++){if(!ea(a[d])||c>0&&a[d].length!=c){c=!1;break a}for(var f=0;f<a[d].length;f++)if(!fa(a[d][f])){c=!1;break a}if(c==0)c=a[d].length}c=c!=0}c?this.B=xb(a):a instanceof Cc?this.B=vg(a.height,a.width):fa(a)&&fa(b)&&a>0&&b>0?this.B=vg(a,b):e(Error("Invalid argument(s) for Matrix contructor"))}this.m=new Cc(this.B[0].length,this.B.length)}
function wg(a){for(var b=[],c=0;c<a;c++){b[c]=[];for(var d=0;d<a;d++)b[c][d]=c==d?1:0}return new Z(b)}function xg(a,b,c){for(var d=0;d<a.Eb().height;d++)for(var f=0;f<a.Eb().width;f++)b.call(c,a.B[d][f],d,f,a)}function yg(a,b){var c=new Z(a.Eb());xg(a,function(d,f,g){c.B[f][g]=b.call(i,d,f,g,a)});return c}function vg(a,b){for(var c=[],d=0;d<a;d++){c[d]=[];for(var f=0;f<b;f++)c[d][f]=0}return c}s=Z.prototype;
s.add=function(a){Dc(this.m,a.Eb())||e(Error("Matrix summation is only supported on arrays of equal size"));return yg(this,function(b,c,d){return b+a.B[c][d]})};function zg(a,b){a.m.height!=b.Eb().height&&e(Error("The given matrix has height "+b.m.height+", but  needs to have height "+a.m.height+"."));var c=new Z(a.m.height,a.m.width+b.m.width);xg(a,function(a,b,g){c.B[b][g]=a});xg(b,function(a,b,g){c.B[b][this.m.width+g]=a},a);return c}
s.equals=function(a,b){if(this.m.width!=a.m.width)return!1;if(this.m.height!=a.m.height)return!1;for(var c=b||0,d=0;d<this.m.height;d++)for(var f=0;f<this.m.width;f++)if(!(Math.abs(this.B[d][f]-a.B[d][f])<=(c||1.0E-6)))return!1;return!0};s.Eb=p("m");function Ag(a){var b=new Z(a.m.width,a.m.height);xg(a,function(a,d,f){b.B[f][d]=a});return b}function Bg(a,b,c){return!(b>=0&&b<a.m.height&&c>=0&&c<a.m.width)?n:a.B[b][c]}
function Cg(a,b,c,d){b>=0&&b<a.m.height&&c>=0&&c<a.m.width||e(Error("Index out of bounds when setting matrix value, ("+b+","+c+") in size ("+a.m.height+","+a.m.width+")"));a.B[b][c]=d}s.multiply=function(a){if(a instanceof Z)return this.m.width!=a.Eb().height&&e(Error("Invalid matrices for multiplication. Second matrix should have the same number of rows as the first has columns.")),Dg(this,a);else if(fa(a))return Eg(this,a);else e(Error("A matrix can only be multiplied by a number or another matrix."))};
s.rg=function(a){Dc(this.m,a.Eb())||e(Error("Matrix subtraction is only supported on arrays of equal size."));return yg(this,function(b,c,d){return b-a.B[c][d]})};s.ce=p("B");function Fg(a,b,c,d){var f=new Z((c?c:a.m.height-1)-0+1,(d?d:a.m.width-1)-b+1);xg(f,function(a,c,d){f.B[c][d]=this.B[0+c][b+d]},a);return f}function Dg(a,b){var c=new Z(a.m.height,b.Eb().width);xg(c,function(a,f,g){for(var h=a=0;h<this.m.width;h++)a+=Bg(this,f,h)*Bg(b,h,g);Cg(c,f,g,a)},a);return c}
function Eg(a,b){return yg(a,function(a){return a*b})};function Gg(){this.ua=wg(4)}Gg.prototype.translate=function(a,b,c){this.ua=this.ua.multiply(new Z([[1,0,0,a],[0,1,0,b],[0,0,1,c],[0,0,0,1]]))};Gg.prototype.scale=function(a,b,c){this.ua=this.ua.multiply(new Z([[a,0,0,0],[0,b,0,0],[0,0,c,0],[0,0,0,1]]))};function Hg(a,b){var c=Math.cos(b),d=Math.sin(b);a.ua=a.ua.multiply(new Z([[1,0,0,0],[0,c,-d,0],[0,d,c,0],[0,0,0,1]]))}function Ig(a,b){var c=Math.cos(b),d=Math.sin(b);a.ua=a.ua.multiply(new Z([[c,-d,0,0],[d,c,0,0],[0,0,1,0],[0,0,0,1]]))};function Jg(a,b,c){function d(a,b){try{var c=a.getContext(b);if(z(c))return c}catch(d){}return n}for(var f=n,g=["webgl","experimental-webgl"],h=0;y(f)&&h<g.length;++h)f=f||d(a,g[h]);y(f)&&(x(c)?c():e(Error("unable to get a valid WebGL context")));f.enable(f.CULL_FACE);f.cullFace(f.BACK);f.clearColor(0,0,0,0);f.clearDepth(1);f.enable(f.DEPTH_TEST);f.depthFunc(f.LEQUAL);f.blendFunc(f.SRC_ALPHA,f.ONE_MINUS_SRC_ALPHA);this.canvas=a;this.rf=b||n;this.g=f;this.nb=a.width;this.mb=a.height;f.viewport(0,0,
this.nb,this.mb);this.je=this.Ac=0;this.ie=1;this.Cd=this.nb/this.mb;this.Nc=wg(4);this.Ea=new Gg;this.Je=this.Ie=this.Nc;this.sf=this.se=this.Mf=this.Eg=this.qf=0;T(u,"resize",this.Pe,!1,this)}function Kg(a){a.Ac=O(50);a.je=1.0E-6;a.ie=5;a.Cd=a.nb/a.mb;Lg(a)}function Lg(a){var b=1/Math.tan(a.Ac/2);a.Nc=new Z([[b/a.Cd,0,0,0],[0,b,0,0],[0,0,0,0],[0,0,-1,0]]);Mg(a)}function Mg(a){var b=a.je-a.ie;Cg(a.Nc,2,2,(a.ie+a.je)/b);Cg(a.Nc,2,3,2*a.ie*a.je/b)}
Jg.prototype.Pe=function(){this.nb=this.canvas.width=this.canvas.clientWidth;this.mb=this.canvas.height=this.canvas.clientHeight;this.g.viewport(0,0,this.nb,this.mb);this.Cd=this.nb/this.mb;Lg(this);Ng(this.n)};Jg.prototype.n=n;
function Og(a){a.Ie=a.Nc.multiply(a.Ea.ua);var b,c=a.Ie;c.m.width!=c.m.height&&e(Error("An inverse can only be taken on a square matrix."));b=wg(c.m.height);a:{for(var c=zg(c,b),d=new Z(c),f=0,g=0;g<d.m.height;g++){if(f>=d.m.width)break;for(var h=g;d.B[h][f]==0;)if(h++,h==d.m.height&&(h=g,f++,f==d.m.width)){c=d;break a}var j=c,k=g,l=j.B[h];j.B[h]=j.B[k];j.B[k]=l;h=d.B[g][f];for(j=f;j<d.m.width;j++)d.B[g][j]/=h;for(h=0;h<d.m.height;h++)if(h!=g){k=d.B[h][f];for(j=f;j<d.m.width;j++)d.B[h][j]-=k*d.B[g][j]}f++}c=
d}b=!Fg(c,0,b.m.width-1,b.m.height-1).equals(b)?n:Fg(c,b.m.width);a.Je=b;return a.Ie}Jg.prototype.Vf=v;Jg.prototype.Sd="";function Pg(a,b,c){c=a.g.createShader(c);a.g.shaderSource(c,b);a.g.compileShader(c);a.g.getShaderParameter(c,a.g.COMPILE_STATUS)?y(c)&&e(Error("Unknown")):e(Error("Shader err: "+a.g.getShaderInfoLog(c)));return c};var Qg={"earth-fs-overlay.glsl":"precision mediump float;uniform sampler2D uBufferL0A;uniform sampler2D uBufferL1A;uniform sampler2D uBufferL2A;uniform sampler2D uBufferLnA;varying float vFallbackA;varying vec2 vTCA;uniform sampler2D uBufferL0B;uniform sampler2D uBufferL1B;uniform sampler2D uBufferL2B;varying float vFallbackB;varying vec2 vTCB;uniform float uMixFactor;void main(){float fallbackA=floor(vFallbackA+0.5);vec4 colorA;if(fallbackA==0.0){colorA=texture2D(uBufferL0A,vTCA);}else if(fallbackA==1.0){colorA=texture2D(uBufferL1A,vTCA);}else if(fallbackA==2.0){colorA=texture2D(uBufferL2A,vTCA);}else if(fallbackA==-1.0){colorA=texture2D(uBufferLnA,vTCA);}else{discard;}float fallbackB=floor(vFallbackB+0.5);vec4 colorB=vec4(0.0);if(fallbackB==0.0){colorB=texture2D(uBufferL0B,vTCB);}else if(fallbackB==1.0){colorB=texture2D(uBufferL1B,vTCB);}else if(fallbackB==2.0){colorB=texture2D(uBufferL2B,vTCB);}gl_FragColor=mix(colorA,colorB,uMixFactor*colorB.a);}",
"earth-fs.glsl":"precision mediump float;uniform sampler2D uBufferL0A;uniform sampler2D uBufferL1A;uniform sampler2D uBufferL2A;uniform sampler2D uBufferLnA;varying float vFallbackA;varying vec2 vTCA;void main(){float fallback=floor(vFallbackA+0.5);if(fallback==0.0){gl_FragColor=texture2D(uBufferL0A,vTCA);}else if(fallback==1.0){gl_FragColor=texture2D(uBufferL1A,vTCA);}else if(fallback==2.0){gl_FragColor=texture2D(uBufferL2A,vTCA);}else if(fallback==-1.0){gl_FragColor=texture2D(uBufferLnA,vTCA);}else{discard;}}",
"earth-vs-overlay.glsl":"#define BUFF_SIDE 4.0\n#define BUFF_SIZE 16\n#define TERRAIN %TERRAIN_BOOL%\n#define BUFF_SIDE_T %BUFFER_SIDE_T_FLOAT%\n#define BUFF_SIZE_T int(BUFF_SIDE_T*BUFF_SIDE_T)\nprecision highp float;const float PI=3.1415927;const float PI2=6.2831855;const float EARTH_RADIUS=6378137.0;const float TERRAIN_MIN=-10000.0;const float TERRAIN_MAX=12000.0;attribute vec2 aVertexPosition;attribute vec2 aTextureCoord;uniform mat4 uMVPMatrix;uniform float uTileCount;uniform vec2 uOffset;uniform float uMetaL0A[BUFF_SIZE];uniform float uMetaL1A[BUFF_SIZE];uniform float uMetaL2A[BUFF_SIZE];uniform vec2 uOffLA[3];varying float vFallbackA;varying vec2 vTCA;uniform float uMetaL0B[BUFF_SIZE];uniform float uMetaL1B[BUFF_SIZE];uniform float uMetaL2B[BUFF_SIZE];uniform vec2 uOffLB[3];varying float vFallbackB;varying vec2 vTCB;\n#if TERRAIN\nuniform float uMetaL0T[BUFF_SIZE_T];uniform float uMetaL1T[BUFF_SIZE_T];uniform vec2 uOffLT[2];uniform sampler2D uBufferL0T;uniform sampler2D uBufferL1T;uniform sampler2D uBufferLnT;uniform float uDegradationT;bool validateOffsetT(vec2 off){return off.x>=0.0&&off.y>=0.0&&off.x<BUFF_SIDE_T&&off.y<BUFF_SIDE_T;}\n#endif\nbool validateOffset(vec2 off){return off.x>=0.0&&off.y>=0.0&&off.x<BUFF_SIDE&&off.y<BUFF_SIDE;}vec2 modFirst(vec2 x,float y){return vec2(x.x-y*floor(x.x/y),x.y);}void main(){vec2 phi=PI2*(aVertexPosition+uOffset)/uTileCount;vec2 tileCoords=vec2(mod(aVertexPosition.x-aTextureCoord.x+uOffset.x+uTileCount*0.5,uTileCount),-aTextureCoord.y-aVertexPosition.y-uOffset.y+uTileCount*0.5);float elev=0.0;\n#if TERRAIN\nvec2 TCT;float fallbackT=-1.0;float degradationModifier=exp2(uDegradationT);vec2 offT=modFirst(tileCoords/degradationModifier-uOffLT[0],uTileCount/degradationModifier);vec2 rawElev;if(validateOffsetT(offT)&&uMetaL0T[int(floor(offT.y)*BUFF_SIDE_T+offT.x)]==1.0){fallbackT=0.0;}else{offT=modFirst((tileCoords/(2.0*degradationModifier))-uOffLT[1],uTileCount/(2.0*degradationModifier));if(validateOffsetT(offT)&&uMetaL1T[int(floor(offT.y)*BUFF_SIDE_T+offT.x)]==1.0){fallbackT=1.0;}else{TCT=(tileCoords+aTextureCoord)/uTileCount;}}if(fallbackT>=0.0){TCT=(offT+aTextureCoord/(exp2(fallbackT)*degradationModifier)+mod(uOffLT[int(fallbackT)],BUFF_SIDE_T))/BUFF_SIDE_T;}TCT.y=1.0-TCT.y;if(fallbackT==0.0){rawElev=texture2D(uBufferL0T,TCT).rg;}else if(fallbackT==1.0){rawElev=texture2D(uBufferL1T,TCT).rg;}else{rawElev=texture2D(uBufferLnT,TCT).rg;}elev=((TERRAIN_MAX-TERRAIN_MIN)*(rawElev.r+rawElev.g/256.0)-TERRAIN_MAX)/EARTH_RADIUS;\n#endif\nfloat exp_2y=exp(2.0*phi.y);float tanh=((exp_2y-1.0)/(exp_2y+1.0));float cosy=sqrt(1.0-tanh*tanh);vec3 pos=vec3(sin(phi.x)*cosy,tanh,cos(phi.x)*cosy);gl_Position=uMVPMatrix*vec4(pos*(1.0+elev),1.0);if(abs(phi.y)>PI){vFallbackA=-1.0e3;return;}vFallbackA=-1.0;vec2 off=modFirst(tileCoords-uOffLA[0],uTileCount);if(validateOffset(off)&&uMetaL0A[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackA=0.0;}else{off=modFirst((tileCoords/2.0)-uOffLA[1],uTileCount/2.0);if(validateOffset(off)&&uMetaL1A[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackA=1.0;}else{off=modFirst((tileCoords/4.0)-uOffLA[2],uTileCount/4.0);if(validateOffset(off)&&uMetaL2A[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackA=2.0;}}}if(vFallbackA>=0.0){vTCA=(off+aTextureCoord/exp2(vFallbackA)+mod(uOffLA[int(vFallbackA)],BUFF_SIDE))/BUFF_SIDE;}else{vTCA=(tileCoords+aTextureCoord)/uTileCount;}vTCA.y=1.0-vTCA.y;vFallbackB=-1.0;off=modFirst(tileCoords-uOffLB[0],uTileCount);if(validateOffset(off)&&uMetaL0B[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackB=0.0;}else{off=modFirst((tileCoords/2.0)-uOffLB[1],uTileCount/2.0);if(validateOffset(off)&&uMetaL1B[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackB=1.0;}else{off=modFirst((tileCoords/4.0)-uOffLB[2],uTileCount/4.0);if(validateOffset(off)&&uMetaL2B[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackB=2.0;}}}if(vFallbackB>=0.0){vTCB=(off+aTextureCoord/exp2(vFallbackB)+mod(uOffLB[int(vFallbackB)],BUFF_SIDE))/BUFF_SIDE;}else{vTCB=(tileCoords+aTextureCoord)/uTileCount;}vTCB.y=1.0-vTCB.y;}",
"earth-vs.glsl":"#define BUFF_SIDE 8.0\n#define BUFF_SIZE 64\n#define TERRAIN %TERRAIN_BOOL%\n#define BUFF_SIDE_T %BUFFER_SIDE_T_FLOAT%\n#define BUFF_SIZE_T int(BUFF_SIDE_T*BUFF_SIDE_T)\nprecision highp float;const float PI=3.1415927;const float PI2=6.2831855;const float EARTH_RADIUS=6378137.0;const float TERRAIN_MIN=-10000.0;const float TERRAIN_MAX=12000.0;attribute vec2 aVertexPosition;attribute vec2 aTextureCoord;uniform mat4 uMVPMatrix;uniform float uTileCount;uniform vec2 uOffset;uniform float uMetaL0A[BUFF_SIZE];uniform float uMetaL1A[BUFF_SIZE];uniform float uMetaL2A[BUFF_SIZE];uniform vec2 uOffLA[3];varying float vFallbackA;varying vec2 vTCA;\n#if TERRAIN\nuniform float uMetaL0T[BUFF_SIZE_T];uniform float uMetaL1T[BUFF_SIZE_T];uniform vec2 uOffLT[2];uniform sampler2D uBufferL0T;uniform sampler2D uBufferL1T;uniform sampler2D uBufferLnT;uniform float uDegradationT;bool validateOffsetT(vec2 off){return off.x>=0.0&&off.y>=0.0&&off.x<BUFF_SIDE_T&&off.y<BUFF_SIDE_T;}\n#endif\nbool validateOffset(vec2 off){return off.x>=0.0&&off.y>=0.0&&off.x<BUFF_SIDE&&off.y<BUFF_SIDE;}vec2 modFirst(vec2 x,float y){return vec2(x.x-y*floor(x.x/y),x.y);}void main(){vec2 phi=PI2*(aVertexPosition+uOffset)/uTileCount;vec2 tileCoords=vec2(mod(aVertexPosition.x-aTextureCoord.x+uOffset.x+uTileCount*0.5,uTileCount),-aTextureCoord.y-aVertexPosition.y-uOffset.y+uTileCount*0.5);float elev=0.0;\n#if TERRAIN\nvec2 TCT;float fallbackT=-1.0;float degradationModifier=exp2(uDegradationT);vec2 offT=modFirst(tileCoords/degradationModifier-uOffLT[0],uTileCount/degradationModifier);vec2 rawElev;if(validateOffsetT(offT)&&uMetaL0T[int(floor(offT.y)*BUFF_SIDE_T+offT.x)]==1.0){fallbackT=0.0;}else{offT=modFirst((tileCoords/(2.0*degradationModifier))-uOffLT[1],uTileCount/(2.0*degradationModifier));if(validateOffsetT(offT)&&uMetaL1T[int(floor(offT.y)*BUFF_SIDE_T+offT.x)]==1.0){fallbackT=1.0;}else{TCT=(tileCoords+aTextureCoord)/uTileCount;}}if(fallbackT>=0.0){TCT=(offT+aTextureCoord/(exp2(fallbackT)*degradationModifier)+mod(uOffLT[int(fallbackT)],BUFF_SIDE_T))/BUFF_SIDE_T;}TCT.y=1.0-TCT.y;if(fallbackT==0.0){rawElev=texture2D(uBufferL0T,TCT).rg;}else if(fallbackT==1.0){rawElev=texture2D(uBufferL1T,TCT).rg;}else{rawElev=texture2D(uBufferLnT,TCT).rg;}elev=((TERRAIN_MAX-TERRAIN_MIN)*(rawElev.r+rawElev.g/256.0)-TERRAIN_MAX)/EARTH_RADIUS;\n#endif\nfloat exp_2y=exp(2.0*phi.y);float tanh=((exp_2y-1.0)/(exp_2y+1.0));float cosy=sqrt(1.0-tanh*tanh);vec3 pos=vec3(sin(phi.x)*cosy,tanh,cos(phi.x)*cosy);gl_Position=uMVPMatrix*vec4(pos*(1.0+elev),1.0);if(abs(phi.y)>PI){vFallbackA=-1.0e3;return;}vFallbackA=-1.0;vec2 off=modFirst(tileCoords-uOffLA[0],uTileCount);if(validateOffset(off)&&uMetaL0A[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackA=0.0;}else{off=modFirst((tileCoords/2.0)-uOffLA[1],uTileCount/2.0);if(validateOffset(off)&&uMetaL1A[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackA=1.0;}else{off=modFirst((tileCoords/4.0)-uOffLA[2],uTileCount/4.0);if(validateOffset(off)&&uMetaL2A[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackA=2.0;}}}if(vFallbackA>=0.0){vTCA=(off+aTextureCoord/exp2(vFallbackA)+mod(uOffLA[int(vFallbackA)],BUFF_SIDE))/BUFF_SIDE;}else{vTCA=(tileCoords+aTextureCoord)/uTileCount;}vTCA.y=1.0-vTCA.y;}",
"halo-fs.glsl":"precision lowp float;uniform sampler2D uGradient;varying vec2 vCoords;void main(){float distance=vCoords.x*vCoords.x+vCoords.y*vCoords.y;if(distance<0.98){discard;}else{gl_FragColor=texture2D(uGradient,vec2((sqrt(distance)-1.0)/0.1,0.5));}}","halo-vs.glsl":"precision lowp float;attribute vec2 aVertexPosition;uniform mat4 uMVMatrix;uniform mat4 uPMatrix;varying vec2 vCoords;void main(){gl_Position=uPMatrix*(uMVMatrix[3]+uMVMatrix[0]*aVertexPosition.x+uMVMatrix[1]*aVertexPosition.y);gl_Position.z=0.0;vCoords=aVertexPosition;}"};function Rg(a){return a in Qg?Qg[a]:Yb("../we/shaders/"+a)};function Sg(a){var c;this.a=a.a;c=this.g=a.a.g,a=c;this.Zh=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.Zh);a.bufferData(a.ARRAY_BUFFER,new Float32Array([1.1,1.1,-1.1,1.1,1.1,-1.1,-1.1,-1.1]),a.STATIC_DRAW);this.Ug=a.createTexture();var b=new Uint8Array([224,224,255,255,207,218,250,220,179,194,245,180,137,166,237,145,84,123,221,110,51,94,198,75,25,67,178,30,13,53,161,0]);a.bindTexture(a.TEXTURE_2D,this.Ug);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,8,1,0,a.RGBA,a.UNSIGNED_BYTE,b);a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);b=Rg("halo-fs.glsl");a=Rg("halo-vs.glsl");b=Pg(this.a,b,this.g.FRAGMENT_SHADER);a=Pg(this.a,a,this.g.VERTEX_SHADER);this.Ta=this.g.createProgram();y(this.Ta)&&e(Error("Unknown"));this.g.attachShader(this.Ta,a);this.g.attachShader(this.Ta,b);this.g.bindAttribLocation(this.Ta,0,"aVertexPosition");
this.g.linkProgram(this.Ta);this.g.getProgramParameter(this.Ta,this.g.LINK_STATUS)||e(Error("Shader program err: "+this.g.getProgramInfoLog(this.Ta)));this.he=this.g.getAttribLocation(this.Ta,"aVertexPosition");this.g.enableVertexAttribArray(this.he);this.yj=this.g.getUniformLocation(this.Ta,"uMVMatrix");this.Nj=this.g.getUniformLocation(this.Ta,"uPMatrix");this.Hi=this.g.getUniformLocation(this.Ta,"uGradient")}
Sg.prototype.draw=function(){this.g.useProgram(this.Ta);this.g.bindBuffer(this.g.ARRAY_BUFFER,this.Zh);this.g.vertexAttribPointer(this.he,2,this.g.FLOAT,!1,0,0);this.g.activeTexture(this.g.TEXTURE0);this.g.bindTexture(this.g.TEXTURE_2D,this.Ug);this.g.uniform1i(this.Hi,0);var a=new Float32Array(Db(Ag(this.a.Ea.ua).ce())),b=new Float32Array(Db(Ag(this.a.Nc).ce()));this.g.uniformMatrix4fv(this.yj,!1,a);this.g.uniformMatrix4fv(this.Nj,!1,b);this.g.drawArrays(this.g.TRIANGLE_STRIP,0,4)};function Tg(a){this.e=a;this.Hb=this.tb=0;this.ja=1E7;this.Jh=this.Nb=this.md=0}E(Tg,Vd);s=Tg.prototype;s.setPosition=function(a,b){this.tb=N(a,-1.57,1.57);this.Hb=Zb(b);this.dispatchEvent(new Ug(Vg))};function Wg(a,b,c){function d(a){var d=c;c=d*Math.cos(a)-2*b*Math.sin(a);b=d*Math.sin(a)/2+b*Math.cos(a)}d(a.Jh);b/=Math.max(Math.abs(Math.cos(a.Nb)),0.1);d(a.md);a.setPosition(a.tb+b,a.Hb+c)}s.getPosition=function(){return[this.tb,this.Hb]};
function Xg(a,b){a.ja=N(b,250,1E7);a.dispatchEvent(new Ug(Yg))}s.hd=function(){return Zg(this.e,this.e.a.nb/2,this.e.a.mb/2,!0)};s.setHeading=ba("md");s.setTilt=ba("Nb");s.getHeading=p("md");s.getTilt=p("Nb");var Vg="poschanged",Yg="altchanged";function Ug(a){kd.call(this,a)}E(Ug,kd);function $g(a,b,c,d,f){function g(a,b,c,d){a?a=b:(a=b/Math.max(1,Math.sqrt(c*c+d*d)),a=Math.max(1,Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))));return a}a=a.g;this.lb=[];this.$c=[];this.z=[];for(var h=-b/2;h<b/2;++h)for(var j=-c/2;j<c/2;++j){var k=g(f,d,h,j),l=[j+1<c/2&&g(f,d,h,j+1)>k,h+1<b/2&&g(f,d,h+1,j)>k,j-1>-c/2&&g(f,d,h,j-1)>k,h-1>-b/2&&g(f,d,h-1,j)>k];ah(this,h,j,k,l)}this.Ye=a.createBuffer();this.We=a.createBuffer();this.ih=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.Ye);a.bufferData(a.ARRAY_BUFFER,
new Float32Array(this.lb),a.STATIC_DRAW);this.Ye.If=2;a.bindBuffer(a.ARRAY_BUFFER,this.We);a.bufferData(a.ARRAY_BUFFER,new Float32Array(this.$c),a.STATIC_DRAW);this.We.If=2;a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.ih);a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.z),a.STATIC_DRAW);this.Cj=this.z.length}
function ah(a,b,c,d,f){for(var g=a.lb.length/2,h=0;h<=d;++h)for(var j=0;j<=d;++j)a.lb.push(b+j/d,c+h/d),a.$c.push(j/d,1-h/d);var k=[0,0,0,0];if(f[0]){k[0]=a.lb.length/2;for(j=0;j<d;++j)a.lb.push(b+(j+0.5)/d,c+1),a.$c.push((j+0.5)/d,0)}if(f[1]){k[1]=a.lb.length/2;for(h=0;h<d;++h)a.lb.push(b+1,c+(h+0.5)/d),a.$c.push(1,1-(h+0.5)/d)}if(f[2]){k[2]=a.lb.length/2;for(j=0;j<d;++j)a.lb.push(b+(j+0.5)/d,c),a.$c.push((j+0.5)/d,1)}if(f[3]){k[3]=a.lb.length/2;for(h=0;h<d;++h)a.lb.push(b,c+(h+0.5)/d),a.$c.push(0,
1-(h+0.5)/d)}b=C(aa(),a);c=d+1;for(h=0;h<d;++h)for(j=0;j<d;++j){var l=g+h*c+j;a.z.push(l);var o=h==0&&f[2],m=j==0&&f[3];o&&!m?(a.z.push(k[2]+j),a.z.push(l+c),b(),a.z.push(k[2]+j)):m&&!o?(a.z.push(l+1),a.z.push(k[3]+h),b(),a.z.push(k[3]+h)):m&&o&&(a.z.push(k[2]+j),a.z.push(k[3]+h),b(),a.z.push(k[3]+h),a.z.push(k[2]+j),a.z.push(l+c),b(),a.z.push(k[2]+j));a.z.push(l+1);a.z.push(l+c);b();a.z.push(l+c+1);o=h==d-1&&f[0];m=j==d-1&&f[1];o&&!m?(a.z.push(k[0]+j),a.z.push(l+1),b(),a.z.push(k[0]+j)):m&&!o?(a.z.push(l+
c),a.z.push(k[1]+h),b(),a.z.push(k[1]+h)):o&&m&&(a.z.push(k[0]+j),a.z.push(k[1]+h),b(),a.z.push(k[1]+h),a.z.push(k[0]+j),a.z.push(l+1),b(),a.z.push(k[0]+j));a.z.push(l+c);a.z.push(l+1);b()}};function bh(a,b,c,d){b=b.g;this.C=a;this.he=b.getAttribLocation(this.C,"aVertexPosition");b.enableVertexAttribArray(this.he);this.Th=b.getAttribLocation(this.C,"aTextureCoord");b.enableVertexAttribArray(this.Th);this.zj=$(b,this.C,"uMVPMatrix");this.ij=$(b,this.C,"uMetaL0A");this.lj=$(b,this.C,"uMetaL1A");this.oj=$(b,this.C,"uMetaL2A");this.$i=$(b,this.C,"uOffLA");this.ji=$(b,this.C,"uBufferL0A");this.mi=$(b,this.C,"uBufferL1A");this.pi=$(b,this.C,"uBufferL2A");this.ri=$(b,this.C,"uBufferLnA");if(c)this.jj=
$(b,this.C,"uMetaL0B"),this.mj=$(b,this.C,"uMetaL1B"),this.pj=$(b,this.C,"uMetaL2B"),this.aj=$(b,this.C,"uOffLB"),this.ki=$(b,this.C,"uBufferL0B"),this.ni=$(b,this.C,"uBufferL1B"),this.qi=$(b,this.C,"uBufferL2B"),this.sj=$(b,this.C,"uMixFactor");if(d)this.zi=$(b,this.C,"uDegradationT"),this.kj=$(b,this.C,"uMetaL0T"),this.nj=$(b,this.C,"uMetaL1T"),this.bj=$(b,this.C,"uOffLT"),this.li=$(b,this.C,"uBufferL0T"),this.oi=$(b,this.C,"uBufferL1T"),this.si=$(b,this.C,"uBufferLnT");this.ek=$(b,this.C,"uTileCount");
this.Dj=$(b,this.C,"uOffset")}function $(a,b,c){a=a.getUniformLocation(b,c);y(a)&&e(Error("Invalid name "+c));return a};function ch(a){this.Mb=new Kb;this.Jc=[];this.bk=512;this.Ig=new Ke(2E4);T(this.Ig,Me,this.ui,!1,this);this.Ig.start();dh(this,a)}function dh(a,b){a.Uh=D();a.Ma=b;Fb(a.Mb,function(a){a.j()});a.Mb.clear();a.Jc=[]}s=ch.prototype;s.Ma=n;s.Uh=0;s.dk=v;
s.ui=function(){var a=qb(this.Mb.Xb(),function(a){return a.state==20||a.state==Fa||a.state==-10});for(Bb(a,function(a,b){return a.hc-b.hc});this.Mb.tf()>this.bk&&a.length>0;){var b=a.shift();b.state==Fa&&vb(this.Jc,b);this.Mb.remove(b.zoom+"_"+b.x+"_"+b.y);b.j()}};s.fk=function(a){a.hc<this.Uh?(a.state=-10,this.Mb.remove(a.zoom+"_"+a.x+"_"+a.y),a.j()):this.dk(a)};
function eh(a){Bb(a.Jc,function(a,b){return a.hc-b.hc});for(var b=Math.min(a.Jc.length,5-a.Ma.dc),c=0;c<b;c++)Sb(a.Ma,a.Jc.pop(),C(a.fk,a))};function fh(a,b,c,d){this.ob=b;this.Rb=[];this.u=c;this.Ma=a;this.tg=new ch(a);this.ya=d;this.La=1<<this.ya;this.cd=this.u>=this.La;this.Jb=this.Lc=0;this.buffer=n;this.va=[];gh(this)}function gh(a){a.va=[];for(var b=0;b<a.u;++b)a.va.push(Array(a.u));a.buffer&&a.buffer.clear()}fh.prototype.disable=function(){this.Rb=[];gh(this);this.buffer=n};fh.prototype.Tb=function(a){this.Ma=a;dh(this.tg,a);this.Rb=[];gh(this)};
function hh(a){a.Rb=[];for(var b=C(function(a,b){var c=(this.cd?this.La:this.u)/2;a+=c;b+=c;this.va[b][a]!==1&&ih(this,this.Lc+a,this.Jb+b,d)},a),c=C(function(a,c){for(var d=-c;d<c;++d)b(d,-c),b(d,c-1);for(d=-c;d<c;++d)b(-c,d),b(c-1,d)},a),d=D(),a=Math.min(a.u,a.La)/2;a>0;--a)c(d+a,a)}
function ih(a,b,c,d){var b=Wb(b,a.La),c=Wb(c,a.La),f;a:{f=a.tg;var g=a.ya,h=b,j=c,c=g+"_"+h+"_"+j,b=f.Mb.get(c);if(z(b))b.state==-10?d-b.hc>7E3&&(b.j(),b=new Ea(g,h,j,d),f.Mb.set(c,b),f.Jc.push(b)):b.hc=d;else{d=b=new Ea(g,h,j,d);g=Pb(f.Ma,d.zoom);if(!(d.x>=g.left&&d.x<=g.right&&d.y>=g.top&&d.y<=g.bottom)){f=n;break a}f.Mb.set(c,b);f.Jc.push(b)}f=b}!y(f)&&f.state==20&&a.Rb.push(f)};function jh(a,b,c){var d;d=this.Fb=a.g,a=d;this.zd=b;this.Gc=c;this.Ua=a.createTexture();kh(this)}jh.prototype.Pe=function(a,b){if(!(this.zd==a&&this.Gc==b))this.zd=a,this.Gc=b,this.Fb.deleteTexture(this.Ua),this.Ua=this.Fb.createTexture(),kh(this)};
function kh(a){var b=a.Fb;b.bindTexture(b.TEXTURE_2D,a.Ua);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,1);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,a.zd,a.Gc,0,b.RGBA,b.UNSIGNED_BYTE,n);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR_MIPMAP_LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR_MIPMAP_LINEAR)}jh.prototype.clear=function(){this.Fb.deleteTexture(this.Ua);this.Ua=this.Fb.createTexture();kh(this)};function lh(a,b,c){function d(b){g.isTexture(h)&&(b.Pg>=3||Sb(a,b,f,d))}function f(c){if(g.isTexture(h)){g.bindTexture(g.TEXTURE_2D,h);try{g.texSubImage2D(g.TEXTURE_2D,0,c.x*k,(j-c.y-1)*k,g.RGBA,g.UNSIGNED_BYTE,c.Ed?n:c.Yb)}catch(l){a.hf()&&(a.jg(b.Sd)||!(c.Yb&&c.Yb.src.lastIndexOf(b.Sd,0)==0))?Sb(a,c,f,d):b.Vf()}}}var g=this.Fb=b.g,h=g.createTexture();this.Ua=h;var j=1<<c,k=a.jd();g.bindTexture(g.TEXTURE_2D,h);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,1);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,k*j,k*j,0,g.RGBA,
g.UNSIGNED_BYTE,n);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR);for(var l=0;l<j;++l)for(var o=0;o<j;++o)Sb(a,new Ea(c,l,o),f,d)}E(lh,F);lh.prototype.i=function(){this.Fb.deleteTexture(this.Ua)};function mh(a,b,c,d,f,g,h){this.ob=b;this.u=c;this.Sa=f;this.Ge=g;this.Ma=a;var j=a.jd();this.xb=[];for(var k=0;k<d;++k)this.xb.push(new jh(b,this.u*j,this.u*j));for(this.ea=[];f<=g;++f)this.ea.push(new fh(a,b,c,f));for(k=0;k<d;++k)this.ea[k].buffer=this.xb[k];this.Wa=0;this.Md=h?n:new lh(a,b,2)}mh.prototype.Tb=function(a){if(!y(this.Md))this.Md.j(),this.Md=new lh(a,this.ob,2);this.Ma=a;var b=this.u*a.jd();M(this.xb,function(a){a.Pe(b,b)});M(this.ea,function(b){b.Tb(a)});nh(this)};
function oh(a,b,c,d,f,g){for(var g=N(g,a.Sa,a.Ge),h=g-(a.Sa+a.Wa+a.xb.length-1);h>0;){var j=a.ea[a.Wa].buffer;a.ea[a.Wa].disable();a.ea[++a.Wa+a.xb.length-1].buffer=j;h--}for(;h<0&&a.Wa>0;)j=a.ea[a.Wa+a.xb.length-1].buffer,a.ea[a.Wa+a.xb.length-1].disable(),a.ea[--a.Wa].buffer=j,h++;for(var h=1<<g,k=!1,c=(c/(2*Math.PI)+0.5)*h,b=(0.5-Qb(b)/(Math.PI*2))*h,f=(f/(2*Math.PI)+0.5)*h,j=(0.5-Qb(d)/(Math.PI*2))*h,d=g-a.Sa;d>=a.Wa;d--){var l=N(c-a.u/2,f-a.u,f),o=N(b-a.u/2,j-a.u,j),m=Pb(a.Ma,a.Sa+d),l=N(l,m.left,
m.right+1-a.u),o=N(o,m.top,m.bottom+1-a.u),l=Wb(Math.round(l),h),o=Math.round(o),m=a.ea[d],t=o,o=!1;if(!m.cd){var r=l-m.Lc,W=t-m.Jb;Math.abs(r)>m.La/2&&(r=(r-(r==0?0:r<0?-1:1)*m.La)%m.La);m.Lc=l;m.Jb=t;if(Math.abs(r)>=m.u||Math.abs(W)>=m.u)gh(m),o=!0;else{o=r!=0||W!=0;if(r>0)for(l=0;l<m.u;++l)m.va[l].splice(0,r),m.va[l].push.apply(m.va[l],Array(r));if(r<0)for(l=0;l<m.u;++l)m.va[l].splice(m.u+r,-r),m.va[l].unshift.apply(m.va[l],Array(-r));if(W>0)for(l=0;l<W;++l)m.va.shift(),m.va.push(Array(m.u));if(W<
0)for(l=0;l<-W;++l)m.va.pop(),m.va.unshift(Array(m.u))}}hh(m);k|=o;c/=2;b/=2;f/=2;j/=2}k&&nh(a);f=1;for(d=a.Wa;f>0&&d<=g-a.Sa;d++){h=f;c=a.ea[d];b=0;if(c.Rb.length>0){f=Math.min(c.Rb.length,f>=0?1:0);for(j=0;j<f;j++){l=c;k=c.Rb.pop();if(!y(l.buffer)&&k.zoom==l.ya&&(m=k.x-l.Lc,o=k.y-l.Jb,r=1<<l.ya,m=Wb(m,r),o=Wb(o,r),!(m<0||m>=l.u||o<0||o>=l.u))){r=l.ob.g;t=l.Ma.jd();r.bindTexture(r.TEXTURE_2D,l.buffer.Ua);W=Wb(m+l.Lc,l.u)*t;t*=l.u-Wb(o+l.Jb,l.u)-1;try{r.texSubImage2D(r.TEXTURE_2D,0,W,t,r.RGBA,r.UNSIGNED_BYTE,
k.Ed?n:k.Yb),l.va[o][m]=1}catch(xd){l.Ma.hf()&&(l.Ma.jg(l.ob.Sd)||!(k.Yb&&k.Yb.src.lastIndexOf(l.ob.Sd,0)==0))?ih(l,k.x,k.y,k.hc):l.ob.Vf()}}b++}}eh(c.tg);b>0&&(c.ob.g.bindTexture(c.ob.g.TEXTURE_2D,c.buffer.Ua),c.ob.g.generateMipmap(c.ob.g.TEXTURE_2D));f=h-b}}function ph(a,b,c){return b>a.Ge||b-c<a.Sa?Array(a.u*a.u):Db(a.ea[b-a.Sa-c].va)}function qh(a,b,c){return b>a.Ge||b-c<a.Sa?n:a.ea[b-a.Sa-c].buffer.Ua}
function rh(a,b,c){if(b>a.Ge)return Array(2*c);for(var d=[],f=b-a.Sa;f>b-a.Sa-c;--f)d.push(Math.round(a.ea[Math.max(0,f)].Lc),Math.round(a.ea[Math.max(0,f)].Jb));return d}
function nh(a){for(var b=Array(a.xb.length),c=0;c<a.xb.length;c++){var d=a.ea[a.Wa+c],f=sh((0.5-d.Jb/d.La)*2*Math.PI),g=sh((0.5-(d.Jb+d.u)/d.La)*2*Math.PI);b[c]=new Ub(d.cd?0:sh((0.5-(d.Jb+d.u/2)/d.La)*2*Math.PI),d.cd?0:((d.Lc+d.u/2)/d.La-0.5)*2*Math.PI,d.cd?Math.PI/2:Math.abs(f-g),d.cd?Math.PI:d.u/d.La*2*Math.PI,d.ya)}a.Ma.Tj(b)};function th(a,b){this.a=a.a;this.n=a;this.Za=b||new Nf;this.Ha=new mh(this.Za,this.a,8,3,1,19);this.la=this.ad=n;this.Tc=!1;this.Tb(this.Za,!0);this.Uc=1;this.fc=[0,0];this.Lh=[new $g(this.a,1,1,1),new $g(this.a,4,4,16,!0),new $g(this.a,6,6,8,!0),new $g(this.a,8,8,8,!0),new $g(this.a,10,10,8),new $g(this.a,64,64,this.Tc?8:4)];this.cj=uh(this,!1);this.dj=uh(this,!0);this.ya=n;T(this.n.d,Yg,this.xg,!1,this)}s=th.prototype;
s.Tb=function(a,b,c){if(a)a.Jg=C(this.n.wg,this.n);if(c)if(this.ad=a)z(this.la)?this.la.Tb(a):(this.Ha=new mh(this.Za,this.a,4,3,1,19),this.la=new mh(this.ad,this.a,4,3,0,15));else{if(z(this.la))this.Ha=new mh(this.Za,this.a,8,3,1,19),this.la=n}else{if(!a)return;this.Ha.Tb(a);this.Za=a}b!==!0&&(Ng(this.n),this.n.wg(),this.setZoom(this.getZoom()))};function vh(a,b){return b?a.ad:a.Za}
s.draw=function(){var a=this.a.g;this.Uc=1<<this.getZoom();var b=this.n.d.getPosition(),c=this.n.d.hd()||b;this.fc[0]=Math.floor(b[1]/(2*Math.PI)*this.Uc);this.fc[1]=N(Math.floor(Qb(b[0])/(Math.PI*2)*this.Uc),-this.Uc/2,this.Uc/2);oh(this.Ha,c[0],c[1],b[0],b[1],Math.floor(this.getZoom()));this.la&&oh(this.la,c[0],c[1],b[0],b[1],Math.floor(this.getZoom()));this.Tc&&oh(this.Ub,c[0],c[1],b[0],b[1],Math.floor(this.getZoom())-5);c=Math.floor(this.getZoom());this.Uc=1<<c;b=this.la?this.dj:this.cj;a.useProgram(b.C);
a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,qh(this.Ha,c,0));a.uniform1i(b.ji,0);a.activeTexture(a.TEXTURE1);a.bindTexture(a.TEXTURE_2D,qh(this.Ha,c,1));a.uniform1i(b.mi,1);a.activeTexture(a.TEXTURE2);a.bindTexture(a.TEXTURE_2D,qh(this.Ha,c,2));a.uniform1i(b.pi,2);a.activeTexture(a.TEXTURE3);a.bindTexture(a.TEXTURE_2D,this.Ha.Md.Ua);a.uniform1i(b.ri,3);a.uniform1fv(b.ij,new Float32Array(ph(this.Ha,c,0)));a.uniform1fv(b.lj,new Float32Array(ph(this.Ha,c,1)));a.uniform1fv(b.oj,new Float32Array(ph(this.Ha,
c,2)));a.uniform2fv(b.$i,new Float32Array(rh(this.Ha,c,3)));this.la&&(a.activeTexture(a.TEXTURE4),a.bindTexture(a.TEXTURE_2D,qh(this.la,c,0)),a.uniform1i(b.ki,4),a.activeTexture(a.TEXTURE5),a.bindTexture(a.TEXTURE_2D,qh(this.la,c,1)),a.uniform1i(b.ni,5),a.activeTexture(a.TEXTURE6),a.bindTexture(a.TEXTURE_2D,qh(this.la,c,2)),a.uniform1i(b.qi,6),a.uniform1fv(b.jj,new Float32Array(ph(this.la,c,0))),a.uniform1fv(b.mj,new Float32Array(ph(this.la,c,1))),a.uniform1fv(b.pj,new Float32Array(ph(this.la,c,2))),
a.uniform2fv(b.aj,new Float32Array(rh(this.la,c,3))),a.uniform1f(b.sj,this.ad.opacity));if(this.Tc){var d=N(c-5,2,this.Ve.Db());a.uniform1f(b.zi,c-d);a.activeTexture(a.TEXTURE7);a.bindTexture(a.TEXTURE_2D,qh(this.Ub,d,0));a.uniform1i(b.li,7);a.activeTexture(a.TEXTURE8);a.bindTexture(a.TEXTURE_2D,qh(this.Ub,d,1));a.uniform1i(b.oi,8);a.activeTexture(a.TEXTURE9);a.bindTexture(a.TEXTURE_2D,this.Ub.Md.Ua);a.uniform1i(b.si,9);a.uniform1fv(b.kj,new Float32Array(ph(this.Ub,d,0)));a.uniform1fv(b.nj,new Float32Array(ph(this.Ub,
d,1)));a.uniform2fv(b.bj,new Float32Array(rh(this.Ub,d,2)))}d=new Float32Array(Db(Ag(Og(this.a)).ce()));c=this.Lh[Math.min(c,this.Lh.length-1)];a.bindBuffer(a.ARRAY_BUFFER,c.Ye);a.vertexAttribPointer(b.he,c.Ye.If,a.FLOAT,!1,0,0);a.bindBuffer(a.ARRAY_BUFFER,c.We);a.vertexAttribPointer(b.Th,c.We.If,a.FLOAT,!1,0,0);a.uniformMatrix4fv(b.zj,!1,d);a.uniform1f(b.ek,this.Uc);a.uniform2fv(b.Dj,new Float32Array(this.fc));a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,c.ih);a.drawElements(a.TRIANGLES,c.Cj,a.UNSIGNED_SHORT,
0)};
function uh(a,b){var c=a.a.g,d=Rg("earth-fs"+(b?"-overlay":"")+".glsl"),f=Rg("earth-vs"+(b?"-overlay":"")+".glsl"),f=f.replace("%TERRAIN_BOOL%",a.Tc?"1":"0");a.Tc&&(f=f.replace("%BUFFER_SIDE_T_FLOAT%",a.Ub.u.toFixed(1)));var d=Pg(a.a,d,c.FRAGMENT_SHADER),f=Pg(a.a,f,c.VERTEX_SHADER),g=c.createProgram();y(g)&&e(Error("Unknown"));c.attachShader(g,f);c.attachShader(g,d);c.bindAttribLocation(g,0,"aVertexPosition");c.linkProgram(g);c.getProgramParameter(g,c.LINK_STATUS)||e(Error("Shader program err: "+c.getProgramInfoLog(g)));
return new bh(g,a.a,b,a.Tc)}s.setZoom=function(a){this.ya=N(a,this.Za.gd(),this.Za.Db());Xg(this.n.d,wh(this,this.ya,this.n.d.tb))};s.xg=function(){this.ya=n};s.getZoom=function(){y(this.ya)&&xh(this);return this.ya};function xh(a,b){var c=a.n.d,d=2*(c.ja/6378137)*Math.tan(a.a.Ac/2)/a.n.$d,c=Math.log(Math.cos(Math.abs(c.tb))*2*Math.PI/d)/Math.LN2;return b?c:(a.ya=N(c,a.Za.gd(),a.Za.Db()),a.ya)}
function wh(a,b,c){b=Math.cos(Math.abs(c))*2*Math.PI/Math.pow(2,b)*a.n.$d;return 1/Math.tan(a.a.Ac/2)*(b/2)*6378137}function yh(a,b,c,d){var f=Math.sin((c-a)/2),b=Math.sin((d-b)/2);return 6378137*2*Math.asin(Math.sqrt(f*f+Math.cos(a)*Math.cos(c)*b*b))};function zh(a,b,c){this.x=x(a)?a:0;this.y=x(b)?b:0;this.H=x(c)?c:0}zh.prototype.ma=function(){return new zh(this.x,this.y,this.H)};zh.prototype.ce=function(){return[this.x,this.y,this.H]};function Ah(a,b,c){this.x=a;this.y=b;this.H=c}E(Ah,zh);s=Ah.prototype;s.ma=function(){return new Ah(this.x,this.y,this.H)};s.scale=function(a){this.x*=a;this.y*=a;this.H*=a;return this};s.normalize=function(){return this.scale(1/Math.sqrt(this.x*this.x+this.y*this.y+this.H*this.H))};s.add=function(a){this.x+=a.x;this.y+=a.y;this.H+=a.H;return this};s.rg=function(a){this.x-=a.x;this.y-=a.y;this.H-=a.H;return this};s.equals=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y&&this.H==a.H};function Bh(a,b,c,d,f,g){if(y(d))return n;a=d.multiply(new Z([[a/f*2-1],[1-2*b/g],[c*2-1],[1]]));if(Bg(a,3,0)==0)return n;a=a.multiply(1/Bg(a,3,0));return new Ah(Bg(a,0,0),Bg(a,1,0),Bg(a,2,0))};function Ch(a,b,c,d,f,g,h){this.a=a;this.jh=b||n;this.qc=c||document.createElement("div");if(!x(c))a=this.a.canvas,a.parentNode&&a.parentNode.insertBefore(this.qc,a.nextSibling);this.de=d||document.createElement("img");if(!x(d))d=this.qc,d.parentNode&&d.parentNode.insertBefore(this.de,d.nextSibling);this.ei=g||n;this.d=new Tg(this);this.F=new th(this,f);this.Vg=h===!0?n:new Sg(this);this.$d=0;Ng(this);this.wg()}
Ch.prototype.wg=function(){y(this.qc)||(Oc(this.qc),cc(this.qc,this.ei),vh(this.F).Yc(this.qc),vh(this.F,!0)&&(cc(this.qc,S("br"),S("strong",{},"Overlay data:"),S("br")),vh(this.F,!0).Yc(this.qc)));if(!y(this.de))y(vh(this.F).vf())?this.de.style.visibility="hidden":(this.de.src=vh(this.F).vf(),this.de.style.visibility="visible")};function Dh(a){return Math.max(3,vh(a.F).gd())}function Ng(a){a.$d=0.7*a.a.canvas.height/vh(a.F).jd()}
Ch.prototype.draw=function(){var a=this.a.g;if(!y(this.jh)){for(var b=this.jh,c=Xb(this.d.tb).toFixed(4)+"; "+Xb(this.d.Hb).toFixed(4)+" @ "+this.d.ja.toFixed(0)+"m -> z="+this.F.getZoom().toFixed(3)+"; ",d=this.F,f=d.Ha,g="",h=0;h<f.ea.length;++h)g+=h+f.Sa+":"+f.ea[h].Rb.length+" ";f="BufferQueue size: "+g+"; Loading tiles: "+d.Za.dc;d.ad&&(f+=" + "+d.ad.dc);b.innerHTML=c+f}b=this.d.ja/6378137;c=this.a;c.je=0.25*b;c.ie=1+b;Mg(c);if(this.Vg)a.enable(a.BLEND),a.disable(a.DEPTH_TEST),b=Math.sin((Math.PI-
this.a.Ac)/2),c=Math.sin(this.a.Ac/2),this.a.Ea.ua=wg(4),Hg(this.a.Ea,-this.d.getTilt()),this.a.Ea.translate(0,0,c-1-this.d.ja/6378137),this.a.Ea.scale(b,b,b),this.Vg.draw(),a.disable(a.BLEND),a.enable(a.DEPTH_TEST);this.a.Ea.ua=wg(4);Ig(this.a.Ea,-this.d.Jh);Hg(this.a.Ea,-this.d.getTilt());Ig(this.a.Ea,-this.d.getHeading());this.a.Ea.translate(0,0,-1-this.d.ja/6378137);Hg(this.a.Ea,this.d.tb);a=this.a.Ea;c=-this.d.Hb;b=Math.cos(c);c=Math.sin(c);a.ua=a.ua.multiply(new Z([[b,0,c,0],[0,1,0,0],[-c,0,
b,0],[0,0,0,1]]));this.F.draw()};function Eh(a,b){var c=a.ma();c.x=-c.x;c.y=-c.y;c.H=-c.H;var d=b.x*c.x+b.y*c.y+b.H*c.H,f=d*d-(c.x*c.x+c.y*c.y+c.H*c.H)+1;return f<0?n:(c=Math.min(d+Math.sqrt(f),d-Math.sqrt(f)),d=Math.max(d+Math.sqrt(f),d-Math.sqrt(f)),[c,d])}
function Zg(a,b,c,d){var f=Bh(b,c,0,a.a.Je,a.a.nb,a.a.mb),a=Bh(b,c,1,a.a.Je,a.a.nb,a.a.mb);if(y(f)||y(a))return n;a.rg(f);a.normalize();b=Eh(f,a);if(y(b))return n;a=a.scale(b[0]);f=new Ah(f.x+a.x,f.y+a.y,f.H+a.H);a=Math.asin(f.x/Math.sqrt(1-f.y*f.y));f.H<0&&(a=Math.PI-a);return d==!0?[Math.asin(f.y),Zb(a)]:[Xb(Math.asin(f.y)),Xb(Zb(a))]}function Qb(a){return Math.log(Math.tan(a/2+Math.PI/4))}function sh(a){return 2*Math.atan(Math.exp(a))-Math.PI/2};function Fh(a,b,c){this.target=a;this.handle=b||a;this.ph=c||new me(NaN,NaN,NaN,NaN);this.A=R(a);this.qb=new of(this);T(this.handle,["touchstart","mousedown"],this.Oh,!1,this)}E(Fh,Vd);var Gh=H||I&&K("1.9.3");s=Fh.prototype;s.clientX=0;s.clientY=0;s.screenX=0;s.screenY=0;s.Qh=0;s.Rh=0;s.dd=0;s.Wb=0;s.$a=!0;s.Oa=!1;s.gh=0;s.tj=0;s.Wi=!1;s.sa=p("qb");s.lc=ba("$a");
s.i=function(){Fh.b.i.call(this);Pd(this.handle,["touchstart","mousedown"],this.Oh,!1,this);this.qb.j();delete this.target;delete this.handle;delete this.qb};
s.Oh=function(a){var b=a.type=="mousedown";if(this.$a&&!this.Oa&&(!b||qd(a))){Hh(a);if(this.gh==0)if(Ih(this,a),this.Oa)a.preventDefault();else return;else a.preventDefault();var b=this.A,c=b.documentElement,d=!Gh;this.qb.h(b,["touchmove","mousemove"],this.Qi,d);this.qb.h(b,["touchend","mouseup"],this.qe,d);Gh?(c.setCapture(!1),this.qb.h(c,"losecapture",this.qe)):this.qb.h(b?b.parentWindow||b.defaultView:window,"blur",this.qe);H&&this.Wi&&this.qb.h(b,"dragstart",ld);this.Xj&&this.qb.h(this.Xj,"scroll",
this.Kj,d);this.clientX=this.Qh=a.clientX;this.clientY=this.Rh=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.dd=this.target.offsetLeft;this.Wb=this.target.offsetTop;this.bg=$c(Q(this.A));this.tj=D()}else this.dispatchEvent("earlycancel")};function Ih(a,b){if(a.dispatchEvent(new Jh("start",a,b.clientX,b.clientY,b))!==!1)a.Oa=!0}
s.qe=function(a,b){qf(this.qb);Gh&&this.A.releaseCapture();var c=Kh(this,this.dd),d=Lh(this,this.Wb);this.Oa?(Hh(a),this.Oa=!1,this.dispatchEvent(new Jh("end",this,a.clientX,a.clientY,a,c,d,b||a.type=="touchcancel"))):this.dispatchEvent("earlycancel");(a.type=="touchend"||a.type=="touchcancel")&&a.preventDefault()};
function Hh(a){var b=a.type;b=="touchstart"||b=="touchmove"?a.$b(a.ra.targetTouches[0],a.currentTarget):(b=="touchend"||b=="touchcancel")&&a.$b(a.ra.changedTouches[0],a.currentTarget)}
s.Qi=function(a){if(this.$a){Hh(a);var b=a.clientX-this.clientX,c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.Oa){var d=this.Qh-this.clientX,f=this.Rh-this.clientY;if(d*d+f*f>this.gh&&(Ih(this,a),!this.Oa)){this.qe(a);return}}c=Mh(this,b,c);b=c.x;c=c.y;this.Oa&&this.dispatchEvent(new Jh("beforedrag",this,a.clientX,a.clientY,a,b,c))!==!1&&(Nh(this,a,b,c),a.preventDefault())}};
function Mh(a,b,c){var d=$c(Q(a.A));b+=d.x-a.bg.x;c+=d.y-a.bg.y;a.bg=d;a.dd+=b;a.Wb+=c;b=Kh(a,a.dd);a=Lh(a,a.Wb);return new G(b,a)}s.Kj=function(a){var b=Mh(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;Nh(this,a,b.x,b.y)};function Nh(a,b,c,d){a.mf(c,d);a.dispatchEvent(new Jh("drag",a,b.clientX,b.clientY,b,c,d))}function Kh(a,b){var c=a.ph,d=!isNaN(c.left)?c.left:n,c=!isNaN(c.width)?c.width:0;return Math.min(d!=n?d+c:Infinity,Math.max(d!=n?d:-Infinity,b))}
function Lh(a,b){var c=a.ph,d=!isNaN(c.top)?c.top:n,c=!isNaN(c.height)?c.height:0;return Math.min(d!=n?d+c:Infinity,Math.max(d!=n?d:-Infinity,b))}s.mf=function(a,b){this.target.style.left=a+"px";this.target.style.top=b+"px"};function Jh(a,b,c,d,f,g,h,j){kd.call(this,a);this.clientX=c;this.clientY=d;this.ok=f;this.left=x(g)?g:b.dd;this.top=x(h)?h:b.Wb;this.Ng=b;this.rk=!!j}E(Jh,kd);function Oh(a){this.f=a;this.M=T(this.f,I?"DOMMouseScroll":"mousewheel",this)}E(Oh,Vd);
Oh.prototype.handleEvent=function(a){var b=0,c=0,d=0,a=a.ra;if(a.type=="mousewheel"){c=1;if(H||J&&(Oa||K("532.0")))c=40;d=J&&Na&&-a.wheelDelta%c!=0?-a.wheelDelta:-a.wheelDelta/c;x(a.wheelDeltaX)?(b=J&&Na&&-a.wheelDeltaX%c!=0?-a.wheelDeltaX:-a.wheelDeltaX/c,c=J&&Na&&-a.wheelDeltaY%c!=0?-a.wheelDeltaY:-a.wheelDeltaY/c):c=d}else d=a.detail,d>100?d=3:d<-100&&(d=-3),x(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;fa(this.th)&&(b=N(b,-this.th,this.th));fa(this.uh)&&(c=N(c,-this.uh,this.uh));b=new Ph(d,a,
b,c);try{this.dispatchEvent(b)}finally{b.j()}};Oh.prototype.i=function(){Oh.b.i.call(this);U(this.M);delete this.M};function Ph(a,b,c,d){b&&this.$b(b,i);this.type="mousewheel";this.detail=a;this.dd=c;this.Wb=d}E(Ph,nd);function Qh(){Ne.call(this,[0],[0],0);this.xa=[]}E(Qh,Ne);Qh.prototype.$f=function(){this.of(function(a){a.play(a.wa==0)});Qh.b.$f.call(this)};Qh.prototype.ag=function(){this.of(function(a){a.stop()});Qh.b.ag.call(this)};Qh.prototype.Wf=function(){this.Lg();Qh.b.Wf.call(this)};Qh.prototype.Lg=function(){M(this.xa,function(a){a.j()})};function Rh(){Qh.call(this)}E(Rh,Qh);Rh.prototype.Ka=function(){for(var a=0;a<this.xa.length;a++)this.xa[a].play();Rh.b.Ka.call(this)};
Rh.prototype.of=function(a){M(this.xa,a)};Rh.prototype.add=function(a){this.xa.push(a);this.duration=Math.max(this.duration,a.duration)};Rh.prototype.remove=function(a){if(vb(this.xa,a)&&a.duration==this.duration)this.duration=0,M(this.xa,function(a){this.duration=Math.max(a.duration,this.duration)},this)};function Sh(){Qh.call(this);this.jf=new of(this)}E(Sh,Qh);s=Sh.prototype;s.wc=0;s.Ka=function(){Uh(this);Sh.b.Ka.call(this)};s.gc=function(){Vh(this);Sh.b.gc.call(this)};
function Vh(a){a.wc=0;qf(a.jf)}function Uh(a){a.o==-1&&(Vh(a),M(a.xa,function(a){a.wa=0;Ue(a,a.wa);a.stop()}));a.xa[a.wc].play();a.wc++;a.wc<a.xa.length&&a.jf.h(a.xa[a.wc-1],"finish",function(){Uh(this)})}s.add=function(a){this.xa.push(a);this.duration+=a.duration};s.remove=function(a){vb(this.xa,a)&&(this.duration-=a.duration)};s.of=function(a){this.wc>0&&a(this.xa[this.wc-1])};s.Lg=function(){M(this.xa,function(a){a.j()});this.jf.j()};function Wh(){}E(Wh,Vd);s=Wh.prototype;s.kb=0;s.gb=0;s.Ra=100;s.Aa=0;s.pc=1;s.Da=!1;s.Kc=!1;s.W=function(a){a=Xh(this,a);if(this.kb!=a)this.kb=a+this.Aa>this.Ra?this.Ra-this.Aa:a<this.gb?this.gb:a,!this.Da&&!this.Kc&&this.dispatchEvent("change")};s.p=function(){return Xh(this,this.kb)};s.vd=function(a){a=Xh(this,a);if(this.Aa!=a)this.Aa=a<0?0:this.kb+a>this.Ra?this.Ra-this.kb:a,!this.Da&&!this.Kc&&this.dispatchEvent("change")};
s.Cb=function(){return this.pc==n?this.Aa:Math.round(this.Aa/this.pc)*this.pc};s.hg=function(a){if(this.gb!=a){var b=this.Da;this.Da=!0;this.gb=a;if(a+this.Aa>this.Ra)this.Aa=this.Ra-this.gb;a>this.kb&&this.W(a);if(a>this.Ra)this.Aa=0,this.Yd(a),this.W(a);this.Da=b;!this.Da&&!this.Kc&&this.dispatchEvent("change")}};s.oa=function(){return Xh(this,this.gb)};
s.Yd=function(a){a=Xh(this,a);if(this.Ra!=a){var b=this.Da;this.Da=!0;this.Ra=a;a<this.kb+this.Aa&&this.W(a-this.Aa);if(a<this.gb)this.Aa=0,this.hg(a),this.W(this.Ra);if(a<this.gb+this.Aa)this.Aa=this.Ra-this.gb;this.Da=b;!this.Da&&!this.Kc&&this.dispatchEvent("change")}};s.na=function(){return Xh(this,this.Ra)};s.lg=function(a){if(this.pc!=a)this.pc=a,a=this.Da,this.Da=!0,this.Yd(this.na()),this.vd(this.Cb()),this.W(this.p()),this.Da=a,!this.Da&&!this.Kc&&this.dispatchEvent("change")};
function Xh(a,b){return a.pc==n?b:a.gb+Math.round((b-a.gb)/a.pc)*a.pc};function Yh(a){Of.call(this,a);this.s=new Wh;T(this.s,"change",this.Si,!1,this)}E(Yh,Of);s=Yh.prototype;s.Q="horizontal";s.ze=!1;s.xj=!1;s.Qb=10;s.Pd=0;s.t=function(){Yh.b.t.call(this);this.pb(this.Y().t("div",this.r(this.Q)))};s.pb=function(a){Yh.b.pb.call(this,a);P(a,this.r(this.Q));var a=this.c(),b=ac(document,n,"goog-slider-thumb",a)[0];b||(b=this.Y().t("div","goog-slider-thumb"),ef(b,"button"),a.appendChild(b));this.K=this.za=b;ef(this.c(),"slider");Zh(this)};
s.da=function(){Yh.b.da.call(this);this.Ob=new Fh(this.K);this.zc=new Fh(this.za);this.Ob.mf=this.zc.mf=v;this.L=new yf(this.c());this.ec=new Oh(this.c());this.sa().h(this.Ob,"beforedrag",this.Wg).h(this.zc,"beforedrag",this.Wg).h(this.Ob,["start","end"],this.bh).h(this.zc,["start","end"],this.bh).h(this.L,"key",this.Af).h(this.c(),"mousedown",this.we).h(this.ec,"mousewheel",this.Pi);this.c().tabIndex=0;$h(this)};s.Pa=function(){Yh.b.Pa.call(this);Ca(this.Ob,this.zc,this.L,this.ec)};
s.Wg=function(a){var b=a.Ng==this.Ob?this.K:this.za,c;this.Q=="vertical"?(c=this.c().clientHeight-b.offsetHeight,c=(c-a.top)/c*(this.na()-this.oa())+this.oa()):c=a.left/(this.c().clientWidth-b.offsetWidth)*(this.na()-this.oa())+this.oa();c=a.Ng==this.Ob?Math.min(Math.max(c,this.oa()),this.p()+this.Cb()):Math.min(Math.max(c,this.p()),this.na());ai(this,b,c)};
s.bh=function(a){var b=a.type=="start",c=this.c();b?P(c,"goog-slider-dragging"):Bc(c,"goog-slider-dragging");a=a.target.handle;b?P(a,"goog-slider-thumb-dragging"):Bc(a,"goog-slider-thumb-dragging")};
s.Af=function(a){var b=!0;switch(a.keyCode){case 36:bi(this,this.oa());break;case 35:bi(this,this.na());break;case 33:ci(this,this.Qb);break;case 34:ci(this,-this.Qb);break;case 37:case 40:ci(this,a.shiftKey?-this.Qb:-this.vg);break;case 39:case 38:ci(this,a.shiftKey?this.Qb:this.vg);break;default:b=!1}b&&a.preventDefault()};
s.we=function(a){this.c().focus&&this.c().focus();var b=a.target;if(!Rc(this.K,b)&&!Rc(this.za,b))if(this.xj)bi(this,di(this,a));else{this.og(a);this.Va=ei(this,di(this,a));this.hh=this.Q=="vertical"?this.De<this.Va.offsetTop:this.De>this.Va.offsetLeft+this.Va.offsetWidth;a=R(this.c());this.sa().h(a,"mouseup",this.ah,!0).h(this.c(),"mousemove",this.og);if(!this.Zb)this.Zb=new Ke(200),this.sa().h(this.Zb,Me,this.dh);this.dh();this.Zb.start()}};s.Pi=function(a){ci(this,(a.detail>0?-1:1)*this.vg);a.preventDefault()};
s.dh=function(){var a;if(this.Q=="vertical"){var b=this.De,c=this.Va.offsetTop;this.hh?b<c&&(a=fi(this,this.Va)+this.Qb):b>c+this.Va.offsetHeight&&(a=fi(this,this.Va)-this.Qb)}else b=this.De,c=this.Va.offsetLeft,this.hh?b>c+this.Va.offsetWidth&&(a=fi(this,this.Va)+this.Qb):b<c&&(a=fi(this,this.Va)-this.Qb);x(a)&&ai(this,this.Va,a)};s.ah=function(){this.Zb&&this.Zb.stop();var a=R(this.c());this.sa().ca(a,"mouseup",this.ah,!0).ca(this.c(),"mousemove",this.og)};
function gi(a,b){var c,d=a.c();c=ye(b);d=ye(d);c=new G(c.x-d.x,c.y-d.y);return a.Q=="vertical"?c.y:c.x}s.og=function(a){this.De=gi(this,a)};function di(a,b){var c=a.oa(),d=a.na();if(a.Q=="vertical"){var f=a.K.offsetHeight,g=a.c().clientHeight-f,f=gi(a,b)-f/2;return(d-c)*(g-f)/g+c}else return f=a.K.offsetWidth,g=a.c().clientWidth-f,f=gi(a,b)-f/2,(d-c)*f/g+c}
function fi(a,b){if(b==a.K)return a.s.p();else if(b==a.za)return a.s.p()+a.s.Cb();else e(Error("Illegal thumb element. Neither minThumb nor maxThumb"))}function ci(a,b){var c=fi(a,a.K)+b,d=fi(a,a.za)+b,c=N(c,a.oa(),a.na()-a.Pd),d=N(d,a.oa()+a.Pd,a.na());hi(a,c,d-c)}function ai(a,b,c){var d=n;b==a.za&&c<=a.s.na()&&c>=a.s.p()+a.Pd&&(d=c-a.s.p());var f=d||a.s.Cb();b==a.K&&c>=a.oa()&&c<=a.s.p()+f-a.Pd&&(b=f-(c-a.s.p()),Xh(a.s,c)+Xh(a.s,b)==Xh(a.s,c+b)&&(hi(a,c,b),d=n));d!=n&&a.s.vd(d)}
function hi(a,b,c){if(a.oa()<=b&&b<=a.na()-c&&a.Pd<=c&&c<=a.na()-b&&!(b==a.p()&&c==a.Cb()))a.s.Kc=!0,a.s.vd(0),a.s.W(b),a.s.vd(c),a.s.Kc=!1,$h(a),a.dispatchEvent("change")}s.oa=function(){return this.s.oa()};s.hg=function(a){this.s.hg(a)};s.na=function(){return this.s.na()};s.Yd=function(a){this.s.Yd(a)};function ei(a,b){return b<=a.s.p()+a.s.Cb()/2?a.K:a.za}s.Si=function(){$h(this);Zh(this);this.dispatchEvent("change")};
function $h(a){if(a.K&&!a.ze){var b=ii(a,fi(a,a.K)),c=ii(a,fi(a,a.za));if(a.Q=="vertical"){if(a.K.style.top=b.y+"px",a.za.style.top=c.y+"px",a.R)b=ji(c.y,b.y,a.K.offsetHeight),a.R.style.top=b.fc+"px",a.R.style.height=b.size+"px"}else if(a.K.style.left=b.x+"px",a.za.style.left=c.x+"px",a.R)b=ji(b.x,c.x,a.K.offsetWidth),a.R.style.left=b.fc+"px",a.R.style.width=b.size+"px"}}function ji(a,b,c){var d=Math.ceil(c/2);return{fc:a+d,size:Math.max(b-a+c-2*d,0)}}
function ii(a,b){var c=new G;if(a.K){var d=a.oa(),f=a.na(),f=b==d&&d==f?0:(b-d)/(f-d);a.Q=="vertical"?(d=a.c().clientHeight-a.K.offsetHeight,f=Math.round(f*d),c.y=d-f):(d=Math.round(f*(a.c().clientWidth-a.K.offsetWidth)),c.x=d)}return c}
function bi(a,b){b=Math.min(a.na(),Math.max(b,a.oa()));a.ze&&a.ne.stop(!0);var c=new Rh,d=ei(a,b),f=ii(a,b);c.add(new Xe(d,a.Q=="vertical"?[d.offsetLeft,f.y]:[f.x,d.offsetTop],100));if(a.R){var g=ii(a,a.s.p()),h=ii(a,a.s.p()+a.s.Cb());d==a.K?g=f:h=f;a.Q=="vertical"?(f=ji(h.y,g.y,a.K.offsetHeight),c.add(new Xe(a.R,[a.R.offsetLeft,f.fc],100)),c.add(new Ze(a.R,a.R.offsetHeight,f.size,100))):(f=ji(g.x,h.x,a.K.offsetWidth),c.add(new Xe(a.R,[f.fc,a.R.offsetTop],100)),c.add(new Ye(a.R,a.R.offsetWidth,f.size,
100)))}a.ne=c;a.sa().h(c,"end",a.Bi);a.ze=!0;ai(a,d,b);c.play(!1)}s.Bi=function(){this.ze=!1};s.Se=function(a){if(this.Q!=a){var b=this.r(this.Q),c=this.r(a);this.Q=a;if(this.c()){for(var a=this.c(),d=Ac(a),f=!1,g=0;g<d.length;g++)d[g]==b&&(zb(d,g--,1),f=!0);if(f)d.push(c),a.className=d.join(" ");this.K.style.left=this.K.style.top="";this.za.style.left=this.za.style.top="";if(this.R)this.R.style.left=this.R.style.top="",this.R.style.width=this.R.style.height="";$h(this)}}};
s.i=function(){Yh.b.i.call(this);this.Zb&&this.Zb.j();delete this.Zb;this.ne&&this.ne.j();delete this.ne;delete this.K;delete this.za;this.R&&delete this.R;this.s.j();delete this.s;this.L&&(this.L.j(),delete this.L);this.ec&&(this.ec.j(),delete this.ec);this.Ob&&(this.Ob.j(),delete this.Ob);this.zc&&(this.zc.j(),delete this.zc)};s.vg=1;s.lg=function(a){this.s.lg(a)};s.p=function(){return this.s.p()};s.W=function(a){ai(this,this.K,a)};s.Cb=function(){return this.s.Cb()};
s.vd=function(a){ai(this,this.za,this.s.p()+a)};s.setVisible=function(a){De(this.c(),a);a&&$h(this)};function Zh(a){var b=a.c();b&&(X(b,"valuemin",a.oa()),X(b,"valuemax",a.na()),X(b,"valuenow",a.p()))};function ki(a){Yh.call(this,a);this.s.vd(0)}E(ki,Yh);ki.prototype.r=function(a){return a=="vertical"?"goog-slider-vertical":"goog-slider-horizontal"};function li(a,b){this.e=a;this.oc=new ki;this.oc.Se("vertical");this.oc.Yd(1);this.oc.lg(0.01);mi=!1;this.oc.W((this.e.F.getZoom()-Dh(this.e))/vh(this.e.F).Db());this.M=T(this.oc,"change",function(b){mi==!1&&a.F.setZoom(b.target.p()*(vh(a.F).Db()-Dh(a))+Dh(a));mi=!1});this.mk=T(this.e.d,Yg,this.xg,!1,this);this.bf=new ug("");kg(this.bf,"weapp-zoomslider-add");this.qg=new ug("");kg(this.qg,"weapp-zoomslider-substract");this.di=T(this.bf,"action",function(){a.F.setZoom(Math.floor(a.F.getZoom()+1))});
this.ak=T(this.qg,"action",function(){a.F.setZoom(Math.floor(a.F.getZoom()-1))});this.bf.Kb(b);this.oc.Kb(b);this.qg.Kb(b)}var mi;E(li,F);li.prototype.xg=function(){mi=!0;this.oc.W((this.e.F.getZoom()-Dh(this.e))/vh(this.e.F).Db())};li.prototype.i=function(){U(this.M);U(this.mk);U(this.di);U(this.ak);this.oc.j()};function ni(a){this.Sb=a;this.D=n;this.Te=[];this.re=[]}
function oi(a,b,c,d){function f(a){var b=a*a;a*=a*a;return 6*a*b+-15*b*b+10*a}z(a.D)&&a.Xf();a.D=new Rh;var g=a.Sb.getPosition();a.Te=[0,0,a.Sb.getHeading(),a.Sb.getTilt()];a.re=[0,0,0,0];pi(a,g[0],g[1],b,c);var h=["begin","animate","end"],j=new Ne(a.Te,a.re,3E3,f);T(j,h,a.Ij,!1,a);a.D.add(j);if(d)c=yh(g[0],g[1],b,c),b=a.Sb.ja,c=Math.min(b,d)+c*0.2,c=Math.max(Math.max(b,d),c),b=new Ne([b],[c],1500,f),d=new Ne([c],[d],1500,f),T(b,h,a.xh,!1,a),T(d,h,a.xh,!1,a),h=new Sh,h.add(b),h.add(d),a.D.add(h);
T(a.D,"end",a.Xf,!1,a);a.D.play()}function pi(a,b,c,d,f){var c=Wb(c,2*Math.PI),f=Wb(f,2*Math.PI),g=c-f;g<-Math.PI?c+=2*Math.PI:g>Math.PI&&(f+=2*Math.PI);a.Te[0]=b;a.Te[1]=c;a.re[0]=d;a.re[1]=f}ni.prototype.Ij=function(a){this.Sb.setPosition(a.coords[0],a.coords[1]);this.Sb.setHeading(a.coords[2]);this.Sb.setTilt(a.coords[3])};ni.prototype.xh=function(a){Xg(this.Sb,a.coords[0])};ni.prototype.Xf=function(){if(z(this.D))this.D.j(),this.D=n};ni.prototype.cancel=function(){this.Xf()};function qi(a,b,c){var d=S("div",{"class":"we-pp-content"});d.innerHTML=a;a=S("div",{"class":"we-pp-wrapper"},d);d=S("div",{"class":"we-pp-tip-cont"},S("div",{"class":"we-pp-tip"}));this.ga=S("div",{"class":"we-pp"});if(c!==!1)c=S("a",{"class":"we-pp-close",href:"#"}),c.onclick=C(this.show,this,!1),this.ga.appendChild(c);this.ga.appendChild(a);this.ga.appendChild(d);b=b||300;this.ga.style.width=b.toFixed(0)+"px";this.ga.style.left=(-b/2).toFixed(0)+"px";this.show(!1)}qi.prototype.c=p("ga");
qi.prototype.show=function(a){a?(this.ga.style.opacity=1,this.ga.style.visibility="visible"):(this.ga.style.opacity=0,this.ga.style.visibility="hidden")};$b('.we-pp-content p{margin:18px 0;text-align:justify;}.we-pp-wrapper{padding:1px;text-align:left;border-radius:20px;}.we-pp{z-index:100;-webkit-transition:opacity 0.2s linear;-moz-transition:opacity 0.2s linear;-o-transition:opacity 0.2s linear;transition:opacity 0.2s linear;position:absolute;}.we-pp-wrapper,.we-pp-tip{background:white;box-shadow:0 1px 10px #888;-moz-box-shadow:0 1px 10px #888;-webkit-box-shadow:0 1px 14px #999;}.we-pp-close{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAMAAAC67D+PAAAAk1BMVEX////Ny8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8sw0horAAAAMHRSTlMA/bGBFK1LgjellwUx2+VZo73SE6z5fQYOtzLRpxI22CC4g6ieV+yAEc8/ZocEHTzU+GNbAAAAV0lEQVQI1wXBBQKDMADAwLRl7szdgCks/3/d7hh0ehl0W21IwZgNR44nTNVZribmC1WXqzVstmpIALu9Gg5HOJ1VNV64arjd1YKy8sEz+nrD51tD0//xB/w6CnrIHetcAAAAAElFTkSuQmCC);position:absolute;top:9px;right:9px;width:10px;height:10px;overflow:hidden;}.we-pp-content{display:inline-block;margin:19px;font:12px/1.4 "Helvetica Neue",Arial,Helvetica,sans-serif;}.we-pp-tip-cont{margin:0 auto;width:40px;height:16px;position:relative;overflow:hidden;}.we-pp-tip{width:15px;height:15px;padding:1px;margin:-8px auto 0;-moz-transform:rotate(45deg);-webkit-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg);}');function ri(a,b,c){this.lat=a;this.Qf=b;this.element=c;this.parentElement=n;this.enabled=!0;this.visible=!1}s=ri.prototype;s.Dd=function(a){this.parentElement&&this.detach();this.parentElement=a;this.parentElement.appendChild(this.element)};s.detach=function(){if(this.parentElement)Pc(this.element),this.parentElement=n};s.enable=function(a){(this.enabled=a||!1)||this.show(!1)};s.isEnabled=p("enabled");s.$=p("visible");
s.show=function(a){this.visible=a==!0;this.element.style.display=this.visible?"block":"none"};function si(a,b,c,d,f){var g=S("div",{"class":"we-pm-icon"});if(B(c))g.style.backgroundImage="url("+c+")";this.zd=d||25;this.Gc=f||41;g.style.width=this.zd.toFixed(0)+"px";g.style.height=this.Gc.toFixed(0)+"px";g.style.marginLeft=(-this.zd/2).toFixed(0)+"px";g.style.marginTop=(-this.Gc).toFixed(0)+"px";c=S("div",{style:"position:absolute;"},g);ri.call(this,a,b,c);this.ga=n;this.show(!1);this.ng(!1);g.onclick=C(this.ng,this,!0)}E(si,ri);si.prototype.ng=function(a){this.ga&&this.ga.show(a)};$b(".we-pm-icon{position:absolute;z-index:64;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFtklEQVR42p3Wa0xTZxgH8CYkS5aQLGFxcXNZNNu4FIFCK9eCWOQm3lDizLYP+zTnxLk5wQpICxRaLuWi3FpQFMU55xDkjiBTFMeA9Zy2JzMxWUZisoS4TyRuQvG/pydQKb3Q2uSXw3nf93n+5z2nLRVIiga88RERL/MlAgDrosJ+d/zISTJMEFt2B9LyEV5kySBo7G+iI9vdhyj7nfEhcjKfUvcAma0z+Pwa5+BwuxG7myaRUH4XtHaAhLgI6VvLjwwn14zj0CUWn13lkHXZhPQWBml6e3svGq3zvIyGX0F1z0mWQ4hY0buaH3mcUvsAn17hcKDNhFQdsy4K5Nfv108jsXIM1OOoqxAfMppMAYepIF3PIrmZ8cqhy2ZkXjBYQyxE9iqksGeFXKa9h0PtHF0di6Qmxhk+fKeLOcLX72r8DdRvjvjxIRGFt638yPz+Vha7W0zY0cDYydAbkXWJ4+1rYWx/H2gzO6wl/JysehzUUw0+5Oxtq+zEyns42MYhsZ6xQ2N0C0yQae9DouhFZt1dOvYgnt5RGU3T/Dw1tqtJ1xn5Gur7D/ERRBR0W43vapzhd5FwnrHZ02Kmt+jvkBTeRsOdPzD/7wJWXkPGp0hSD2BnzUMcuMjZ1RF+LFY1BOotFYQXdPkSy/5WDvF1DKSr8GOau7g1/RecvWafzSOuuBf79CYkNxodandox0G9VYLw/FvCSGUf9rZQci1js6PeiPRGAw7WjTgNePnyJa9mgJ5h1QPsWVOf0kTBdZOg/p0CUV6nNKp4ALv1HKJrGJu0Znqo1RNQds64DLBYLBjjniK6ZMihXtZgRPK5KVD/UYHozM+R1p1k6DhEaRmblAYK0U4g/8aUy4DFxUUMMLOIUQ071CfVm5BUOwnq30shNzeJC7qwq5nDtirGJq6GRWoDixR1HxYsS3YhS0tLWFhY4OVdf4TEqgmkNprt6ukiafwhqL9OECb/yYfMpzaaEKllIa5kbNKa6D6XjqK632i3C9oBH3DPPIttyn5+XUy1Y22cegzUO18QdvqGVWdC5SNK5xBezqyg3dB9pW1Hl4wgu20cM3/O4b+FRTx++gwNgywkeTfhrE5cwfBj4oJuUG+hIDT3RyuZpLAXO+s5hGkYOzHVRn5cWv4Q4rM91iJE5HchpnQMsjrWWY1tPfUd5j/xoTnXV0zEV05Cds6MUDVjR6RhkXSecxBTbXJYG0ZojnbRA+opXQ75YUWmpLCfro7D1lLmdfH1Us0EqN+o7Vs45NS1FT7kSXzVDGK1ZghVzGtJpJAI2gX1Sn4V8n3HakcliiEk1HIILGG8FldtRqxmEtRn2u6f1taTHau9SebitCzCNUb4FzNekdZwCC/oA/XIsg/57upaKrFiBHFaDh8rGY9FVZgRrZ4C1T8mPnYhwd9eWWsDeR5TaUKwyogPFYxHYqo4iPL7QbVf8M3tQ9qd0UUoxhBdyWFLIbOucLUJkeoZUN0secMx5MRlZwKIhW4BXSWLzWcZt6IqrLsYBNWccPq7S/jNJVe6wxX3sU1jxgf5BpeExUZIygyg9XPE13nI8TZXtm89dRNiCnk/z+AKPx+aNwhaX+jyZ2pQ9kV3JkTKRxCVmrDpjMGBv4JFRBkLWjdP3nITcsGdT4JzuiAqM+NduWEtfjzkzBBoXQXf0GXIsVZ3fMiTsKIpBBYZsfG0wWZzAQuRygSaf0E2ug0J/LplPdnBOT0IVZnxTq5hBX8eLB8Gzev4Zu5D9OvxJXMhRQZsoavfkEPPQ84gpMQEGreQLeuGBBzVe0IVlDuA4GIz3j5l4I9B8hHQeIfbAFvIVzpPbCQvhEoT3pOzEBaZEZh9BTQW4mFIs6d0gbl3EKSkAPkY6LyXCDwLOdLsKWHAsXYEKswIOH4NdC4lnoX4H2nyRnfA6THQ8Zflcw9Dvmz0xnb/7A7QMW353OMQb7USgTch/wNGSWfRl/HE1wAAAABJRU5ErkJggg==);}");var ti=C(document.createElement,document);document.createElement=function(a){var b=ti(a);if(a=="img")b.crossOrigin="";return b};function ui(a,b){Vb.call(this,"Bing Maps - "+a);var c="bingsCallback_"+a,d="http://dev.virtualearth.net/REST/V1/Imagery/Metadata/"+a+"?key="+b+"&jsonp="+c;u[c]=x(u[c])?oa(C(this.Mh,this),u[c]):C(this.Mh,this);c=document.createElement("script");c.src=d;c.type="text/javascript";ac(document,"head",i,i)[0].appendChild(c)}E(ui,Vb);s=ui.prototype;s.lh=function(){return!y(this.ib)};s.Mh=function(a){this.Od=a;if(a.resourceSets.length>0)this.ib=a.resourceSets[0].resources[0],Rb(this);this.Jg()};
s.gd=function(){return y(this.ib)?0:this.ib.zoomMin};s.Db=function(){return y(this.ib)?18:this.ib.zoomMax};s.jd=q(256);function vi(a,b,c){for(var d="",f=1;f<=a;f++)d+=(c>>a-f&1)<<1|b>>a-f&1;return d}s.Tg=function(a,b,c){return y(this.ib)?"":this.ib.imageUrl.replace("{subdomain}",this.ib.imageUrlSubdomains[Math.floor(Math.random()*this.ib.imageUrlSubdomains.length)]).replace("{quadkey}",vi(a,b,c))};s.Ee=function(a,b,c){return y(this.ib)?!1:ui.b.Ee.call(this,a,b,c)};
s.Yc=function(a){y(this.Od)||cc(a,this.Od.copyright)};s.vf=function(){return!y(this.Od)?this.Od.brandLogoUri:n};s.Od=n;s.ib=n;function wi(a){bc.call(this,a||"OpenStreetMaps","http://{sub}.tile.openstreetmap.org/{z}/{x}/{y}.png",0,18,256,!1,["a","b","c"])}E(wi,bc);wi.prototype.Yc=function(a){cc(a,"\u00a9 ",S("a",{href:"http://www.openstreetmap.org/"},"OpenStreetMap")," contributors, CC-BY-SA")};function xi(a,b){this.e=a;this.v=new Ke(20);this.zg=this.yg=0.1;this.Hf=!1;this.vc=new Y("");this.vc.Ue|=255;this.ci=T(this.vc,"activate",this.Fj,!1,this);this.xi=T(this.vc,"deactivate",this.Gj,!1,this);this.sk=T(this.vc,"enter",this.Hj,!1,this);this.sg=T(this.v,Me,this.qd,!1,this);this.vj=T(R(this.e.a.canvas),"mousemove",this.Qd,!1,this);this.uj=T(R(this.e.a.canvas),"mousedown",function(){this.Hf=!0},!1,this);this.wj=T(R(this.e.a.canvas),"mouseup",function(){this.Hf=!1},!1,this);this.vc.Kb(b)}
E(xi,F);s=xi.prototype;s.Hj=function(){this.Hf&&(this.vc.Fa(4,!0),this.v.start())};s.Fj=function(){this.v.start()};s.Gj=function(){this.v&&this.v.stop()};s.qd=function(){this.td(this.yg,this.zg)};s.Qd=function(a){this.yg=-(a.offsetX-a.target.offsetWidth/2)*2;this.zg=-(a.offsetY-a.target.offsetHeight/2)};s.i=function(){U(this.ci);U(this.vj);U(this.wj);U(this.uj);U(this.xi);U(this.sg);this.vc.j()};
s.td=function(a,b){var c=Math.PI*(1/this.e.a.canvas.height)*(this.e.$d/Math.pow(2,xh(this.e.F,!0)));Wg(this.e.d,b*c,-2*a*c)};function yi(a,b){this.e=a;this.f=b;this.Sf=new Kb}function zi(a,b,c){b=b||Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^D()).toString(36);c.Dd(a.f);a.Sf.set(b,c)}
yi.prototype.hk=function(a){a=this.Sf.get(a);if(a.isEnabled()){var b;a:{var c=this.e;b=a.lat;var d=a.Qf;b=O(b);var d=O(d),f=Math.cos(b),f=new Ah(Math.sin(d)*f,Math.sin(b),Math.cos(d)*f),d=c.a.Ie.multiply(new Z([[f.x],[f.y],[f.H],[1]]));if(Bg(d,3,0)==0)b=n;else{d=d.multiply(1/Bg(d,3,0));b=(Bg(d,0,0)+1)/2*c.a.nb;var d=(Bg(d,1,0)-1)/-2*c.a.mb,g=1;if(b<0||b>c.a.nb||d<0||d>c.a.mb)g=0;else{c=Bh(0.5,0.5,0,c.a.Je,1,1);if(y(c)){b=n;break a}var g=f.x-c.x,h=f.y-c.y,j=f.H-c.H,g=Math.sqrt(g*g+h*h+j*j),f=f.rg(c).normalize(),
f=Eh(c,f),g=y(f)?0:Math.abs(g-f[0])<Math.abs(g-f[1])?1:0}b=[b,d,g]}}z(b)?(d=b[1],a.element.style.left=b[0].toFixed()+"px",a.element.style.top=d.toFixed()+"px",a.enabled&&a.show(!0),a.show(b[2]>0)):a.show(!1)}};function Ai(a){this.e=a;this.ec=new Oh(a.a.canvas);this.M=T(this.ec,"mousewheel",function(a){this.ya(-(a.Wb==0?0:a.Wb<0?-1:1));a.preventDefault()},!1,this);this.wi=T(a.a.canvas,"dblclick",C(function(a){Xg(this.d,this.d.ja/2);var c=Zg(this,a.offsetX,a.offsetY,!0)||this.d.hd(this);if(c){var d=(this.d.Hb+c[1])/2;Math.abs(this.d.Hb-c[1])>Math.PI&&(d+=Math.PI);this.d.setPosition((this.d.tb+c[0])/2,d)}a.preventDefault()},a));this.Wj=T(a.a.canvas,"mouseup",C(function(a){if(pd(a,2)){Xg(this.d,this.d.ja*2);
var c=Zg(this,a.offsetX,a.offsetY,!0)||this.d.hd(this);c&&this.d.setPosition(2*this.d.tb-c[0],2*this.d.Hb-c[1]);a.preventDefault()}},a));this.Bj=T(a.a.canvas,"contextmenu",function(a){a.preventDefault()});this.D=n;this.Sc=this.Rc=0}E(Ai,F);
Ai.prototype.ya=function(a){var b=120;a*=-1;if(this.D)if(this.Sc>this.Rc==a>0)return;else this.D.j(),this.D=n,b*=(this.e.d.ja-this.Rc)/(this.Sc-this.Rc),a=this.Sc,this.Sc=this.Rc,this.Rc=a;else this.Rc=this.e.d.ja,this.Sc=N(this.Rc*Math.pow(2,a),250,1E7);if(!(isNaN(b)||b<=0)){var a=this.e.d.getPosition(),c=this.e.d.hd()||a,d=this.Sc/this.e.d.ja;a.push(this.e.d.ja);this.D=new Ne(a,[c[0]+d*(a[0]-c[0]),c[1]+d*(a[1]-c[1]),this.Sc],b);T(this.D,["animate","finish"],function(a){this.e.d.setPosition(a.x,
a.y);Xg(this.e.d,a.H)},!1,this);T(this.D,["finish"],this.Di,!1,this);this.D.play(!1)}};Ai.prototype.Di=function(){if(this.D)this.D.j(),this.D=n};Ai.prototype.i=function(){U(this.M);U(this.wi);U(this.Wj);U(this.Bj);this.ec.j();this.D.j()};function Bi(a,b){var c=S("div",{style:"position:absolute;width:16px;height:32px;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBoZWlnaHQ9IjMyIiB3aWR0aD0iMTYiIHZlcnNpb249IjEuMSI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCwtMTAyMC4zNjIyKSI+PHBhdGggc3Ryb2tlLWxpbmVqb2luPSJtaXRlciIgZD0ibTE1LDcuODdjMCwzLjQ3LTIuNzcsNi4yOC02LjE5LDYuMjhzLTYuMTktMi44MS02LjE5LTYuMjgsMi43Ny02LjI4LDYuMTktNi4yOCw2LjE5LDIuODEsNi4xOSw2LjI4em0tNi4xNiwyMy4ydi0xNi41IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjcwNzEwNjc4LDEwMjAuNzE1OCkiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2Utd2lkdGg9IjFweCIgZmlsbD0iI2UxMzUxZSIvPjwvZz48L3N2Zz4=);margin:-32px 0 0 -8px;opacity:0.8;"});
ri.call(this,a,b,c);this.show(!1)}E(Bi,ri);function Ci(a,b){this.e=a;this.Lb=i;this.Ja=this.Ia=this.Kh=0;this.M=n;T(this.e.a.canvas,"mousedown",C(this.Yf,this));T(R(this.e.a.canvas),"mouseup",C(this.Zf,this));this.wb=b||n}
Ci.prototype.Yf=function(a){if(!pd(a,2)&&!a.ctrlKey&&!a.altKey){z(this.wb)&&this.wb.cancel();this.Ia=a.screenX;this.Ja=a.screenY;if(pd(a,1)||pd(a,0)&&a.shiftKey)if(this.Lb=this.e.d.hd(),z(this.Lb)){if(window.Fd)window.Fd.lat=Xb(this.Lb[0]),window.Fd.Qf=Xb(this.Lb[1]),window.Fd.enable(!0);this.Kh=this.e.d.getTilt()==0?this.e.d.ja:Math.sin(Math.PI-this.e.d.getTilt()-(Math.PI-Math.asin((1+this.e.d.ja/6378137)*Math.sin(this.e.d.getTilt()))))/Math.sin(this.e.d.getTilt())*6378137}if(!y(this.M))U(this.M),
this.M=n;this.M=T(R(this.e.a.canvas),"mousemove",C(this.Qd,this));a.preventDefault()}};Ci.prototype.Zf=function(a){a.preventDefault();this.Lb=i;window.Fd&&window.Fd.enable(!1);if(!y(this.M))U(this.M),this.M=n};
Ci.prototype.td=function(a,b){if(x(this.Lb)){var c=a/this.e.a.canvas.width*Math.PI*-2,d=b/this.e.a.canvas.height*Math.PI/2;if(y(this.Lb))this.e.d.setHeading(this.e.d.getHeading()+c),this.e.d.setTilt(this.e.d.getTilt()+d);else{var f=this.e.d,g=this.Lb[0],h=this.Lb[1],j=this.Kh;f.md+=c;c=Math.asin(6378137/Math.sqrt(j*j+40680631590769));f.Nb=N(f.Nb+d,-c,c);d=Math.asin(j/6378137*Math.sin(f.Nb));Math.abs(f.Nb)<1.0E-4?Xg(f,j):Xg(f,(Math.sin(Math.PI-f.Nb-d)/Math.sin(f.Nb)-1)*6378137);g-=Math.cos(f.md)*d;
f.setPosition(g,h+Math.sin(f.md)*d/Math.cos(g))}}};Ci.prototype.Qd=function(a){this.td(a.screenX-this.Ia,a.screenY-this.Ja);this.Ia=a.screenX;this.Ja=a.screenY;a.preventDefault()};function Di(a,b,c,d,f,g,h,j){var k,l=c.offsetParent;if(l){var o=l.tagName=="HTML"||l.tagName=="BODY";if(!o||pe(l,"position")!="static")k=we(l),o||(k=Ga(k,new G(l.scrollLeft,l.scrollTop)))}l=Ce(a);if(o=ve(a)){var m=new me(o.left,o.top,o.right-o.left,o.bottom-o.top),o=Math.max(l.left,m.left),t=Math.min(l.left+l.width,m.left+m.width);if(o<=t){var r=Math.max(l.top,m.top),m=Math.min(l.top+l.height,m.top+m.height);if(r<=m)l.left=o,l.top=r,l.width=t-o,l.height=m-r}}o=Q(a);r=Q(c);if(o.A!=r.A){var t=o.A.body,
r=r.A.parentWindow||r.A.defaultView,m=new G(0,0),W=R(t)?R(t).parentWindow||R(t).defaultView:window,xd=t;do{var Th=W==r?we(xd):ye(xd);m.x+=Th.x;m.y+=Th.y}while(W&&W!=r&&(xd=W.frameElement)&&(W=W.parent));t=Ga(m,we(t));H&&!Zc(o)&&(t=Ga(t,$c(o)));l.left+=t.x;l.top+=t.y}a=(b&4&&xe(a)?b^2:b)&-5;b=new G(a&2?l.left+l.width:l.left,a&1?l.top+l.height:l.top);k&&(b=Ga(b,k));f&&(b.x+=(a&2?-1:1)*f.x,b.y+=(a&1?-1:1)*f.y);var w;if(h&&(w=ve(c))&&k)w.top-=k.y,w.right-=k.x,w.bottom-=k.y,w.left-=k.x;a:{k=b.ma();f=0;
a=(d&4&&xe(c)?d^2:d)&-5;d=Ae(c);j=j?j.ma():d.ma();if(g||a!=0)a&2?k.x-=j.width+(g?g.right:0):g&&(k.x+=g.left),a&1?k.y-=j.height+(g?g.bottom:0):g&&(k.y+=g.top);if(h){if(w){g=k;f=0;if((h&65)==65&&(g.x<w.left||g.x>=w.right))h&=-2;if((h&132)==132&&(g.y<w.top||g.y>=w.bottom))h&=-5;if(g.x<w.left&&h&1)g.x=w.left,f|=1;g.x<w.left&&g.x+j.width>w.right&&h&16&&(j.width-=g.x+j.width-w.right,f|=4);if(g.x+j.width>w.right&&h&1)g.x=Math.max(w.right-j.width,w.left),f|=1;h&2&&(f|=(g.x<w.left?16:0)|(g.x+j.width>w.right?
32:0));if(g.y<w.top&&h&4)g.y=w.top,f|=2;g.y>=w.top&&g.y+j.height>w.bottom&&h&32&&(j.height-=g.y+j.height-w.bottom,f|=8);if(g.y+j.height>w.bottom&&h&4)g.y=Math.max(w.bottom-j.height,w.top),f|=2;h&8&&(f|=(g.y<w.top?64:0)|(g.y+j.height>w.bottom?128:0));h=f}else h=256;f=h;if(f&496){c=f;break a}}qe(c,k);if(!Dc(d,j))g=Zc(Q(R(c))),H&&(!g||!K("8"))?(h=c.style,g?(H?(g=Ge(c,oe(c,"paddingLeft")),d=Ge(c,oe(c,"paddingRight")),k=Ge(c,oe(c,"paddingTop")),w=Ge(c,oe(c,"paddingBottom")),g=new Ha(k,d,w,g)):(g=ne(c,
"paddingLeft"),d=ne(c,"paddingRight"),k=ne(c,"paddingTop"),w=ne(c,"paddingBottom"),g=new Ha(parseFloat(k),parseFloat(d),parseFloat(w),parseFloat(g))),c=Je(c),h.pixelWidth=j.width-c.left-g.left-g.right-c.right,h.pixelHeight=j.height-c.top-g.top-g.bottom-c.bottom):(h.pixelWidth=j.width,h.pixelHeight=j.height)):(c=c.style,I?c.MozBoxSizing="border-box":J?c.WebkitBoxSizing="border-box":c.boxSizing="border-box",c.width=j.width+"px",c.height=j.height+"px");c=f}return c};function Ei(){}Ei.prototype.Td=aa();function Fi(a,b){this.element=a;this.kf=b}E(Fi,Ei);Fi.prototype.Td=function(a,b,c){Di(this.element,this.kf,a,b,i,c)};function Gi(a,b,c){Fi.call(this,a,b);this.fi=c}E(Gi,Fi);Gi.prototype.Sg=q(5);Gi.prototype.Td=function(a,b,c,d){var f=Di(this.element,this.kf,a,b,n,c,10,d);if(f&496){var g=Hi(f,this.kf),b=Hi(f,b),f=Di(this.element,g,a,b,n,c,10,d);f&496&&(g=Hi(f,g),b=Hi(f,b),this.fi?Di(this.element,g,a,b,n,c,this.Sg(),d):Di(this.element,g,a,b,n,c,0,d))}};function Hi(a,b){a&48&&(b^=2);a&192&&(b^=1);return b};function Ii(a,b,c,d){Gi.call(this,a,b,c||d);this.Uj=d}E(Ii,Gi);Ii.prototype.Sg=function(){return 65|(this.Uj?32:132)};function Ji(){}E(Ji,ag);ca(Ji);Ji.prototype.t=function(a){return a.Y().t("div",this.r())};Ji.prototype.ha=function(a,b){if(b.tagName=="HR"){var c=b,b=this.t(a);c.parentNode&&c.parentNode.insertBefore(b,c);Pc(c)}else P(b,this.r());return b};Ji.prototype.setContent=aa();Ji.prototype.r=q("goog-menuseparator");function Ki(a,b){Y.call(this,n,a||Ji.Ca(),b);mg(this,1,!1);mg(this,2,!1);mg(this,4,!1);mg(this,32,!1);this.o=1}E(Ki,Y);Ki.prototype.da=function(){Ki.b.da.call(this);ef(this.c(),"separator")};fg("goog-menuseparator",function(){return new Ki});function Li(){}ca(Li);s=Li.prototype;s.rb=aa();function Mi(a,b){if(a)a.tabIndex=b?0:-1}s.t=function(a){return a.Y().t("div",this.fd(a).join(" "))};s.X=function(a){return a};s.Ya=function(a){return a.tagName=="DIV"};s.ha=function(a,b){b.id&&Sf(a,b.id);var c=this.r(),d=!1,f=Ac(b);f&&M(f,function(b){b==c?d=!0:b&&(b==c+"-disabled"?a.lc(!1):b==c+"-horizontal"?a.Se(Ni):b==c+"-vertical"&&a.Se(Oi))},this);d||P(b,c);Pi(this,a,this.X(b));return b};
function Pi(a,b,c){if(c)for(var d=c.firstChild,f;d&&d.parentNode==c;){f=d.nextSibling;if(d.nodeType==1){var g=a.uf(d);if(g)g.f=d,b.isEnabled()||g.lc(!1),b.Ad(g),g.ha(d)}else(!d.nodeValue||qa(d.nodeValue)=="")&&c.removeChild(d);d=f}}s.uf=function(a){a:{for(var b=Ac(a),c=0,d=b.length;c<d;c++)if(a=b[c]in gg?gg[b[c]]():n)break a;a=n}return a};s.nd=function(a){a=a.c();Fe(a,!0,I);if(H)a.hideFocus=!0;var b=this.rb();b&&ef(a,b)};s.Z=function(a){return a.c()};s.r=q("goog-container");
s.fd=function(a){var b=this.r(),c=[b,a.Q==Ni?b+"-horizontal":b+"-vertical"];a.isEnabled()||c.push(b+"-disabled");return c};function Qi(){}E(Qi,Li);ca(Qi);s=Qi.prototype;s.rb=q("menu");s.Ya=function(a){return a.tagName=="UL"||Qi.b.Ya.call(this,a)};s.uf=function(a){return a.tagName=="HR"?new Ki:Qi.b.uf.call(this,a)};s.uc=function(a,b){return Rc(a.c(),b)};s.r=q("goog-menu");s.nd=function(a){Qi.b.nd.call(this,a);X(a.c(),"haspopup","true")};fg("goog-menuseparator",function(){return new Ki});function Ri(){this.Hg=[]}E(Ri,ag);ca(Ri);function Si(a,b){var c=a.Hg[b];if(!c){switch(b){case 0:c=a.r()+"-highlight";break;case 1:c=a.r()+"-checkbox";break;case 2:c=a.r()+"-content"}a.Hg[b]=c}return c}s=Ri.prototype;s.rb=q("menuitem");s.t=function(a){var b=a.Y().t("div",this.fd(a).join(" "),Ti(this,a.getContent(),a.Y()));Ui(this,a,b,!!(a.T&8)||!!(a.T&16));return b};s.X=function(a){return a&&a.firstChild};
s.ha=function(a,b){var c=Qc(b),d=Si(this,2);c&&c.className.indexOf(d)!=-1||b.appendChild(Ti(this,b.childNodes,a.Y()));ub(Ac(b),"goog-option")&&(a.Re(!0),this.Re(a,b,!0));return Ri.b.ha.call(this,a,b)};s.setContent=function(a,b){var c=this.X(a),d=Vi(this,a)?c.firstChild:n;Ri.b.setContent.call(this,a,b);d&&!Vi(this,a)&&c.insertBefore(d,c.firstChild||n)};function Ti(a,b,c){a=Si(a,2);return c.t("div",a,b)}s.Re=function(a,b,c){b&&(ef(b,c?"menuitemcheckbox":this.rb()),Ui(this,a,b,c))};
function Vi(a,b){var c=a.X(b);if(c){var c=c.firstChild,d=Si(a,1);return!!c&&!!c.className&&c.className.indexOf(d)!=-1}return!1}function Ui(a,b,c,d){d!=Vi(a,c)&&(d?P(c,"goog-option"):Bc(c,"goog-option"),c=a.X(c),d?(a=Si(a,1),c.insertBefore(b.Y().t("div",a),c.firstChild||n)):c.removeChild(c.firstChild))}s.Id=function(a){switch(a){case 2:return Si(this,0);case 16:case 8:return"goog-option-selected";default:return Ri.b.Id.call(this,a)}};
s.xf=function(a){var b=Si(this,0);switch(a){case "goog-option-selected":return 16;case b:return 2;default:return Ri.b.xf.call(this,a)}};s.r=q("goog-menuitem");function Wi(a,b,c,d){Y.call(this,a,d||Ri.Ca(),c);this.W(b)}E(Wi,Y);s=Wi.prototype;s.p=function(){var a=this.Tf;return a!=n?a:this.ed()};s.W=ba("Tf");s.Re=function(a){mg(this,16,a);var b=this.c();b&&this.k.Re(this,b,a)};s.ed=function(){var a=this.getContent();return A(a)?(a=rb(a,function(a){return ub(Ac(a),"goog-menuitem-accel")?"":Wc(a)}).join(""),pa(a)):Wi.b.ed.call(this)};
s.Fc=function(a){var b=this.getParent();if(b){var c=b.Ch;b.Ch=n;if(b=c&&fa(a.clientX))b=new G(a.clientX,a.clientY),b=c==b?!0:!c||!b?!1:c.x==b.x&&c.y==b.y;if(b)return}Wi.b.Fc.call(this,a)};fg("goog-menuitem",function(){return new Wi(n)});function Xi(a,b,c){Of.call(this,c);this.k=b||Li.Ca();this.Q=a||Oi}E(Xi,Of);var Ni="horizontal",Oi="vertical";s=Xi.prototype;s.Lf=n;s.L=n;s.k=n;s.Q=n;s.U=!0;s.$a=!0;s.pf=!0;s.ia=-1;s.aa=n;s.Ib=!1;s.gi=!1;s.Lj=!0;s.yb=n;s.Z=function(){return this.Lf||this.k.Z(this)};s.ue=function(){return this.L||(this.L=new yf(this.Z()))};s.t=function(){this.f=this.k.t(this)};s.X=function(){return this.k.X(this.c())};s.Ya=function(a){return this.k.Ya(a)};
s.pb=function(a){this.f=this.k.ha(this,a);if(a.style.display=="none")this.U=!1};s.da=function(){Xi.b.da.call(this);Wf(this,function(a){a.I&&Yi(this,a)},this);var a=this.c();this.k.nd(this);this.setVisible(this.U,!0);this.sa().h(this,"enter",this.yf).h(this,"highlight",this.zf).h(this,"unhighlight",this.Ff).h(this,"open",this.Ri).h(this,"close",this.Ji).h(a,"mousedown",this.Ec).h(R(a),"mouseup",this.Li).h(a,["mousedown","mouseup","mouseover","mouseout"],this.Ii);this.ac()&&Zi(this,!0)};
function Zi(a,b){var c=a.sa(),d=a.Z();b?c.h(d,"focus",a.Dc).h(d,"blur",a.Gb).h(a.ue(),"key",a.bb):c.ca(d,"focus",a.Dc).ca(d,"blur",a.Gb).ca(a.ue(),"key",a.bb)}s.Pa=function(){$i(this,-1);this.aa&&this.aa.S(!1);this.Ib=!1;Xi.b.Pa.call(this)};s.i=function(){Xi.b.i.call(this);if(this.L)this.L.j(),this.L=n;this.k=this.aa=this.yb=this.Lf=n};s.yf=q(!0);
s.zf=function(a){var b=$f(this,a.target);if(b>-1&&b!=this.ia){var c=Yf(this,this.ia);c&&c.vb(!1);this.ia=b;c=Yf(this,this.ia);this.Ib&&c.setActive(!0);this.Lj&&this.aa&&c!=this.aa&&(c.T&64?c.S(!0):this.aa.S(!1))}X(this.c(),"activedescendant",a.target.c().id)};s.Ff=function(a){if(a.target==Yf(this,this.ia))this.ia=-1;X(this.c(),"activedescendant","")};s.Ri=function(a){if((a=a.target)&&a!=this.aa&&a.getParent()==this)this.aa&&this.aa.S(!1),this.aa=a};s.Ji=function(a){if(a.target==this.aa)this.aa=n};
s.Ec=function(a){if(this.$a)this.Ib=!0;var b=this.Z();b&&Vc(b)?b.focus():a.preventDefault()};s.Li=function(){this.Ib=!1};s.Ii=function(a){var b;a:{b=a.target;if(this.yb)for(var c=this.c();b&&b!==c;){var d=b.id;if(d in this.yb){b=this.yb[d];break a}b=b.parentNode}b=n}if(b)switch(a.type){case "mousedown":b.Ec(a);break;case "mouseup":b.Fc(a);break;case "mouseover":b.Ef(a);break;case "mouseout":b.Df(a)}};s.Dc=aa();s.Gb=function(){$i(this,-1);this.Ib=!1;this.aa&&this.aa.S(!1)};
s.bb=function(a){return this.isEnabled()&&this.$()&&(Xf(this)!=0||this.Lf)&&this.ld(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};
s.ld=function(a){var b=Yf(this,this.ia);if(b&&typeof b.bb=="function"&&b.bb(a))return!0;if(this.aa&&this.aa!=b&&typeof this.aa.bb=="function"&&this.aa.bb(a))return!0;if(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)return!1;switch(a.keyCode){case 27:if(this.ac())this.Z().blur();else return!1;break;case 36:aj(this);break;case 35:bj(this);break;case 38:if(this.Q==Oi)cj(this);else return!1;break;case 37:if(this.Q==Ni)Zf(this)?dj(this):cj(this);else return!1;break;case 40:if(this.Q==Oi)dj(this);else return!1;
break;case 39:if(this.Q==Ni)Zf(this)?cj(this):dj(this);else return!1;break;default:return!1}return!0};function Yi(a,b){var c=b.c(),c=c.id||(c.id=Rf(b));if(!a.yb)a.yb={};a.yb[c]=b}s.Ad=function(a,b){Xi.b.Ad.call(this,a,b)};s.Bd=function(a,b,c){a.Ue|=2;a.Ue|=64;(this.ac()||!this.gi)&&mg(a,32,!1);ig(a,!1);Xi.b.Bd.call(this,a,b,c);c&&this.I&&Yi(this,a);b<=this.ia&&this.ia++};
s.removeChild=function(a,b){if(a=B(a)?Uf(this,a):a){var c=$f(this,a);c!=-1&&(c==this.ia?a.vb(!1):c<this.ia&&this.ia--);var d=a.c();if(d&&d.id&&this.yb)c=this.yb,d=d.id,d in c&&delete c[d]}a=Xi.b.removeChild.call(this,a,b);ig(a,!0);return a};s.Se=function(a){this.c()&&e(Error("Component already rendered"));this.Q=a};s.$=p("U");
s.setVisible=function(a,b){if(b||this.U!=a&&this.dispatchEvent(a?"show":"hide")){this.U=a;var c=this.c();c&&(De(c,a),this.ac()&&Mi(this.Z(),this.$a&&this.U),b||this.dispatchEvent(this.U?"aftershow":"afterhide"));return!0}return!1};s.isEnabled=p("$a");s.lc=function(a){if(this.$a!=a&&this.dispatchEvent(a?"enable":"disable"))a?(this.$a=!0,Wf(this,function(a){a.ai?delete a.ai:a.lc(!0)})):(Wf(this,function(a){a.isEnabled()?a.lc(!1):a.ai=!0}),this.Ib=this.$a=!1),this.ac()&&Mi(this.Z(),a&&this.U)};
s.ac=p("pf");s.mc=function(a){a!=this.pf&&this.I&&Zi(this,a);this.pf=a;this.$a&&this.U&&Mi(this.Z(),a)};function $i(a,b){var c=Yf(a,b);c?c.vb(!0):a.ia>-1&&Yf(a,a.ia).vb(!1)}s.vb=function(a){$i(this,$f(this,a))};function aj(a){ej(a,function(a,c){return(a+1)%c},Xf(a)-1)}function bj(a){ej(a,function(a,c){a--;return a<0?c-1:a},0)}function dj(a){ej(a,function(a,c){return(a+1)%c},a.ia)}function cj(a){ej(a,function(a,c){a--;return a<0?c-1:a},a.ia)}
function ej(a,b,c){for(var c=c<0?$f(a,a.aa):c,d=Xf(a),c=b.call(a,c,d),f=0;f<=d;){var g=Yf(a,c);if(g&&a.Gg(g)){$i(a,c);break}f++;c=b.call(a,c,d)}}s.Gg=function(a){return a.$()&&a.isEnabled()&&!!(a.T&2)};function fj(){}E(fj,ag);ca(fj);fj.prototype.r=q("goog-menuheader");function gj(a,b,c){Y.call(this,a,c||fj.Ca(),b);mg(this,1,!1);mg(this,2,!1);mg(this,4,!1);mg(this,32,!1);this.o=1}E(gj,Y);fg("goog-menuheader",function(){return new gj(n)});function hj(a,b){Xi.call(this,Oi,b||Qi.Ca(),a);this.mc(!1)}E(hj,Xi);s=hj.prototype;s.cf=!0;s.hi=!1;s.r=function(){return this.k.r()};s.uc=function(a){if(this.k.uc(this,a))return!0;for(var b=0,c=Xf(this);b<c;b++){var d=Yf(this,b);if(typeof d.uc=="function"&&d.uc(a))return!0}return!1};s.Pb=function(a){this.Ad(a,!0)};s.Xc=function(a,b){this.Bd(a,b,!0)};s.Jd=function(a){return Yf(this,a)};s.te=function(){return Xf(this)};
s.setPosition=function(a,b){var c=this.$();c||De(this.c(),!0);ze(this.c(),a,b);c||De(this.c(),!1)};s.getPosition=function(){return this.$()?we(this.c()):n};s.setVisible=function(a,b,c){(b=hj.b.setVisible.call(this,a,b))&&a&&this.I&&this.cf&&this.Z().focus();this.Ch=a&&c&&fa(c.clientX)?new G(c.clientX,c.clientY):n;return b};s.yf=function(a){this.cf&&this.Z().focus();return hj.b.yf.call(this,a)};s.Gg=function(a){return(this.hi||a.isEnabled())&&a.$()&&!!(a.T&2)};
s.pb=function(a){var b=this.k,c;c=this.Y();c=ac(c.A,"div",b.r()+"-content",a);for(var d,f=0;d=c[f];f++)Pi(b,this,d);hj.b.pb.call(this,a)};function ij(){}E(ij,sg);ca(ij);if(I)ij.prototype.setContent=function(a,b){var c=ij.b.X.call(this,a&&a.firstChild);if(c){var d=this.createCaption(b,Q(a)),f=c.parentNode;f&&f.replaceChild(d,c)}};s=ij.prototype;s.X=function(a){a=ij.b.X.call(this,a&&a.firstChild);if(I&&a&&a.__goog_wrapper_div)a=a.firstChild;return a};s.ha=function(a,b){var c=ac(document,"*","goog-menu",b)[0];if(c){De(c,!1);R(c).body.appendChild(c);var d=new hj;d.ha(c);a.Zd(d)}return ij.b.ha.call(this,a,b)};
s.me=function(a,b){return ij.b.me.call(this,[this.createCaption(a,b),b.t("div","goog-inline-block "+(this.r()+"-dropdown"),"\u00a0")],b)};s.createCaption=function(a,b){return b.t("div","goog-inline-block "+(this.r()+"-caption"),a)};s.r=q("goog-menu-button");function jj(a,b,c,d){rg.call(this,a,c||ij.Ca(),d);mg(this,64,!0);b&&this.Zd(b);this.v=new Ke(500);if((uf||vf)&&!K("533.17.9"))this.Ae=!0}E(jj,rg);s=jj.prototype;s.Cg=!0;s.gg=!1;s.Ae=!1;s.Rj=!1;s.da=function(){jj.b.da.call(this);this.l&&kj(this,this.l,!0);X(this.c(),"haspopup","true")};s.Pa=function(){jj.b.Pa.call(this);if(this.l){this.S(!1);this.l.Pa();kj(this,this.l,!1);var a=this.l.c();a&&Pc(a)}};s.i=function(){jj.b.i.call(this);this.l&&(this.l.j(),delete this.l);delete this.Pj;this.v.j()};
s.Ec=function(a){jj.b.Ec.call(this,a);if(this.o&4&&(this.S(!this.Qa(),a),this.l))this.l.Ib=this.Qa()};s.Fc=function(a){jj.b.Fc.call(this,a);if(this.l&&!(this.o&4))this.l.Ib=!1};s.rd=function(){this.setActive(!1);return!0};s.Ki=function(a){this.l&&this.l.$()&&!this.uc(a.target)&&this.S(!1)};s.uc=function(a){return a&&Rc(this.c(),a)||this.l&&this.l.uc(a)||!1};
s.ld=function(a){if(a.keyCode==32){if(a.preventDefault(),a.type!="keyup")return!1}else if(a.type!="key")return!1;if(this.l&&this.l.$()){var b=this.l.bb(a);return a.keyCode==27?(this.S(!1),!0):b}return a.keyCode==40||a.keyCode==38||a.keyCode==32?(this.S(!0),!0):!1};s.Bf=function(){this.S(!1)};s.Oi=function(){this.o&4||this.S(!1)};s.Gb=function(a){this.Ae||this.S(!1);jj.b.Gb.call(this,a)};function lj(a){a.l||a.Zd(new hj(a.Y()));return a.l||n}
s.Zd=function(a){var b=this.l;if(a!=b&&(b&&(this.S(!1),this.I&&kj(this,b,!1),delete this.l),a)){this.l=a;Tf(a,this);a.setVisible(!1);var c=this.Ae;(a.cf=c)&&a.mc(!0);this.I&&kj(this,a,!0)}return b};s.Pb=function(a){lj(this).Ad(a,!0)};s.Xc=function(a,b){lj(this).Bd(a,b,!0)};s.Jd=function(a){return this.l?Yf(this.l,a):n};s.te=function(){return this.l?Xf(this.l):0};s.setVisible=function(a,b){var c=jj.b.setVisible.call(this,a,b);c&&!this.$()&&this.S(!1);return c};
s.lc=function(a){jj.b.lc.call(this,a);this.isEnabled()||this.S(!1)};
s.S=function(a,b){jj.b.S.call(this,a);if(this.l&&!!(this.o&64)==a){if(a)this.l.I||(this.Rj?this.l.Kb(this.c().parentNode):this.l.Kb()),this.Wc=ve(this.c()),this.tc=Ce(this.c()),mj(this),$i(this.l,-1);else if(this.setActive(!1),this.l.Ib=!1,this.c()&&X(this.c(),"activedescendant",""),z(this.Me)){this.Me=i;var c=this.l.c();if(c){var d="",f;d instanceof Cc?(f=d.height,d=d.width):f="";c.style.width=re(d,!0);c.style.height=re(f,!0)}}this.l.setVisible(a,!1,b);this.pe||(c=this.sa(),d=a?c.h:c.ca,d.call(c,
Yc(this.Y()),"mousedown",this.Ki,!0),this.Ae&&d.call(c,this.l,"blur",this.Oi),d.call(c,this.v,Me,this.qd),a?this.v.start():this.v.stop())}};function mj(a){if(a.l.I){var b=new Ii(a.Pj||a.c(),a.Cg?5:7,!a.gg,a.gg),c=a.l.c();if(!a.l.$())c.style.visibility="hidden",De(c,!0);if(!a.Me&&a.gg)a.Me=Ae(c);b.Td(c,a.Cg?4:6,n,a.Me);if(!a.l.$())De(c,!1),c.style.visibility="visible"}}
s.qd=function(){var a=Ce(this.c()),b=ve(this.c());if(!(this.tc==a||(!this.tc||!a?0:this.tc.left==a.left&&this.tc.width==a.width&&this.tc.top==a.top&&this.tc.height==a.height))||!(this.Wc==b||(!this.Wc||!b?0:this.Wc.top==b.top&&this.Wc.right==b.right&&this.Wc.bottom==b.bottom&&this.Wc.left==b.left)))this.tc=a,this.Wc=b,mj(this)};function kj(a,b,c){var d=a.sa(),c=c?d.h:d.ca;c.call(d,b,"action",a.Bf);c.call(d,b,"highlight",a.zf);c.call(d,b,"unhighlight",a.Ff)}
s.zf=function(a){X(this.c(),"activedescendant",a.target.c().id)};s.Ff=function(){Yf(this.l,this.l.ia)||X(this.c(),"activedescendant","")};fg("goog-menu-button",function(){return new jj(n)});function nj(a){this.Ic=[];oj(this,a)}E(nj,Vd);s=nj.prototype;s.jc=n;s.kc=n;s.te=function(){return this.Ic.length};s.Jd=function(a){return this.Ic[a]||n};function oj(a,b){b&&(M(b,function(a){pj(this,a,!1)},a),yb(a.Ic,b))}s.Pb=function(a){this.Xc(a,this.te())};s.Xc=function(a,b){a&&(pj(this,a,!1),zb(this.Ic,b,0,a))};s.ve=p("jc");s.nc=function(a){if(a!=this.jc)pj(this,this.jc,!1),this.jc=a,pj(this,a,!0);this.dispatchEvent("select")};s.wf=function(){return this.jc?pb(this.Ic,this.jc):-1};s.Nh=function(a){this.nc(this.Jd(a))};
s.clear=function(){var a=this.Ic;if(!A(a))for(var b=a.length-1;b>=0;b--)delete a[b];a.length=0;this.jc=n};s.i=function(){nj.b.i.call(this);delete this.Ic;this.jc=n};function pj(a,b,c){b&&(typeof a.kc=="function"?a.kc(b,c):typeof b.kg=="function"&&b.kg(c))};function qj(a,b,c,d){jj.call(this,a,b,c,d);this.oe=a;rj(this);this.Oe="listbox"}E(qj,jj);s=qj.prototype;s.J=n;s.oe=n;s.da=function(){qj.b.da.call(this);rj(this);sj(this);X(this.c(),"haspopup","false")};s.pb=function(a){qj.b.pb.call(this,a);(a=this.ed())?(this.oe=a,rj(this)):this.Nh(0)};s.i=function(){qj.b.i.call(this);if(this.J)this.J.j(),this.J=n;this.oe=n};s.Bf=function(a){this.nc(a.target);qj.b.Bf.call(this,a);a.stopPropagation();this.dispatchEvent("action")};
s.Ti=function(){var a=this.ve();qj.b.W.call(this,a&&a.p());rj(this)};s.Zd=function(a){var b=qj.b.Zd.call(this,a);a!=b&&(this.J&&this.J.clear(),a&&(this.J?Wf(a,function(a){tj(a);this.J.Pb(a)},this):uj(this,a)));return b};s.Pb=function(a){tj(a);qj.b.Pb.call(this,a);this.J?this.J.Pb(a):uj(this,lj(this))};s.Xc=function(a,b){tj(a);qj.b.Xc.call(this,a,b);this.J?this.J.Xc(a,b):uj(this,lj(this))};s.nc=function(a){this.J&&this.J.nc(a)};s.Nh=function(a){this.J&&this.nc(this.J.Jd(a))};
s.W=function(a){if(z(a)&&this.J)for(var b=0,c;c=this.J.Jd(b);b++)if(c&&typeof c.p=="function"&&c.p()==a){this.nc(c);return}this.nc(n)};s.ve=function(){return this.J?this.J.ve():n};s.wf=function(){return this.J?this.J.wf():-1};function uj(a,b){a.J=new nj;b&&Wf(b,function(a){tj(a);this.J.Pb(a)},a);sj(a)}function sj(a){a.J&&a.sa().h(a.J,"select",a.Ti)}function rj(a){var b=a.ve();a.setContent(b?b.ed():a.oe)}function tj(a){a.Oe=a instanceof Wi?"option":"separator"}
s.S=function(a,b){qj.b.S.call(this,a,b);this.Qa()&&$i(lj(this),this.wf())};fg("goog-select",function(){return new qj(n)});function vj(a,b){this.e=a;this.ud=new qj("---");this.M=T(this.ud,"action",function(b){a.F.Tb(b.target.p())});this.ud.Kb(b)}E(vj,F);vj.prototype.sc=function(a,b){var c=new Wi(a.name,a);this.ud.Pb(c);if(b||this.ud.te()==1)this.ud.nc(c),this.e.F.Tb(a)};vj.prototype.i=function(){U(this.M);this.ud.j()};function wj(a){return 1-Math.pow(1-a,3)};function xj(a,b){this.e=a;this.Oa=!1;this.Le=this.Ke=this.Ja=this.Ia=0;this.Hc=this.M=n;T(this.e.a.canvas,"mousedown",C(this.Yf,this));T(R(this.e.a.canvas),"mouseup",C(this.Zf,this));this.wb=b||n}s=xj.prototype;s.Yf=function(a){if(pd(a,0)&&!a.ctrlKey&&!a.altKey){z(this.wb)&&this.wb.cancel();if(this.Hc)this.Hc.stop(!1),this.Hc.j(),this.Hc=n;this.Oa=!0;this.Ke=this.Ia=a.screenX;this.Le=this.Ja=a.screenY;if(!y(this.M))U(this.M),this.M=n;this.M=T(R(this.e.a.canvas),"mousemove",C(this.Qd,this));a.preventDefault()}};
s.Zf=function(a){if(this.Oa){a.preventDefault();this.Oa=!1;if(!y(this.M))U(this.M),this.M=n;if(pd(a,0)){var b=a.screenX-this.Ke,c=a.screenY-this.Le,a=Math.sqrt(Math.pow(b,2)+Math.pow(c,2));b/=a;c/=a;this.Ia==this.Ke&&this.Ja==this.Le&&(a*=2);if(a>6)a=Math.max(15,a)*6,this.Hc=new Ne([this.Ia,this.Ja],[this.Ia+a*b,this.Ja+a*c],1300,wj),T(this.Hc,["animate"],this.Xi,!1,this),this.Hc.play(!1)}}};
s.td=function(a,b){var c=Math.PI*(1/this.e.a.canvas.height)*(this.e.$d/Math.pow(2,xh(this.e.F,!0)));Wg(this.e.d,b*c,-2*a*c)};s.Qd=function(a){this.td(a.screenX-this.Ia,a.screenY-this.Ja);this.Ke=this.Ia;this.Le=this.Ja;this.Ia=a.screenX;this.Ja=a.screenY;a.preventDefault()};s.Xi=function(a){this.td(a.x-this.Ia,a.y-this.Ja);this.Ia=a.x;this.Ja=a.y};function yj(a){y(a)||function(){this.a=new Jg(a,Hc("weapp-fpsbox"),function(){window.document.location="http://www.webglearth.com/upgrade.html"});Kg(this.a);this.rh=new Ke(15);T(this.rh,Me,C(function(){var a=this.a,b=a.g;if(!y(a.rf)){var c=D();if(a.Mf<D()-2E3)a.qf=1E3*a.se/(D()-a.Mf),a.Eg=a.sf/a.se,a.Mf=D(),a.se=0,a.sf=0,a.rf.innerHTML=a.Eg.toFixed(2)+" ms / fps: "+a.qf.toFixed(2);a.se++}b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);a.Ea.ua=wg(4);a.n.draw();!y(a.rf)&&(a.sf+=D()-c);a=this.Rf;M(a.Sf.Cc(),
a.hk,a)},this));this.a.Sd="http://srtm.webglearth.com/cgi-bin/corsproxy.fcgi?url=";var b=!1;this.a.Vf=function(){if(!b)b=!0,window.location="http://data.webglearth.com/"};this.a.n=new Ch(this.a,Hc("weapp-infobox"),Hc("weapp-mapcopyright"),Hc("weapp-maplogo"));this.a.Pe();this.wb=new ni(this.a.n.d);this.tk=new xj(this.a.n,this.wb);this.zk=new Ci(this.a.n,this.wb);this.Bk=new Ai(this.a.n);this.gk=new vj(this.a.n,Hc("weapp-tileprovider"));this.Ck=new li(this.a.n,Hc("weapp-zoomslider"));this.uk=new xi(this.a.n,
Hc("weapp-pancontrol"));var c=Hc("weapp-nominatim");this.wh=new Lf(c);this.Rf=new yi(this.a.n,a.parentNode);var d=new Bi(0,0);d.enable(!1);zi(this.Rf,"nominatimMarker",d);var f=C(function(a){var b=a.boundingbox,c=O(parseFloat(a.lat)),f=O(parseFloat(a.lon)),g,m=O(parseFloat(b[0])),t=O(parseFloat(b[1]));g=this.a.Ac;var r=(m+t)/2,b=yh(r,O(parseFloat(b[2])),r,O(parseFloat(b[3]))),m=yh(m,0,t,0),t=Math.min(Math.max(this.a.Cd,b/m),1);g=O(Xb(g)/(t+0.4)-2);b=Math.max(m,b);b=Math.min(Math.PI/2,g+b/12756274);
g=9567205.5*(Math.sin(b)*Math.sqrt(1+1/Math.pow(Math.tan(g),2))-1);b=wh(this.a.n.F,vh(this.a.n.F).Db()+0.1,c);oi(this.wb,c,f,Math.max(g,b));d.enable(!0);d.lat=a.lat;d.Qf=a.lon},this);this.wh.addEventListener("update",function(a){f(a.row)});T(Hc("weapp-nominatimform"),"submit",C(function(a){a.preventDefault();this.wh.search(c.value,1,function(a,b){b.length>0&&f(b[0])})},this));var g=C(function(){function a(c){c+="=";var d=tb(b,function(a){return a.indexOf(c)===0});if(z(d)&&(d=d.substr(c.length),d.length>
0))return d}var b=window.location.hash.substr(1).split(";"),c=a("zoom")||a("z");isNaN(c)||this.a.n.F.setZoom(c);c=a("alt");isNaN(c)||Xg(this.a.n.d,c);c=a("t");isNaN(c)||this.a.n.d.setTilt(parseFloat(c));c=a("h");isNaN(c)||this.a.n.d.setHeading(parseFloat(c));c=a("ll");if(z(c))c=c.split(","),c.length>1&&!isNaN(c[0])&&!isNaN(c[1])&&this.a.n.d.setPosition(O(c[0]),O(c[1]));else{var c=a("lat"),d=a("lon")||a("long");!isNaN(c)&&!isNaN(d)&&this.a.n.d.setPosition(O(c),O(d))}},this);this.fh=new Ke(2E3);T(this.fh,
Me,C(function(){var a=[Xb(this.a.n.d.tb),Xb(this.a.n.d.Hb)];window.location.hash="#ll="+a[0].toFixed(5)+","+a[1].toFixed(5)+";alt="+this.a.n.d.ja.toFixed(0)+";h="+this.a.n.d.getHeading().toFixed(3)+";t="+this.a.n.d.getTilt().toFixed(3)},this));this.fh.start();window.addEventListener("hashchange",g,!1);g();T(this.a.canvas,"click",C(function(a){if(a.ctrlKey){var b=Zg(this.a.n,a.offsetX,a.offsetY),b=new si(b[0],b[1]),c=new qi("<h2>Title</h2><br/><b>aa</b>bb");b.ga&&Pc(b.ga.c());b.ga=c;b.element.appendChild(b.ga.c());
c.ga.style.bottom=b.Gc.toFixed(0)+"px";b.ng(!0);zi(this.Rf,n,b);a.preventDefault()}},this))}.call(this)}yj.prototype.sc=function(a){this.gk.sc(a)};yj.prototype.start=function(){this.rh.start()};
function zj(){var a=new yj(Hc("weapp-canvas"));a.sc(new wi);a.sc(new Nf);a.sc(new ui("Aerial","AsLurrtJotbxkJmnsefUYbatUuBkeBTzTL930TvcOekeG8SaQPY9Z5LDKtiuzAOu"));a.sc(new ui("AerialWithLabels","AsLurrtJotbxkJmnsefUYbatUuBkeBTzTL930TvcOekeG8SaQPY9Z5LDKtiuzAOu"));a.sc(new ui("Road","AsLurrtJotbxkJmnsefUYbatUuBkeBTzTL930TvcOekeG8SaQPY9Z5LDKtiuzAOu"));a.start()}var Aj="WEApp".split("."),Bj=u;!(Aj[0]in Bj)&&Bj.execScript&&Bj.execScript("var "+Aj[0]);
for(var Cj;Aj.length&&(Cj=Aj.shift());)!Aj.length&&x(zj)?Bj[Cj]=zj:Bj=Bj[Cj]?Bj[Cj]:Bj[Cj]={};
